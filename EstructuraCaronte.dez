<?xml version="1.0" encoding="iso-8859-1"?><dezign>

<FILEFORMATVERSION>60</FILEFORMATVERSION>
<VERSION>
<PROJECTSETTINGS>
<COMMONSETTINGS>
<PROJECTFILENAME>D:\Lizet\Net\Sistemas\Caronte\BD\EstructuraCaronte.dez</PROJECTFILENAME>
<MODIFIED>2022-11-07</MODIFIED>
<CREATED>2019-08-19</CREATED>
<CREATED2></CREATED2>
<PROJECTNAME></PROJECTNAME>
<DESCRIPTION></DESCRIPTION>
<AUTHOR></AUTHOR>
<COPYRIGHT></COPYRIGHT>
<LASTGENERATEDFILES></LASTGENERATEDFILES>
<PRINTORIENTATION>PORTRAIT</PRINTORIENTATION>
<PRINTPAGETYPE>A4</PRINTPAGETYPE>
<DEFTABLEOPTIONS></DEFTABLEOPTIONS>
<DEFINDEXOPTIONS></DEFINDEXOPTIONS>
<AUTOCREATEINDEXESONKEYS>0</AUTOCREATEINDEXESONKEYS>
<BEGINDATABASESCRIPT></BEGINDATABASESCRIPT>
<ENDDATABASESCRIPT></ENDDATABASESCRIPT>
<BEGINALTERDATABASESCRIPT></BEGINALTERDATABASESCRIPT>
<ENDALTERDATABASESCRIPT></ENDALTERDATABASESCRIPT>
<BEGINDROPDATABASESCRIPT></BEGINDROPDATABASESCRIPT>
<ENDDROPDATABASESCRIPT></ENDDROPDATABASESCRIPT>
<DEZVERSION>6.1.0</DEZVERSION>
<PROJECTID>P0O9I0EIO90DA058D6E239EAE7</PROJECTID>
</COMMONSETTINGS>
<NAMETEMPLATES>
<PKCONNAMETEMPLATE>PK_%table%</PKCONNAMETEMPLATE>
<FKCONNAMETEMPLATE>%relname%</FKCONNAMETEMPLATE>
<CCONNAMETEMPLATE>CC_%table%_%column%</CCONNAMETEMPLATE>
<NOTNULLCONNAMETEMPLATE>NN_%table%_%column%</NOTNULLCONNAMETEMPLATE>
<DEFAULTCONNAMETEMPLATE>DEF_%table%_%column%</DEFAULTCONNAMETEMPLATE>
<TUCONNAMETEMPLATE>TUC_%table%_%counter%</TUCONNAMETEMPLATE>
<TCCONNAMETEMPLATE>TCC_%table%_%counter%</TCCONNAMETEMPLATE>
<RELNAMETEMPLATE>%parent%_%child%</RELNAMETEMPLATE>
<INDEXNAMETEMPLATE>IDX_%table%_%counter%</INDEXNAMETEMPLATE>
<DEFAULTSCHEMANAME></DEFAULTSCHEMANAME>
<PKINDEXNAMETEMPLATE>IDX_%table%_PK</PKINDEXNAMETEMPLATE>
<FKINDEXNAMETEMPLATE>IDX_%table%_%counter%_FK</FKINDEXNAMETEMPLATE>
<AKINDEXNAMETEMPLATE>IDX_%table%_%counter%_AK</AKINDEXNAMETEMPLATE>
</NAMETEMPLATES>
<COMPARESETTINGS>
</COMPARESETTINGS>
<ImpDB_DBParams>
</ImpDB_DBParams>
<ImpDB_Options>
</ImpDB_Options>
<GenDB_DBParams>
</GenDB_DBParams>
<GenDB_Options>
</GenDB_Options>
<AltDB_DBParams>
<SERVERNAME>172.17.0.59</SERVERNAME>
<DATABASENAME>dbSujetosObligados</DATABASENAME>
<USENTLOGIN>0</USENTLOGIN>
<USERNAME>sa</USERNAME>
<SCHEMANAME>dbo</SCHEMANAME>
</AltDB_DBParams>
<AltDB_Options>
</AltDB_Options>
<UpdModel_DBParams>
<SERVERNAME>172.17.0.59</SERVERNAME>
<DATABASENAME>dbSujetosObligados</DATABASENAME>
<USENTLOGIN>0</USENTLOGIN>
<USERNAME>sa</USERNAME>
<SCHEMANAME>dbo</SCHEMANAME>
</UpdModel_DBParams>
<UpdModel_Options>
</UpdModel_Options>
<UpdDB_DBParams>
<SERVERNAME>172.17.0.59</SERVERNAME>
<DATABASENAME>dbSujetosObligados</DATABASENAME>
<USENTLOGIN>0</USENTLOGIN>
<USERNAME>sa</USERNAME>
<SCHEMANAME>dbo</SCHEMANAME>
</UpdDB_DBParams>
<UpdDB_Options>
</UpdDB_Options>
<CompVer_DBParams>
</CompVer_DBParams>
<CompVer_Options>
</CompVer_Options>
<Merge_Settings>
</Merge_Settings>
<Rep_Settings>
</Rep_Settings>
<CONGENDIRECTIVES></CONGENDIRECTIVES>
</PROJECTSETTINGS>
<DATADICT>
<DBID>mssqlserver2008</DBID>
<LASTID>188</LASTID>
<DOMAINS>
</DOMAINS>
<ENTITIES>
<ENT>
<NAME>CasosRenovacionDocumentos</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>3</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_CasosRenovacionDocumentos</NAME>
<NAMETEMPLATE>PK_CasosRenovacionDocumentos</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>id_caso</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>descripcion</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>VARCHAR</DTLISTNAME>
<LE>40</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>certimpre</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>9</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<ATTRIBUTES>
<ATTR>
<NAME>idCertificadoImpresion</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>imagen</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>IMAGE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>seq_Func</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>tipo</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>Dominio</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>5</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<ATTRIBUTES>
<ATTR>
<NAME>Dominio</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Codigo</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>VARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Descripcion</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Estado</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>LOG_REGISTRO_REQUISITO</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>9</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_LOG_REGISTRO_REQUISITO</NAME>
<NAMETEMPLATE>PK_LOG_REGISTRO_REQUISITO</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idLogRegistro_Requisito</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idRegistro_Requisito</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>nusuario</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>25</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Fecha</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Operacion</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Observacion</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Proveido</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Estado</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>LogsTrans</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>6</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_LogsTrans</NAME>
<NAMETEMPLATE>PK_LogsTrans</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>nUsuario</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>25</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Fecha</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Transaccion</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>30</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Estado</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>NotarioBak</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>19</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<ATTRIBUTES>
<ATTR>
<NAME>Nombres</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Ap_Paterno</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Ap_Materno</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Ap_De_Casada</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Nro_Cedula</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Nro_Notario</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>FLOAT</DTLISTNAME>
<LE>8</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Departamento</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Provincia</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Localidad</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Tipo_Localidad</NAME>
<ID>11</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Circunscripcion</NAME>
<ID>12</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Direccion</NAME>
<ID>13</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Zona</NAME>
<ID>14</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Tipo_Notario</NAME>
<ID>15</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Fecha_de_Nombramiento</NAME>
<ID>16</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Correo_electrónico</NAME>
<ID>17</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Nro_Celular</NAME>
<ID>18</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Telefono</NAME>
<ID>19</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>Observacion_Tramite_Sistemas</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>13</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_Observacion_Tramite_Terminado</NAME>
<NAMETEMPLATE>PK_Observacion_Tramite_Terminado</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idObservacion_Terminado</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Usuario_Creado</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Fecha_Aprobacion</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Fecha_Correccion</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Usuario_siso</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Usuario_sadi</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Nro_Informe</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idFuncionarioLegalAnalista</NAME>
<ID>11</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idFuncionarioLegalJefe</NAME>
<ID>12</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>13</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>obstramitearchivo</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>8</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<ATTRIBUTES>
<ATTR>
<NAME>idObservacionTramite</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Observacion</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Fecha_Archivado</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Fecha_correccion</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Secuencia</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>PARAM_REQUISITOS_SO</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>5</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_PARAM_REQUISITOS_SO</NAME>
<NAMETEMPLATE>PK_PARAM_REQUISITOS_SO</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idParam</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>COD_PARAM</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>DESCRIPCION</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>150</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>ESTADO</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>Registro_casoRenovacion</NAME>
<ID>11</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>5</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_Registro_casoRenovacion</NAME>
<NAMETEMPLATE>PK_Registro_casoRenovacion</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>id_RrCrenv</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>1</SD>
<INC>1</INC>
<AN>1</AN>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idParam</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>3</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>VARCHAR</DTLISTNAME>
<LE>40</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>id_caso</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>5</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>REGISTRO_REQUISITO</NAME>
<ID>12</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>14</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_REGISTRO_REQUISITO</NAME>
<NAMETEMPLATE>PK_REGISTRO_REQUISITO</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idRegistro_Requisito</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idParam</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idFuncionario</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>fecha_registro</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>ESTADO</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>nro_documento</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>fecha_documento</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>imagen</NAME>
<ID>11</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>IMAGE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Secuencia</NAME>
<ID>12</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Estado_DU</NAME>
<ID>13</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>estado_renovacion</NAME>
<ID>14</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>BIT</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>14</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
<DEFCON>
<NAME>DF__REGISTRO___estad__30242045</NAME>
<NAMETEMPLATE>DF__REGISTRO___estad__30242045</NAMETEMPLATE>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>0</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>6</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>14</ATTRIBUTEID>
</ATTRIBUTEIDS>
</DEFCON>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>REGISTRO_REQUISITOHistRenovados</NAME>
<ID>13</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>15</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_idRegistro_ReqHist</NAME>
<NAMETEMPLATE>PK_idRegistro_ReqHist</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idRegistro_Requisito_hist</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>1</SD>
<INC>1</INC>
<AN>1</AN>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idRegistro_Requisito</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>3</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idParam</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idFuncionario</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>fecha_registro</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>ESTADO</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>nro_documento</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>fecha_documento</NAME>
<ID>11</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>imagen</NAME>
<ID>12</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>IMAGE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Secuencia</NAME>
<ID>13</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Estado_DU</NAME>
<ID>14</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>fechaRenovado</NAME>
<ID>15</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>ReporteSujetoObligado</NAME>
<ID>14</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>12</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<ATTRIBUTES>
<ATTR>
<NAME>SUJETO_OBLIGADO</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>TIPO_EMPRESA</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>NIT</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>30</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>nombre</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>NOMBRE_REPRESENTANTE</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Descripcion</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_CIUDAD_LOCALIDAD</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>200</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_ZONA</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_DIRECCION</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>250</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_TELEFONO</NAME>
<ID>11</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CORREO_ELECTRONICO</NAME>
<ID>12</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tabla_auxiliar_eli_tCertificacionImpresion</NAME>
<ID>15</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>9</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<ATTRIBUTES>
<ATTR>
<NAME>idCertificadoImpresion</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>imagen</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>IMAGE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>seq_Func</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>tipo</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tabla_auxiliar_eli_tObservacionTramite_archivo</NAME>
<ID>16</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>8</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<ATTRIBUTES>
<ATTR>
<NAME>idObservacionTramite</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Observacion</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Fecha_Archivado</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Fecha_correccion</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Secuencia</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tActividadEconomica</NAME>
<ID>17</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>3</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tActividadEconomica</NAME>
<NAMETEMPLATE>PK_tActividadEconomica</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idActividadEconomica</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>nombre</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tBajaFuncionario</NAME>
<ID>18</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>13</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tBajaFuncionario</NAME>
<NAMETEMPLATE>PK_tBajaFuncionario</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idBajaFuncionario</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idFuncionarioNuevo</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idFuncionarioAnterior</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idTramiteAnterior</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idTramiteNuevo</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>fecha_registro</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>fecha_aprobacion_juridica</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>fecha_archivado</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>TipoBaja</NAME>
<ID>11</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>12</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Estado</NAME>
<ID>13</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>10</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tBajaSujetoObligado</NAME>
<ID>19</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>5</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tBajaSujetoObligado</NAME>
<NAMETEMPLATE>PK_tBajaSujetoObligado</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idBajaSujetoObligado</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Estado</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tCertificadoImpresion</NAME>
<ID>20</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>9</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tCertificadoImpresion</NAME>
<NAMETEMPLATE>PK_tCertificadoImpresion</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idCertificadoImpresion</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>imagen</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>IMAGE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>seq_Func</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>tipo</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tCiudad</NAME>
<ID>21</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>3</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tCiudad</NAME>
<NAMETEMPLATE>PK_tCiudad</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idCiudad</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>Descripcion</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tComplemento</NAME>
<ID>22</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>7</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tComplemento</NAME>
<NAMETEMPLATE>PK_tComplemento</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idComplemento</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>descripción</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>nombre_formulario</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>secuencia</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>grupo</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tComunicacionCambioFR</NAME>
<ID>23</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>10</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tComunicacionCambioFR</NAME>
<NAMETEMPLATE>PK_tComunicacionCambioFR</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idComunicacionCambioFR</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idFuncionario</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>motivo</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>1000</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>fecha_notificacion</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>fecha_desvinculacion</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tCorreo</NAME>
<ID>24</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>6</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tCorreo</NAME>
<NAMETEMPLATE>PK_tCorreo</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idCorreo</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>asunto</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>250</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>cuerpo</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>1000</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Estado</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tDetalleCorreo</NAME>
<ID>25</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>6</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tDetalleCorreo</NAME>
<NAMETEMPLATE>PK_tDetalleCorreo</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idDetalleCorreo</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idCorreo</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Estado</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tEntidad</NAME>
<ID>26</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>22</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tEntidad</NAME>
<NAMETEMPLATE>PK_tEntidad</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idEntidad</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>SUJETO_OBLIGADO</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>TIPO_EMPRESA</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OTRO_TIPO_EMPRESA</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>NIT</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>30</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CLAVE_TIPO_SUJETO_OBLIGADO</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OTRO_TIPO_SO</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>NOMBRE_REPRESENTANTE</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_DEPARTAMENTO</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>20</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_CIUDAD_LOCALIDAD</NAME>
<ID>11</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>200</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_ZONA</NAME>
<ID>12</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_DIRECCION</NAME>
<ID>13</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>250</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_TELEFONO</NAME>
<ID>14</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CORREO_ELECTRONICO</NAME>
<ID>15</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OBSERVACIONES</NAME>
<ID>16</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>250</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idActividadEconomica</NAME>
<ID>17</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idCiudad</NAME>
<ID>18</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>CODIGO_VERIFICADOR</NAME>
<ID>19</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>ESTADO_IMPRESION</NAME>
<ID>20</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>ESTADO</NAME>
<ID>21</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>nusuario</NAME>
<ID>22</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>25</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tEntidadHistRenovados</NAME>
<ID>27</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>24</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tEntidad2</NAME>
<NAMETEMPLATE>PK_tEntidad2</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idEntidad_hist</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>1</SD>
<INC>1</INC>
<AN>1</AN>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>3</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>SUJETO_OBLIGADO</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>TIPO_EMPRESA</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OTRO_TIPO_EMPRESA</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>NIT</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>30</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CLAVE_TIPO_SUJETO_OBLIGADO</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OTRO_TIPO_SO</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>NOMBRE_REPRESENTANTE</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_DEPARTAMENTO</NAME>
<ID>11</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>20</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_CIUDAD_LOCALIDAD</NAME>
<ID>12</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>200</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_ZONA</NAME>
<ID>13</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_DIRECCION</NAME>
<ID>14</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>250</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_TELEFONO</NAME>
<ID>15</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CORREO_ELECTRONICO</NAME>
<ID>16</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OBSERVACIONES</NAME>
<ID>17</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>250</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idActividadEconomica</NAME>
<ID>18</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idCiudad</NAME>
<ID>19</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>CODIGO_VERIFICADOR</NAME>
<ID>20</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>ESTADO_IMPRESION</NAME>
<ID>21</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>ESTADO</NAME>
<ID>22</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>nusuario</NAME>
<ID>23</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>25</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>fecha_renovacion</NAME>
<ID>24</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tEstado</NAME>
<ID>28</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>3</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tEstado</NAME>
<NAMETEMPLATE>PK_tEstado</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>Estado_Tramite</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>Descripcion</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tFormulario</NAME>
<ID>29</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>6</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tFormulario</NAME>
<NAMETEMPLATE>PK_tFormulario</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idFormulario</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>Descripcion</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2000</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tFuncionario</NAME>
<ID>30</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>22</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tAnalistaCumplimiento</NAME>
<NAMETEMPLATE>PK_tAnalistaCumplimiento</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idFuncionario</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>PN_NOMBRE</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_PATERNO</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_MATERNO</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_CASADA</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_DOCUMENTO</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>30</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_TAB_CIUDAD</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>8</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_TAB_PAIS_NACIONALIDAD</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>8</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_FECHA_NACIMIENTO</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>PN_CARGO</NAME>
<ID>11</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CM_DIRECCION</NAME>
<ID>12</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>250</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CM_TELEFONO</NAME>
<ID>13</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CM_INTERNO</NAME>
<ID>14</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>20</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CM_CELULAR</NAME>
<ID>15</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CORREO_ELECTRONICO</NAME>
<ID>16</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OBSERVACIONES</NAME>
<ID>17</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>200</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>18</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idPais</NAME>
<ID>19</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>TIPO_FUNCIONARIO</NAME>
<ID>20</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Observacion_subsanada</NAME>
<ID>21</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>10</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Motivo_o_Causal</NAME>
<ID>22</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tFuncionarioHistRenovados</NAME>
<ID>31</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>24</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tFuncionarioHistRenov</NAME>
<NAMETEMPLATE>PK_tFuncionarioHistRenov</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idFuncionario_hist</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>BIGINT</DTLISTNAME>
<SD>1</SD>
<INC>1</INC>
<AN>1</AN>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idFuncionario</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>3</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>PN_NOMBRE</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_PATERNO</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_MATERNO</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_CASADA</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_DOCUMENTO</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>30</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_TAB_CIUDAD</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>8</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_TAB_PAIS_NACIONALIDAD</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>8</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_FECHA_NACIMIENTO</NAME>
<ID>11</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>PN_CARGO</NAME>
<ID>12</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CM_DIRECCION</NAME>
<ID>13</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>250</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CM_TELEFONO</NAME>
<ID>14</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CM_INTERNO</NAME>
<ID>15</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>20</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CM_CELULAR</NAME>
<ID>16</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CORREO_ELECTRONICO</NAME>
<ID>17</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OBSERVACIONES</NAME>
<ID>18</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>200</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>19</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idPais</NAME>
<ID>20</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>TIPO_FUNCIONARIO</NAME>
<ID>21</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Observacion_subsanada</NAME>
<ID>22</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>10</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Motivo_o_Causal</NAME>
<ID>23</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>fecha_renovacion</NAME>
<ID>24</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>24</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
<DEFCON>
<NAME>DF_tFuncionarioHistRenovados_fecha_renovacion</NAME>
<NAMETEMPLATE>DF_tFuncionarioHistRenovados_fecha_renovacion</NAMETEMPLATE>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>(1990)-(1))-(1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>6</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>24</ATTRIBUTEID>
</ATTRIBUTEIDS>
</DEFCON>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tFuncionarioLegal</NAME>
<ID>32</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>5</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tFuncionarioLegal</NAME>
<NAMETEMPLATE>PK_tFuncionarioLegal</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idFuncionarioLegal</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>item</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>nombre</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tImprimirReporte</NAME>
<ID>33</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>6</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tImprimirReporte</NAME>
<NAMETEMPLATE>PK_tImprimirReporte</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idImprimir_Reporte</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>formulario</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>nro_reporte</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tObservacionMesa_Entrada</NAME>
<ID>34</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>7</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tObservacionMesa_Entrada</NAME>
<NAMETEMPLATE>PK_tObservacionMesa_Entrada</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idObservacionMEntrada</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>fecha_recepcion</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Estado</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>10</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tObservacionRegistro_Requisito</NAME>
<ID>35</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>4</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<ATTRIBUTES>
<ATTR>
<NAME>idObservacionTramite</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Observacion</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tObservacionTramite_Archivo</NAME>
<ID>36</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>8</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tObservacionTramite_Archivo</NAME>
<NAMETEMPLATE>PK_tObservacionTramite_Archivo</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idObservacionTramite</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Observacion</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Fecha_Archivado</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Fecha_correccion</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Secuencia</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tPais</NAME>
<ID>37</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>3</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tPais</NAME>
<NAMETEMPLATE>PK_tPais</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idPais</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>nombre</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tReemplazoTemporal</NAME>
<ID>38</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>9</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tReemplazoTemporal</NAME>
<NAMETEMPLATE>PK_tReemplazoTemporal</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idTemporal</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idFuncionarioFR</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idFuncionarioAC</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>FechaInicio</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>FechaFin</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>motivo</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tReportes</NAME>
<ID>39</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>7</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tReportes</NAME>
<NAMETEMPLATE>PK_tReportes</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idReportes</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>descripción</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>nombre_reporte</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>secuencia</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>grupo</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tTramite</NAME>
<ID>40</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>8</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tTramite</NAME>
<NAMETEMPLATE>PK_tTramite</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idTramite_Secuencia</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Estado_Tramite</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Observacion_subsanada</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>10</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Secuencia</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Estado_DU</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tTramiteClasificacion</NAME>
<ID>41</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>9</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK__tTramite__15E4D34ACA22ADCC</NAME>
<NAMETEMPLATE>PK__tTramite__15E4D34ACA22ADCC</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idTramite_Secuencia</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>Tipo_Funcionario</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>VARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Tipo_Tramite</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>VARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Requisitos</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>BIT</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>EstadoImpresion</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>usuarioRegistro</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>VARCHAR</DTLISTNAME>
<LE>200</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>fechaRegistro</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tUsuarioComplemento</NAME>
<ID>42</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>6</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tUsuarioComplemento</NAME>
<NAMETEMPLATE>PK_tUsuarioComplemento</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idUsuarioComplemento</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>nusuario</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NCHAR</DTLISTNAME>
<LE>25</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idComplemento</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>habilita</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>BIT</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tUsuarioReportes</NAME>
<ID>43</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>6</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tUsuarioReportes</NAME>
<NAMETEMPLATE>PK_tUsuarioReportes</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idUsuarioReportes</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>nusuario</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>VARCHAR</DTLISTNAME>
<LE>25</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idReportes</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>habilita</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>BIT</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>Users</NAME>
<ID>44</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>10</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_Users</NAME>
<NAMETEMPLATE>PK_Users</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>nusuario</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>VARCHAR</DTLISTNAME>
<LE>25</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idfuncionario</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>VARCHAR</DTLISTNAME>
<LE>25</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Pwd</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>VARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>usuarioRol</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>nombres</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>apellido_paterno</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>apellido_materno</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>correo</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>3</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
</ENTITIES>
<SUBCATEGORIES>
</SUBCATEGORIES>
<TEXTAREAS>
</TEXTAREAS>
<GROUPBOXES>
</GROUPBOXES>
<STAMPS>
</STAMPS>
<SEQUENCES>
</SEQUENCES>
<PROCEDURES>
<PROCEDURE>
<NAME>sp_alterdiagram</NAME>
<ID>45</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE PROCEDURE %procname%
	(
		@diagramname 	sysname,
		@owner_id	int	= null,
		@version 	int,
		@definition 	varbinary(max)
	)
	WITH EXECUTE AS 'dbo'
	AS
	BEGIN
		set nocount on

		declare @theId 			int
		declare @retval 		int
		declare @IsDbo 			int

		declare @UIDFound 		int
		declare @DiagId			int
		declare @ShouldChangeUID	int

		if(@diagramname is null)
		begin
			RAISERROR ('Invalid ARG', 16, 1)
			return -1
		end

		execute as caller;
		select @theId = DATABASE_PRINCIPAL_ID();
		select @IsDbo = IS_MEMBER(N'db_owner');
		if(@owner_id is null)
			select @owner_id = @theId;
		revert;

		select @ShouldChangeUID = 0
		select @DiagId = diagram_id, @UIDFound = principal_id from dbo.sysdiagrams where principal_id = @owner_id and name = @diagramname

		if(@DiagId IS NULL or (@IsDbo = 0 and @theId &lt;&gt; @UIDFound))
		begin
			RAISERROR ('Diagram does not exist or you do not have permission.', 16, 1);
			return -3
		end

		if(@IsDbo &lt;&gt; 0)
		begin
			if(@UIDFound is null or USER_NAME(@UIDFound) is null) -- invalid principal_id
			begin
				select @ShouldChangeUID = 1 ;
			end
		end

		-- update dds data
		update dbo.sysdiagrams set definition = @definition where diagram_id = @DiagId ;

		-- change owner
		if(@ShouldChangeUID = 1)
			update dbo.sysdiagrams set principal_id = @theId where diagram_id = @DiagId ;

		-- update dds version
		if(@version is not null)
			update dbo.sysdiagrams set version = @version where diagram_id = @DiagId ;

		return 0
	END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>sp_dropdiagram</NAME>
<ID>46</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE PROCEDURE %procname%
	(
		@diagramname 	sysname,
		@owner_id	int	= null
	)
	WITH EXECUTE AS 'dbo'
	AS
	BEGIN
		set nocount on
		declare @theId 			int
		declare @IsDbo 			int

		declare @UIDFound 		int
		declare @DiagId			int

		if(@diagramname is null)
		begin
			RAISERROR ('Invalid value', 16, 1);
			return -1
		end

		EXECUTE AS CALLER;
		select @theId = DATABASE_PRINCIPAL_ID();
		select @IsDbo = IS_MEMBER(N'db_owner');
		if(@owner_id is null)
			select @owner_id = @theId;
		REVERT;

		select @DiagId = diagram_id, @UIDFound = principal_id from dbo.sysdiagrams where principal_id = @owner_id and name = @diagramname
		if(@DiagId IS NULL or (@IsDbo = 0 and @UIDFound &lt;&gt; @theId))
		begin
			RAISERROR ('Diagram does not exist or you do not have permission.', 16, 1)
			return -3
		end

		delete from dbo.sysdiagrams where diagram_id = @DiagId;

		return 0;
	END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>fn_diagramobjects</NAME>
<ID>47</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE FUNCTION %procname%()
	RETURNS int
	WITH EXECUTE AS N'dbo'
	AS
	BEGIN
		declare @id_upgraddiagrams		int
		declare @id_sysdiagrams			int
		declare @id_helpdiagrams		int
		declare @id_helpdiagramdefinition	int
		declare @id_creatediagram	int
		declare @id_renamediagram	int
		declare @id_alterdiagram 	int
		declare @id_dropdiagram		int
		declare @InstalledObjects	int

		select @InstalledObjects = 0

		select 	@id_upgraddiagrams = object_id(N'dbo.sp_upgraddiagrams'),
			@id_sysdiagrams = object_id(N'dbo.sysdiagrams'),
			@id_helpdiagrams = object_id(N'dbo.sp_helpdiagrams'),
			@id_helpdiagramdefinition = object_id(N'dbo.sp_helpdiagramdefinition'),
			@id_creatediagram = object_id(N'dbo.sp_creatediagram'),
			@id_renamediagram = object_id(N'dbo.sp_renamediagram'),
			@id_alterdiagram = object_id(N'dbo.sp_alterdiagram'),
			@id_dropdiagram = object_id(N'dbo.sp_dropdiagram')

		if @id_upgraddiagrams is not null
			select @InstalledObjects = @InstalledObjects + 1
		if @id_sysdiagrams is not null
			select @InstalledObjects = @InstalledObjects + 2
		if @id_helpdiagrams is not null
			select @InstalledObjects = @InstalledObjects + 4
		if @id_helpdiagramdefinition is not null
			select @InstalledObjects = @InstalledObjects + 8
		if @id_creatediagram is not null
			select @InstalledObjects = @InstalledObjects + 16
		if @id_renamediagram is not null
			select @InstalledObjects = @InstalledObjects + 32
		if @id_alterdiagram  is not null
			select @InstalledObjects = @InstalledObjects + 64
		if @id_dropdiagram is not null
			select @InstalledObjects = @InstalledObjects + 128

		return @InstalledObjects
	END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>ps_obtenerEntidadesBaja</NAME>
<ID>48</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>-- ===============================================================
-- Author:		lizet.silva
-- Create date: 20180429
-- Description:	Procedimiento que obtiene los trámites que esten
--				a punto de vencerse transcurrido x años y z meses con un
--				intervalo de n días para enviar un aviso oportuno
--				al sujeto obligado.
--				Nota los SO que hayan iniciado la renovación no reciben correo
-- ===============================================================
CREATE PROCEDURE %procname%
	-- Add the parameters for the stored procedure here
	@nroAnios int,
	@nroMeses int,
	@nroDias int
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	--SET NOCOUNT ON;
SELECT DISTINCT ent.idEntidad,
		ent.SUJETO_OBLIGADO AS sujetoObligado,
		ent.CORREO_ELECTRONICO AS correoSujetoObligado,
		ent.ESTADO AS estadoEntidad,
		tra.Estado_Tramite AS estadoTramite,
		logt.Fecha AS fechaImpresion,
		cer.idTramite,
		cer.idLogTrans
FROM dbo.tEntidad ent
INNER JOIN dbo.tCertificadoImpresion cer ON ent.idEntidad = cer.idEntidad
INNER JOIN dbo.tTramite tra ON tra.idTramite = cer.idTramite
INNER JOIN dbo.LogsTrans logt ON logt.idLogTrans = cer.idLogTrans
LEFT JOIN tTramiteClasificacion tc on tra.idTramite=tc.idTramite
WHERE EXISTS(SELECT c.idEntidad, MAX(l.Fecha) FROM dbo.LogsTrans l
             INNER JOIN dbo.tCertificadoImpresion c ON c.idLogTrans = l.idLogTrans  and c.tipo = 'SO'
			 LEFT JOIN tTramiteClasificacion tc on tra.idTramite=tc.idTramite
		     GROUP BY c.idEntidad  HAVING c.idEntidad = ent.idEntidad AND MAX(l.Fecha) = logt.Fecha)
	         AND ent.idEntidad NOT IN(SELECT tra.idEntidad
									  FROM tTramiteClasificacion t
									  LEFT JOIN tTramite tra on tra.idTramite = t.idTramite)
			--AND ent.ESTADO ='AC'
	        AND ent.ESTADO !='AN' and ent.estado !='BA' and cer.tipo = 'SO' and tra.Estado_Tramite = 'TE'
			--AND (SELECT DATEADD(month, 0, (DATEADD(year, 2, logt.Fecha)))) &lt;= (SELECT DATEADD(day, 0, GETDATE()))
			AND (SELECT DATEADD(month, @nroMeses, (DATEADD(year, @nroAnios, logt.Fecha)))) &lt;= (SELECT DATEADD(day, @nroDias, GETDATE()))
ORDER BY logt.Fecha ASC
END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>ps_verificarEntidadesRenovadas</NAME>
<ID>49</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>-- ===============================================================
-- Author:		lizet.silva
-- Create date: 20170928
-- Description:	Procedimiento que verifica si la entidad realizó
--				una renovación y no la terminó
-- ===============================================================
CREATE PROCEDURE %procname%
	-- Add the parameters for the stored procedure here
	@idEntidad int
AS
BEGIN
	SELECT DISTINCT
       req.[idEntidad]
      ,tra.[idTramite]
      ,req.[fecha_registro]
      ,req.[ESTADO]
      ,req.[Estado_DU]
      ,req.[estado_renovacion]
	  ,req.[Secuencia]
	FROM [dbSujetosObligados].[dbo].[REGISTRO_REQUISITO] req
	INNER JOIN dbo.tTramite tra ON req.idTramite = tra.idTramite
	where ESTADO IN ('AJ', 'AP') AND estado_renovacion = 1 AND req.idEntidad = @idEntidad
END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>ps_obtenerNombreSujetoObligado</NAME>
<ID>50</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE procedure %procname%

@sujeto_obligado nvarchar(200)

as


begin
select [idEntidad]
      ,[SUJETO_OBLIGADO]
      ,[TIPO_EMPRESA]
      ,[OTRO_TIPO_EMPRESA]
      ,[NIT]
      ,[CLAVE_TIPO_SUJETO_OBLIGADO]
      ,[OTRO_TIPO_SO]
      ,[NOMBRE_REPRESENTANTE]
      ,[OFCEN_DEPARTAMENTO]
      ,[OFCEN_CIUDAD_LOCALIDAD]
      ,[OFCEN_ZONA]
      ,[OFCEN_DIRECCION]
      ,[OFCEN_TELEFONO]
      ,[CORREO_ELECTRONICO]
      ,[OBSERVACIONES]
      ,[idActividadEconomica]
      ,[idCiudad]
      ,[CODIGO_VERIFICADOR]
      ,[ESTADO_IMPRESION]
      ,[ESTADO]
      ,[nusuario]
  FROM [dbSujetosObligados].[dbo].[tEntidad]

  where [SUJETO_OBLIGADO] LIKE '%'+@sujeto_obligado+'%' and estado &lt;&gt; 'AN'

  end</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>ps_ActualizarRepresentanteLegalEntidad</NAME>
<ID>51</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE PROCEDURE %procname%
---EMEM---------

    @idEntidad AS BIGINT,
    @NombreRepresentanteLegal AS NVARCHAR(100)

AS
BEGIN
DECLARE @mensaje AS VARCHAR(100);
    SET NOCOUNT ON;
    Begin Tran Tadd

    Begin Try

	UPDATE tEntidad
    set NOMBRE_REPRESENTANTE=@NombreRepresentanteLegal

     where idEntidad=@idEntidad

     SET @mensaje = 'Se realizo correctamente la actualización del representante legal'

	 print  @mensaje
        COMMIT TRAN Tadd



    End try
    Begin Catch

        SET @mensaje = 'Ocurrio un Error: ' + ERROR_MESSAGE() + ' en la línea ' + CONVERT(NVARCHAR(255), ERROR_LINE() ) + '.'
		print  @mensaje
        Rollback TRAN Tadd

    End Catch

END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>ps_ActualizarCorreoElectronicoEntidad</NAME>
<ID>52</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE PROCEDURE %procname%
---EMEM---------

    @idEntidad AS BIGINT,
    @Correo AS NVARCHAR(100)

AS
BEGIN
DECLARE @mensaje AS VARCHAR(100);
    SET NOCOUNT ON;
    Begin Tran Tadd

    Begin Try

	UPDATE tEntidad
    set CORREO_ELECTRONICO=@Correo

     where idEntidad=@idEntidad

     SET @mensaje = 'Se realizo correctamente la actualización del correo electronico'

	 print  @mensaje
        COMMIT TRAN Tadd



    End try
    Begin Catch

        SET @mensaje = 'Ocurrio un Error: ' + ERROR_MESSAGE() + ' en la línea ' + CONVERT(NVARCHAR(255), ERROR_LINE() ) + '.'
		print  @mensaje
        Rollback TRAN Tadd

    End Catch

END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>ps_obtenerFuncionarioRegistroCertificadoTramiteBajaFuncionario</NAME>
<ID>53</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE PROCEDURE %procname%

  ---*******************EMAM*****************
  @idEntidad int
  as

  begin
  print 'Datos de Sujeto Obligado';
  select 'Entidad' as tablaEntidad, [idEntidad]
      ,[SUJETO_OBLIGADO]
      ,[TIPO_EMPRESA]
      ,[OTRO_TIPO_EMPRESA]
      ,[NIT]
      ,[CLAVE_TIPO_SUJETO_OBLIGADO]
      ,[OTRO_TIPO_SO]
      ,[NOMBRE_REPRESENTANTE]
      ,[OFCEN_DEPARTAMENTO]
      ,[OFCEN_CIUDAD_LOCALIDAD]
      ,[OFCEN_ZONA]
      ,[OFCEN_DIRECCION]
      ,[OFCEN_TELEFONO]
      ,[CORREO_ELECTRONICO]
      ,[OBSERVACIONES]
      ,[idActividadEconomica]
      ,[idCiudad]
      ,[CODIGO_VERIFICADOR]
      ,[ESTADO_IMPRESION]
      ,[ESTADO]
      ,[nusuario]
  FROM [tEntidad]

  where idEntidad =@idEntidad;
  print 'Datos de los funcionarios'
  SELECT 'Funcionario' as tablaFuncionario, [idFuncionario]
      ,[PN_NOMBRE]
      ,[PN_PATERNO]
      ,[PN_MATERNO]
      ,[PN_CASADA]
      ,[PN_DOCUMENTO]
      ,[PN_TAB_CIUDAD]
      ,[PN_TAB_PAIS_NACIONALIDAD]
      ,[PN_FECHA_NACIMIENTO]
      ,[PN_CARGO]
      ,[CM_DIRECCION]
      ,[CM_TELEFONO]
      ,[CM_INTERNO]
      ,[CM_CELULAR]
      ,[CORREO_ELECTRONICO]
      ,[OBSERVACIONES]
      ,[idEntidad]
      ,[idPais]
      ,[TIPO_FUNCIONARIO]
      ,[Observacion_subsanada]
      ,[Motivo_o_Causal]
  FROM [tFuncionario]

  where idEntidad=@idEntidad;
  print 'Datos del registro requisito';
  SELECT 'Registro_Requisito' as tablaRegistroRequisito, [idRegistro_Requisito]
      ,[idEntidad]
      ,[idParam]
      ,[idFuncionario]
      ,[idTramite]
      ,[fecha_registro]
      ,[ESTADO]
      ,[nro_documento]
      ,[fecha_documento]
      ,[imagen]
      ,[Secuencia]
      ,[Estado_DU]
  FROM [REGISTRO_REQUISITO]

  where idEntidad=@idEntidad;

  print 'Datos del tramite por entidad';
  SELECT 'Tramite' as tablaTramite,[idTramite_Secuencia]
      ,[idTramite]
      ,[idEntidad]
      ,[Estado_Tramite]
      ,[Observacion_subsanada]
      ,[Secuencia]
      ,[Estado_DU]
  FROM [tTramite]
  where idEntidad=@idEntidad;

  print 'Datos del certificado de impresion por entidad';
  SELECT 'CertificadoImpresion' as tablaCertificadoImpresion,[idCertificadoImpresion]
      ,[idEntidad]
      ,[idTramite]
      ,[imagen]
      ,[seq_Func]
      ,[tipo]
      ,[idLogTrans]
      ,[estado]
  FROM [tCertificadoImpresion]
  where idEntidad=@idEntidad;


  print 'Datos del reemplazo temporal por Entidad';
  SELECT 'ReemplazoTemporalFuncionario' as tablaReemplazoTemporal, [idTemporal]
      ,[idEntidad]
      ,[idFuncionarioFR]
      ,[idFuncionarioAC]
      ,[FechaInicio]
      ,[FechaFin]
      ,[idLogTrans]
  FROM [tReemplazoTemporal]

  where idEntidad=@idEntidad;

  print 'BajaFuncionario';
  SELECT 'BajaFuncionario' as tablaBajaFuncionario,[idBajaFuncionario]
      ,[idFuncionarioNuevo]
      ,[idFuncionarioAnterior]
      ,[idEntidad]
      ,[idTramiteAnterior]
      ,[idTramiteNuevo]
      ,[fecha_registro]
      ,[fecha_aprobacion_juridica]
      ,[fecha_archivado]
      ,[TipoBaja]
      ,[idLogTrans]
      ,[Estado]
  FROM [tBajaFuncionario]

  where idEntidad=@idEntidad

  end</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>ps_ActualizarNombreSujetoObligado</NAME>
<ID>54</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE PROCEDURE %procname%
---EMEM---------

    @idEntidad AS BIGINT,
    @SujetoObligado AS NVARCHAR(100)

AS
BEGIN
DECLARE @mensaje AS VARCHAR(100);
    SET NOCOUNT ON;
    Begin Tran Tadd

    Begin Try

	UPDATE tEntidad
    set SUJETO_OBLIGADO=@SujetoObligado

     where idEntidad=@idEntidad

     SET @mensaje = 'Se realizo correctamente la actualización del nombre del sujeto obligado'

	 print  @mensaje
        COMMIT TRAN Tadd



    End try
    Begin Catch

        SET @mensaje = 'Ocurrio un Error: ' + ERROR_MESSAGE() + ' en la línea ' + CONVERT(NVARCHAR(255), ERROR_LINE() ) + '.'
		print  @mensaje
        Rollback TRAN Tadd

    End Catch

END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>ver_analista_cumplimiento</NAME>
<ID>55</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create procedure %procname%
@Unidad int
as
begin
select f.PN_NOMBRE,f.PN_PATERNO,f.PN_MATERNO,f.PN_CASADA,f.PN_DOCUMENTO,c.Descripcion CIUDAD,
P.nombre NACIONALIDAD, F.PN_FECHA_NACIMIENTO,F.PN_CARGO,F.CM_TELEFONO,f.CM_INTERNO,f.CM_CELULAR,f.OBSERVACIONES
from tFuncionario f,tCiudad c,tPais P
where f.TIPO_FUNCIONARIO='AC' and f.idEntidad=@Unidad
and f.PN_TAB_CIUDAD=c.idCiudad
AND F.idPais=P.idPais
end</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>ver_entidad</NAME>
<ID>56</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE procedure %procname%
@Unidad int
as
begin
select e.SUJETO_OBLIGADO,e.NIT,ae.nombre TIPO_SUJETO_OBLIGADO,e.OTRO_TIPO_SO,e.NOMBRE_REPRESENTANTE,c.Descripcion CIUDAD,
E.OFCEN_ZONA,e.OFCEN_DIRECCION,e.OFCEN_TELEFONO,e.OBSERVACIONES,e.CODIGO_VERIFICADOR
from tEntidad e, tActividadEconomica ae,tCiudad c
where e.idActividadEconomica=ae.idActividadEconomica
and e.idCiudad=c.idCiudad
and e.idEntidad= @unidad
end</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>ver_funcionario_responsable</NAME>
<ID>57</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create procedure %procname%
@Unidad int
as
begin
select f.PN_NOMBRE,f.PN_PATERNO,f.PN_MATERNO,f.PN_CASADA,f.PN_DOCUMENTO,c.Descripcion CIUDAD,
P.nombre NACIONALIDAD, F.PN_FECHA_NACIMIENTO,F.PN_CARGO,F.CM_TELEFONO,f.CM_INTERNO,f.CM_CELULAR,f.OBSERVACIONES
from tFuncionario f,tCiudad c,tPais P
where f.TIPO_FUNCIONARIO='FR' and f.idEntidad=@Unidad
and f.PN_TAB_CIUDAD=c.idCiudad
AND F.idPais=P.idPais
end</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>sp_upgraddiagrams</NAME>
<ID>58</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE PROCEDURE %procname%
	AS
	BEGIN
		IF OBJECT_ID(N'dbo.sysdiagrams') IS NOT NULL
			return 0;

		CREATE TABLE dbo.sysdiagrams
		(
			name sysname NOT NULL,
			principal_id int NOT NULL,	-- we may change it to varbinary(85)
			diagram_id int PRIMARY KEY IDENTITY,
			version int,

			definition varbinary(max)
			CONSTRAINT UK_principal_name UNIQUE
			(
				principal_id,
				name
			)
		);


		/* Add this if we need to have some form of extended properties for diagrams */
		/*
		IF OBJECT_ID(N'dbo.sysdiagram_properties') IS NULL
		BEGIN
			CREATE TABLE dbo.sysdiagram_properties
			(
				diagram_id int,
				name sysname,
				value varbinary(max) NOT NULL
			)
		END
		*/

		IF OBJECT_ID(N'dbo.dtproperties') IS NOT NULL
		begin
			insert into dbo.sysdiagrams
			(
				[name],
				[principal_id],
				[version],
				[definition]
			)
			select
				convert(sysname, dgnm.[uvalue]),
				DATABASE_PRINCIPAL_ID(N'dbo'),			-- will change to the sid of sa
				0,							-- zero for old format, dgdef.[version],
				dgdef.[lvalue]
			from dbo.[dtproperties] dgnm
				inner join dbo.[dtproperties] dggd on dggd.[property] = 'DtgSchemaGUID' and dggd.[objectid] = dgnm.[objectid]
				inner join dbo.[dtproperties] dgdef on dgdef.[property] = 'DtgSchemaDATA' and dgdef.[objectid] = dgnm.[objectid]

			where dgnm.[property] = 'DtgSchemaNAME' and dggd.[uvalue] like N'_EA3E6268-D998-11CE-9454-00AA00A3F36E_'
			return 2;
		end
		return 1;
	END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>sp_helpdiagrams</NAME>
<ID>59</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE PROCEDURE %procname%
	(
		@diagramname sysname = NULL,
		@owner_id int = NULL
	)
	WITH EXECUTE AS N'dbo'
	AS
	BEGIN
		DECLARE @user sysname
		DECLARE @dboLogin bit
		EXECUTE AS CALLER;
			SET @user = USER_NAME();
			SET @dboLogin = CONVERT(bit,IS_MEMBER('db_owner'));
		REVERT;
		SELECT
			[Database] = DB_NAME(),
			[Name] = name,
			[ID] = diagram_id,
			[Owner] = USER_NAME(principal_id),
			[OwnerID] = principal_id
		FROM
			sysdiagrams
		WHERE
			(@dboLogin = 1 OR USER_NAME(principal_id) = @user) AND
			(@diagramname IS NULL OR name = @diagramname) AND
			(@owner_id IS NULL OR principal_id = @owner_id)
		ORDER BY
			4, 5, 1
	END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>sp_helpdiagramdefinition</NAME>
<ID>60</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE PROCEDURE %procname%
	(
		@diagramname 	sysname,
		@owner_id	int	= null
	)
	WITH EXECUTE AS N'dbo'
	AS
	BEGIN
		set nocount on

		declare @theId 		int
		declare @IsDbo 		int
		declare @DiagId		int
		declare @UIDFound	int

		if(@diagramname is null)
		begin
			RAISERROR (N'E_INVALIDARG', 16, 1);
			return -1
		end

		execute as caller;
		select @theId = DATABASE_PRINCIPAL_ID();
		select @IsDbo = IS_MEMBER(N'db_owner');
		if(@owner_id is null)
			select @owner_id = @theId;
		revert;

		select @DiagId = diagram_id, @UIDFound = principal_id from dbo.sysdiagrams where principal_id = @owner_id and name = @diagramname;
		if(@DiagId IS NULL or (@IsDbo = 0 and @UIDFound &lt;&gt; @theId ))
		begin
			RAISERROR ('Diagram does not exist or you do not have permission.', 16, 1);
			return -3
		end

		select version, definition FROM dbo.sysdiagrams where diagram_id = @DiagId ;
		return 0
	END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>sp_creatediagram</NAME>
<ID>61</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE PROCEDURE %procname%
	(
		@diagramname 	sysname,
		@owner_id		int	= null,
		@version 		int,
		@definition 	varbinary(max)
	)
	WITH EXECUTE AS 'dbo'
	AS
	BEGIN
		set nocount on

		declare @theId int
		declare @retval int
		declare @IsDbo	int
		declare @userName sysname
		if(@version is null or @diagramname is null)
		begin
			RAISERROR (N'E_INVALIDARG', 16, 1);
			return -1
		end

		execute as caller;
		select @theId = DATABASE_PRINCIPAL_ID();
		select @IsDbo = IS_MEMBER(N'db_owner');
		revert;

		if @owner_id is null
		begin
			select @owner_id = @theId;
		end
		else
		begin
			if @theId &lt;&gt; @owner_id
			begin
				if @IsDbo = 0
				begin
					RAISERROR (N'E_INVALIDARG', 16, 1);
					return -1
				end
				select @theId = @owner_id
			end
		end
		-- next 2 line only for test, will be removed after define name unique
		if EXISTS(select diagram_id from dbo.sysdiagrams where principal_id = @theId and name = @diagramname)
		begin
			RAISERROR ('The name is already used.', 16, 1);
			return -2
		end

		insert into dbo.sysdiagrams(name, principal_id , version, definition)
				VALUES(@diagramname, @theId, @version, @definition) ;

		select @retval = @@IDENTITY
		return @retval
	END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>sp_renamediagram</NAME>
<ID>62</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE PROCEDURE %procname%
	(
		@diagramname 		sysname,
		@owner_id		int	= null,
		@new_diagramname	sysname

	)
	WITH EXECUTE AS 'dbo'
	AS
	BEGIN
		set nocount on
		declare @theId 			int
		declare @IsDbo 			int

		declare @UIDFound 		int
		declare @DiagId			int
		declare @DiagIdTarg		int
		declare @u_name			sysname
		if((@diagramname is null) or (@new_diagramname is null))
		begin
			RAISERROR ('Invalid value', 16, 1);
			return -1
		end

		EXECUTE AS CALLER;
		select @theId = DATABASE_PRINCIPAL_ID();
		select @IsDbo = IS_MEMBER(N'db_owner');
		if(@owner_id is null)
			select @owner_id = @theId;
		REVERT;

		select @u_name = USER_NAME(@owner_id)

		select @DiagId = diagram_id, @UIDFound = principal_id from dbo.sysdiagrams where principal_id = @owner_id and name = @diagramname
		if(@DiagId IS NULL or (@IsDbo = 0 and @UIDFound &lt;&gt; @theId))
		begin
			RAISERROR ('Diagram does not exist or you do not have permission.', 16, 1)
			return -3
		end

		-- if((@u_name is not null) and (@new_diagramname = @diagramname))	-- nothing will change
		--	return 0;

		if(@u_name is null)
			select @DiagIdTarg = diagram_id from dbo.sysdiagrams where principal_id = @theId and name = @new_diagramname
		else
			select @DiagIdTarg = diagram_id from dbo.sysdiagrams where principal_id = @owner_id and name = @new_diagramname

		if((@DiagIdTarg is not null) and  @DiagId &lt;&gt; @DiagIdTarg)
		begin
			RAISERROR ('The name is already used.', 16, 1);
			return -2
		end

		if(@u_name is null)
			update dbo.sysdiagrams set [name] = @new_diagramname, principal_id = @theId where diagram_id = @DiagId
		else
			update dbo.sysdiagrams set [name] = @new_diagramname where diagram_id = @DiagId
		return 0
	END</CODE>
</PROCEDURE>
</PROCEDURES>
<VIEWS>
<VIEW>
<NAME>v_tramiteRegistroCertificadoSoloArchivo</NAME>
<ID>63</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname%
as(
select a.idObservacionTramite,a.idTramite,a.Observacion,a.Fecha_Archivado,a.idLogTrans, t.idEntidad,t.Estado_Tramite
 from tObservacionTramite_Archivo a
 inner join tTramite t
 on a.idTramite=t.idTramite

where a.idtramite in (
1420,
1538,
1550,
1592,
1679,
1899)

and  t.Estado_Tramite='TE')</CODE>
</VIEW>
<VIEW>
<NAME>view_listar_tramitesANTERIOR</NAME>
<ID>64</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW [dbo].[view_listar_tramites]
AS
SELECT DISTINCT
                      tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'EN MESA DE ENTRADA' estado,
                      CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          (SELECT     max(u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                            FROM          Users u
                            WHERE      u.usuarioRol = 'MesaEntrada' AND estado = 'AC') AS usuario
FROM         tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND NOT EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.idTramite = rr.idTramite AND
                      rr.Secuencia = tr.Secuencia
UNION
SELECT DISTINCT
                      tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'OBSERVADO' estado,
                      CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                       ' ' AS usuario
FROM         tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr
                            WHERE      rr.idTramite = tr.idTramite AND rr.ESTADO = 'OB') AND tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia
UNION
SELECT DISTINCT
                      tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,
                      ae.nombre, 'OBSERVADO' estado, CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                       ' ' AS usuario
FROM         tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'OB' AND TR.Estado_DU = 'D' AND
                      EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr
                            WHERE      rr.idTramite = tr.idTramite AND rr.ESTADO = 'OB') AND tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia
UNION
SELECT DISTINCT
                      tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'EN LEGAL' estado,
                      CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          (SELECT     (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno) AS usuario
                            FROM          Users u
                            WHERE      u.usuarioRol = 'legal' AND estado = 'AC' AND EXISTS
                                                       (SELECT DISTINCT lrr.nusuario
                                                         FROM          dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                           dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                                                         WHERE      (rr1.idTramite = rr.idTramite) AND (lrr.Operacion = 'OB'))) AS usuario
FROM         tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AJ' AND
                      NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr
                            WHERE      rr.idTramite = tr.idTramite AND rr.ESTADO IN ('OB')) AND tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia
UNION
SELECT DISTINCT
                      tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,
                      ae.nombre, 'EN LEGAL' estado, CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          (SELECT     (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                            FROM          Users u
                            WHERE      u.usuarioRol = 'legal' AND estado = 'AC' AND EXISTS
                                                       (SELECT DISTINCT lrr.nusuario
                                                         FROM          dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                                                dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                                                         WHERE      (rr1.idTramite = rr.idTramite) AND (lrr.Operacion = 'OB'))) AS usuario
FROM         tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'OB' AND
                      NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr
                            WHERE      rr.idTramite = tr.idTramite AND rr.ESTADO IN ('OB')) AND tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia
UNION
SELECT DISTINCT
                      tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'EN SISTEMAS' estado,
                      CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          (SELECT     (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                            FROM          Users u
                            WHERE      u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM         tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AP' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia
UNION
SELECT DISTINCT
                      tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,
                      ae.nombre, 'EN SISTEMAS' estado, CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          (SELECT     (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                            FROM          Users u
                            WHERE      u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM         tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'AP' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia
UNION
SELECT DISTINCT
                      tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'EN ARCHIVOS' estado,
                      CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          (SELECT     (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                            FROM          Users u
                            WHERE      u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM         tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AR' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia
UNION
SELECT DISTINCT
                      tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,
                      ae.nombre, 'EN ARCHIVOS' estado, CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          (SELECT     (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                            FROM          Users u
                            WHERE      u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM         tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'AR' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia
UNION
SELECT DISTINCT
                      tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'TERMINADO' estado,
                      CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                       ' ' AS usuario
FROM         tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'TE' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia
UNION
SELECT DISTINCT
                      tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,
                      ae.nombre, 'TERMINADO' estado, CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                       ' ' AS usuario
FROM         tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'TE' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia</CODE>
</VIEW>
<VIEW>
<NAME>view_listar_tramites</NAME>
<ID>65</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
(
SELECT DISTINCT
                 tr.idTramite_Secuencia,CONVERT(nvarchar, tr.idTramite) nro_tramite,rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,  ae.nombre,    'EN MESA DE ENTRADA' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END
																THEN
							                                    CASE WHEN
																-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
                                                                  WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
																  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE

											  , cast('' as varchar(302)) as usuario
FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia

WHERE  (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'AJ') AND EXISTS
                      (SELECT 1 AS Expr1
                       FROM      dbo.tTramite AS t
                       WHERE   (idEntidad = e.idEntidad)) AND (NOT EXISTS
                      (SELECT 1 AS sExpr1
                       FROM      dbo.tObservacionMesa_Entrada
                       WHERE   (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite)))
--						order by rr.idTramite desc


union

SELECT DISTINCT
                tr.idTramite_Secuencia,CONVERT(nvarchar, tr.idTramite) nro_tramite,rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,  ae.nombre,    'OBSERVADO' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END
																THEN
							                                    CASE WHEN
																-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
                                                                  WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
																  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE

											  , cast('' as varchar(302)) as usuario


FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr
                            WHERE      rr.idTramite = tr.idTramite AND rr.ESTADO = 'OB') AND tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia



union

SELECT DISTINCT
                tr.idTramite_Secuencia,CONVERT(nvarchar, tr.idTramite) nro_tramite,rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,  ae.nombre,    'OBSERVADO' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END
																THEN
							                                    CASE WHEN
																-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
                                                                  WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
																  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE

											   , cast('' as varchar(302)) as usuario


FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'OB' AND TR.Estado_DU = 'D' AND
                      EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr
                            WHERE      rr.idTramite = tr.idTramite AND rr.ESTADO = 'OB') AND tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia


union
SELECT DISTINCT
                tr.idTramite_Secuencia,CONVERT(nvarchar, tr.idTramite) nro_tramite,rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,  ae.nombre,    'EN LEGAL' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END
																THEN
							                                    CASE WHEN
																-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
                                                                  WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
																  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                          WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE
	   , cast('' as varchar(302)) as usuario
FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AJ' AND
                      NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr
                            WHERE      rr.idTramite = tr.idTramite AND rr.ESTADO IN ('OB')) AND tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia


union


SELECT DISTINCT
                tr.idTramite_Secuencia,CONVERT(nvarchar, tr.idTramite) nro_tramite,rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,  ae.nombre,    'EN LEGAL' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END
																THEN
							                                    CASE WHEN
																-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
                                                                  WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
																  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE
	  , cast('' as varchar(302)) as usuario
FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'OB' AND
                      NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr
                            WHERE      rr.idTramite = tr.idTramite AND rr.ESTADO IN ('OB')) AND tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia

union

SELECT DISTINCT
              tr.idTramite_Secuencia,CONVERT(nvarchar, tr.idTramite) nro_tramite,rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,  ae.nombre,     'EN SISTEMAS' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END
																THEN
							                                    CASE WHEN
																-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
                                                                  WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
																  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE
	   , cast('' as varchar(302)) as usuario
FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia

WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM         tObservacionMesa_Entrada  te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AP' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia

union

SELECT DISTINCT
                 tr.idTramite_Secuencia,CONVERT(nvarchar, tr.idTramite) nro_tramite,rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,  ae.nombre,    'EN SISTEMAS' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END
																THEN
							                                    CASE WHEN
																-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
                                                                  WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
																  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE
	  , cast('' as varchar(302)) as usuario
FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada  te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'AP' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia

UNION
SELECT DISTINCT
                tr.idTramite_Secuencia,CONVERT(nvarchar, tr.idTramite) nro_tramite,rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,  ae.nombre,     'EN ARCHIVO' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END
																THEN
							                                    CASE WHEN
																-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
                                                                  WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE
  , cast('' as varchar(302)) as usuario

FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AR' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia

UNION
SELECT DISTINCT
                 tr.idTramite_Secuencia,CONVERT(nvarchar, tr.idTramite) nro_tramite,rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,  ae.nombre,    'EN ARCHIVO' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END
																THEN
							                                    CASE WHEN
																-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
                                                                WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
																  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE
	  , cast('' as varchar(302)) as usuario

FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'AR' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia
UNION

SELECT DISTINCT
              tr.idTramite_Secuencia,CONVERT(nvarchar, tr.idTramite) nro_tramite,rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,  ae.nombre,    'TERMINADO' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END
																THEN
							                                    CASE WHEN
									-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
                                                                  WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
																  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE
	  , cast('' as varchar(302)) as usuario
FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'TE' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia
UNION
SELECT DISTINCT
                tr.idTramite_Secuencia,CONVERT(nvarchar, tr.idTramite) nro_tramite,rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,  ae.nombre,     'TERMINADO' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
												and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END
																THEN
							                                    CASE WHEN
																-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
                                                                  WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
																  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE
	  , cast('' as varchar(302)) as usuario
FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'TE' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia



)</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito</NAME>
<ID>66</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname%
as
SELECT DISTINCT
                  tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO,
                  e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, rr.fecha_registro, e.nusuario, 'PENDIENTE' AS ESTADO,
                      (SELECT DISTINCT lrr.nusuario
                       FROM      dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                 dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                       WHERE   (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
				CASE WHEN
                      (SELECT MAX(idParam)
                       FROM      REGISTRO_REQUISITO rr1
                       WHERE   rr1.idTramite = rr.idTramite
					   AND (rr1.Secuencia = rr.Secuencia)) = CASE WHEN
																	/*(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END --9*/
																	--se aumentó para notarios
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0 THEN 11
																	--ELSE
																	WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'NOTARIOS' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0 THEN 15
																	ELSE 9 END
					   THEN CASE WHEN
                                  (SELECT rr1.idParam
                                   FROM      REGISTRO_REQUISITO rr1
                                   WHERE   rr1.idTramite = rr.idTramite
					               --AND rr1.idParam = 5
					               --AND (rr1.Secuencia = rr.Secuencia)) = 5
								   AND rr1.idParam = 4
					               AND (rr1.Secuencia = rr.Secuencia)) = 4
					               THEN 'REGISTRO DE SUJETO OBLIGADO Y FR'
					               ELSE
					                 CASE WHEN
                                        (SELECT DISTINCT (1)
                                         FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                         WHERE   rr1.idTramite = rr.idTramite
					                     AND rr1.idFuncionario = t1.idFuncionario
					                     AND t1.TIPO_FUNCIONARIO = 'FR'
					                     AND (rr1.Secuencia = rr.Secuencia)) = 1 THEN
					                      CASE WHEN TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
				-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END
				   end   ELSE CASE WHEN
                               (SELECT COUNT(te.idEntidad)
                                FROM      tEntidad AS te
                                 WHERE   te.idEntidad IN
                                               (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'
											  ELSE
											  'REGISTRO DE SUJETO OBLIGADO' END
					 END AS TIPO_TRAMITE
FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
				  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia



WHERE  (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'AJ') AND (tr.Estado_Tramite &lt;&gt; 'AP') AND (tr.Estado_Tramite &lt;&gt; 'TE') AND (tr.Estado_Tramite &lt;&gt; 'AR') AND (tr.Estado_Tramite &lt;&gt; 'AH') AND
                  EXISTS
                      (SELECT 1 AS Expr1
                       FROM      dbo.tTramite AS t
                       WHERE   (idEntidad = e.idEntidad)) AND EXISTS
                      (SELECT 1 AS Expr1
                       FROM      dbo.tObservacionMesa_Entrada
                       WHERE   (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisitoME</NAME>
<ID>67</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                  e.idEntidad, ae.idActividadEconomica, ae.nombre, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA,
                  e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, rr.fecha_registro, e.nusuario, 'PENDIENTE' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	/*(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END*/
																	--se aumentó para notarios
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0 THEN 11
																	--ELSE
																	WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'NOTARIOS' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0 THEN 15
																	ELSE 9 END
																THEN
							                                    CASE WHEN
																-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
																  WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 4) = 4 THEN
																  -- Y ADEMAS TIENE EL 4  ENTONCES ES REGISTRO DE SO Y FR  todos los casos tienen NIT
                                                                  --WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
																  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
				    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11(casa de juegos) ni 25(notarios)
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE
FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia

WHERE  (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'AJ') AND EXISTS
                      (SELECT 1 AS Expr1
                       FROM      dbo.tTramite AS t
                       WHERE   (idEntidad = e.idEntidad)) AND (NOT EXISTS
                      (SELECT 1 AS sExpr1
                       FROM      dbo.tObservacionMesa_Entrada
                       WHERE   (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite)))
--						order by rr.idTramite desc</CODE>
</VIEW>
<VIEW>
<NAME>v_TipoSujetosObligadosCertificado</NAME>
<ID>68</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
(
SELECT        e.idEntidad, e.idActividadEconomica, ac.nombre, CAST(MAX(l.Fecha) AS date) AS Fecha
FROM            dbo.tEntidad AS e INNER JOIN
                dbo.tActividadEconomica AS ac ON e.idActividadEconomica = ac.idActividadEconomica INNER JOIN
                dbo.tTramite AS t ON e.idEntidad = t.idEntidad INNER JOIN
                dbo.tCertificadoImpresion AS c ON t.idTramite = c.idTramite INNER JOIN
                dbo.LogsTrans AS l ON c.idLogTrans = l.idLogTrans
WHERE        (c.tipo = 'SO' and t.Estado_Tramite='TE')
GROUP BY e.idEntidad, e.idActividadEconomica, ac.nombre

except

SELECT        e.idEntidad, e.idActividadEconomica, ac.nombre, CAST(MAX(l.Fecha) AS date) AS Fecha
FROM            dbo.tEntidad AS e INNER JOIN
                dbo.tActividadEconomica AS ac ON e.idActividadEconomica = ac.idActividadEconomica
				INNER JOIN
                dbo.tTramite AS t ON e.idEntidad = t.idEntidad
				INNER JOIN
                dbo.tCertificadoImpresion AS c ON t.idTramite = c.idTramite
				INNER JOIN
                dbo.LogsTrans AS l ON c.idLogTrans = l.idLogTrans
				inner join tTramiteClasificacion tc
				on tc.idTramite=c.idTramite
WHERE        (c.tipo = 'SO' and t.Estado_Tramite='TE')
GROUP BY e.idEntidad, e.idActividadEconomica, ac.nombre


)</CODE>
</VIEW>
<VIEW>
<NAME>v_NombreSujetos_ObligadosConCertificado</NAME>
<ID>69</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname%
as

select distinct c.nombre as tipoSujeto,a.SUJETO_OBLIGADO,

 tc.tipo,max(lt.Fecha) as fecha

from tentidad a
inner join tTramite t
on a.idEntidad=t.idEntidad
inner join tCertificadoImpresion tc
on tc.idEntidad=a.idEntidad
and tc.idTramite=t.idTramite

inner join LogsTrans lt
on lt.idLogTrans=tc.idLogTrans

--inner join REGISTRO_REQUISITO r
--on  a.idEntidad=r.idEntidad
--and r.idTramite=t.idTramite
--inner join tFuncionario b
--on a.idEntidad=b.idEntidad

inner join tActividadEconomica c
on a.idActividadEconomica=c.idActividadEconomica

where a.ESTADO='AC'
and tc.tipo='SO'
--and b.TIPO_FUNCIONARIO not in ('BC','BA')
--and r.idFuncionario is null
group by c.nombre, tc.tipo,a.SUJETO_OBLIGADO</CODE>
</VIEW>
<VIEW>
<NAME>v_sujetosObligadosFuncionariosResponsablesContramiteTerminado</NAME>
<ID>70</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
select distinct  c.nombre as tipoActividadSujetoObligado,a.SUJETO_OBLIGADO as nombreSujetoObligado,
a.TIPO_EMPRESA as tipoEmpresa, a.nit as Nit, a.NOMBRE_REPRESENTANTE as RepresentanteLegal, a.OFCEN_CIUDAD_LOCALIDAD as oficinaLocalidad,a.OFCEN_ZONA as Zona,a.OFCEN_DIRECCION as Direccion,
a.OFCEN_TELEFONO as oficinaTelefono, ci.Descripcion as ciudadSujetoObligado,
a.CORREO_ELECTRONICO  as correo_sujeto_obligado,
a.ofcen_telefono as telefonoSujetoObligado, b.PN_NOMBRE as nombreFuncionario, b.PN_PATERNO as PrimerApellido, b.PN_MATERNO as SegundoApellido,
--(b.PN_NOMBRE + ' ' +b.PN_PATERNO+' ' + b.PN_MATERNO) as nombre_completoFuncionario ,
b.TIPO_FUNCIONARIO as tipoFuncionario,
b.PN_DOCUMENTO as numeroDocumento,cii.Descripcion as CiudadFuncionario,p.nombre as Nacionalidad,b.PN_FECHA_NACIMIENTO as fechaNacimiento,b.PN_CARGO as Cargo,b.CM_DIRECCION as DireccionFuncionario,
b.CORREO_ELECTRONICO as correo_electronico_funcionarios
,b.CM_CELULAR as celularFuncionario,b.CM_TELEFONO as telefonoFuncionario,b.CM_INTERNO as internoFuncionario,
p.nombre as Pais
from tentidad a
inner join tFuncionario b
on a.idEntidad=b.idEntidad

inner join tActividadEconomica c
on a.idActividadEconomica=c.idActividadEconomica

inner join tCiudad ci
on ci.idCiudad=a.idCiudad
inner join tCiudad cii
on cii.idCiudad=b.PN_TAB_CIUDAD
inner join tPais p
on p.idPais=b.PN_TAB_PAIS_NACIONALIDAD
and p.idPais=b.idPais

inner join tTramite t
on t.idEntidad = a.idEntidad
where a.ESTADO='AC'
and b.TIPO_FUNCIONARIO  in ('FR')
and t.Estado_Tramite='TE'
--order by c.nombre</CODE>
</VIEW>
<VIEW>
<NAME>vw_dias_tramites</NAME>
<ID>71</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
select e.idEntidad, te.nombre,  e.SUJETO_OBLIGADO,max(l.fecha) as fecha, DATEDIFF(DD,max(l.fecha),'2018-06-05 00:00:00.000')   as dias_pasaron,  c.tipo, max(t.idTramite ) as idTrammite from tEntidad e
inner join tTramite t
on e.idEntidad=t.idEntidad
inner join tActividadEconomica te
on te.idActividadEconomica=e.idActividadEconomica
inner join tCertificadoImpresion c
on c.idTramite=t.idTramite
and c.idEntidad=t.idEntidad
inner join LogsTrans l
on l.idLogTrans=c.idLogTrans
where e.ESTADO='AC'
group by e.idEntidad, te.nombre,  e.SUJETO_OBLIGADO, c.tipo</CODE>
</VIEW>
<VIEW>
<NAME>vw_TrazaRenovado</NAME>
<ID>72</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
select t.idEntidad, t.Estado_Tramite, cc.Tipo_Funcionario,t.idTramite,l.Fecha as fechaCertificado, cc.fechaRegistro as fechaInicioRenovacion from
tTramite t inner join
[dbo].[tTramiteClasificacion] cc
on t.idTramite = cc.idTramite
inner join tEntidad e
on t.idEntidad=e.idEntidad
left join tCertificadoImpresion c
on c.idTramite=t.idTramite
and c.idEntidad=t.idEntidad
left  join LogsTrans l
on l.idLogTrans=c.idLogTrans
where e.ESTADO='AC'</CODE>
</VIEW>
<VIEW>
<NAME>vw_dias_tramitesEntidad</NAME>
<ID>73</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
select e.idEntidad, te.nombre, e.SUJETO_OBLIGADO,max(l.fecha) as fecha, DATEDIFF(DD,max(l.fecha),'2018-05-01 00:00:00.000')   as dias_pasaron,  c.tipo, t.idTramite  from tEntidad e
inner join tTramite t
on e.idEntidad=t.idEntidad
inner join tActividadEconomica te
on te.idActividadEconomica=e.idActividadEconomica
inner join tCertificadoImpresion c
on c.idTramite=t.idTramite
and c.idEntidad=t.idEntidad
inner join LogsTrans l
on l.idLogTrans=c.idLogTrans
where e.ESTADO='AC'
group by e.idEntidad,te.nombre,  e.SUJETO_OBLIGADO, c.tipo,t.idtramite</CODE>
</VIEW>
<VIEW>
<NAME>view_listar_documentos_pdf</NAME>
<ID>74</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
select r.idRegistro_Requisito,p.DESCRIPCION,r.idEntidad,r.idTramite,r.Secuencia,r.idParam from REGISTRO_REQUISITO r,PARAM_REQUISITOS_SO p
where r.idParam=p.idParam</CODE>
</VIEW>
<VIEW>
<NAME>view_listar_tiempos_registro</NAME>
<ID>75</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname% AS

SELECT  [idTramite_Secuencia]
      ,[idTramite]
      ,[Secuencia]
      ,[SUJETO_OBLIGADO]
      ,[NIT]
      ,[TIPO_SUJETO_OBLIGADO]
      ,[TIPO_TRAMITE]
      ,[fecha_registro]
      ,[fecha_recepcion]
	  ,DATEDIFF(dd,[fecha_registro],[fecha_recepcion]) AS tdias1
      ,[fecha_ultimaObservacion]
      ,[fecha_ultimaCorreccion]
	  ,  DATEDIFF(dd,[fecha_ultimaObservacion],[fecha_ultimaCorreccion])  AS tdias2
      ,[fecha_aprobacion_legal],
	  CASE
	       WHEN fecha_aprobacion_legal IS NOT NULL AND [fecha_ultimaCorreccion] IS NOT NULL
	       THEN DATEDIFF(dd,[fecha_ultimaCorreccion],[fecha_aprobacion_legal])
		   WHEN fecha_aprobacion_legal IS NOT NULL
		   THEN DATEDIFF(dd,fecha_recepcion,fecha_aprobacion_legal)
		   ELSE
		   NULL

	 END AS tdias3


      ,[fecha_aprobacion_sistemas],
	  DATEDIFF(dd,fecha_aprobacion_legal,fecha_aprobacion_sistemas) AS tdias4


      ,[fecha_archivado]

	  ,DATEDIFF(dd,fecha_aprobacion_sistemas,fecha_archivado) AS tdias5
      ,[ESTADO_TRAMITE]
FROM v_listar_tiempos_registro_sub</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_procesados_archivo</NAME>
<ID>76</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
SELECT distinct
v.idTramite_Secuencia,

CASE WHEN V.Estado_DU = 'D' THEN
(CONVERT(nvarchar, V.idTramite) + '-' + CONVERT(nvarchar, V.Secuencia))
ELSE
CONVERT(nvarchar, v.idTramite) END nro_tramite,

case when
(    (v.Estado_Tramite = 'TE' AND V.Estado_DU = 'U')
      or
     (v.Estado_Tramite = 'TE' AND V.Estado_DU = 'D' )
)
then (SELECT        max(Fecha_Archivado)
                               FROM            tObservacionTramite_Archivo ota
                               WHERE        ota.idTramite = v.idTramite)
else
NULL end AS fecha_aprobacion,
v.SUJETO_OBLIGADO,v.NIT,v.nombre,

CASE WHEN v.Estado_Tramite IN ('TE') THEN 'ARCHIVADO'
ELSE 'NO PROCESADO' END
AS estado,


v.tipoProceso +' '+ v.TIPO as TIPO_TRAMITE,
'' AS usuario  --TODO no se usa
FROM v_resumen_traza_requisitos v
left join tObservacionMesa_Entrada tbm on v.idTramite = tbm.idTramite
where
v.ESTADO_IMPRESION = 'SI' AND v.estadoEntidad = 'AC' AND tbm.idObservacionMEntrada IS NOT NULL
AND
(
(v.Estado_Tramite = 'AR' AND V.Estado_DU = 'U' )
OR
(v.Estado_Tramite = 'AR' AND V.Estado_DU = 'D' )
OR
( v.Estado_Tramite = 'TE' AND V.Estado_DU = 'U')
OR
(v.Estado_Tramite = 'TE' AND V.Estado_DU = 'D' )
)
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite
LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							   --AND e.idActividadEconomica = ae.idActividadEconomica
							   AND tr.Estado_Tramite = 'AR'
							   --AND tr.idTramite = c.idTramite

and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
--and estado='TE'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
--and estado='TE'
group by idEntidad)))

and rr.estado='AR'

UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'ARCHIVADO' estado,
                         'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
     'NO PROCESADO' estado, 'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, BF.fecha_archivado fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'ARCHIVADO' estado, 'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, 'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, BF.fecha_archivado fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'ARCHIVADO' estado, 'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_procesados_arealegal</NAME>
<ID>77</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname% AS
SELECT distinct
v.idTramite_Secuencia,

CASE WHEN V.Estado_DU = 'D' THEN
(CONVERT(nvarchar, V.idTramite) + '-' + CONVERT(nvarchar, V.Secuencia))
ELSE
CONVERT(nvarchar, v.idTramite) END nro_tramite,

case when
(
(v.Estado_Tramite = 'AP' AND V.Estado_DU = 'U')
or
(v.Estado_Tramite = 'AP' AND V.Estado_DU = 'D')
or
(v.Estado_Tramite = 'AR' AND V.Estado_DU = 'U' )
or
(v.Estado_Tramite = 'AR' AND V.Estado_DU = 'D' )
or
( v.Estado_Tramite = 'TE' AND V.Estado_DU = 'U')
or
(v.Estado_Tramite = 'TE' AND V.Estado_DU = 'D' )

)

then    (SELECT        max(CONVERT(date, o.fecha))
		 FROM            LOG_REGISTRO_REQUISITO o
		 WHERE        o.idRegistro_Requisito = v.idRegistro_Requisito AND Operacion = 'AP')

else
NULL end AS fecha_aprobacion,

v.SUJETO_OBLIGADO,v.NIT,v.nombre,

CASE WHEN v.Estado_Tramite IN ('AP','AR','TE') THEN 'PROCESADO'
ELSE 'NO PROCESADO' END
AS estado,



'' as usuariolegal, -- TODO:  no se usa
v.Observacion_subsanada,v.tipoProceso +' '+ v.TIPO as TIPO_TRAMITE,
'' AS usuario  --TODO no se usa
FROM v_resumen_traza_requisitos v
left join tObservacionMesa_Entrada tbm on v.idTramite = tbm.idTramite
where
v.ESTADO_IMPRESION = 'SI' AND v.estadoEntidad = 'AC' AND tbm.idObservacionMEntrada IS NOT NULL
AND
(
(v.Estado_Tramite = 'AJ' AND V.Estado_DU = 'U' AND v.ESTADO!='OB') --(estado de registro requisito)
OR
(v.Estado_Tramite = 'OB' AND V.Estado_DU = 'D' AND v.ESTADO!='OB')
OR
(v.Estado_Tramite = 'AP' AND V.Estado_DU = 'U')
OR
(v.Estado_Tramite = 'AP' AND V.Estado_DU = 'D')
OR
(v.Estado_Tramite = 'AR' AND V.Estado_DU = 'U' )
OR
(v.Estado_Tramite = 'AR' AND V.Estado_DU = 'D' )
OR
( v.Estado_Tramite = 'TE' AND V.Estado_DU = 'U')
OR
(v.Estado_Tramite = 'TE' AND V.Estado_DU = 'D' )
)
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'legal' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AJ' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AP' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada, 'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'legal' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AJ' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite,
                             (SELECT        bf.fecha_aprobacion_juridica
                               FROM            tBajaFuncionario bf
                               WHERE        bf.idTramiteNuevo = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, '' AS usuarioLegal,
                         '' AS Observacion_subsanada, 'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT  tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite,
(SELECT        bf.fecha_aprobacion_juridica
FROM            tBajaFuncionario bf
WHERE        bf.idTramiteNuevo = tr.idTramite) AS fecha_aprobacion,
e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, '' AS usuarioLegal,
'' AS Observacion_subsanada,
'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite,
' ' AS usuario
FROM   tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE  e.ESTADO_IMPRESION = 'SI'
AND e.ESTADO = 'AC'
AND e.idEntidad = tr.idEntidad
AND EXISTS (SELECT  1
            FROM  tObservacionMesa_Entrada te
             WHERE te.idTramite = tr.idTramite)
			 AND e.idActividadEconomica = ae.idActividadEconomica
			 AND tr.Estado_Tramite = 'TE'
			 AND TR.idTramite = BF.idTramiteNuevo
			 AND bf.idLogTrans = lt.idLogTrans
			 AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT  tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
'NO PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada,
'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite,
(SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
 FROM            Users u
WHERE        u.usuarioRol = 'legal' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AJ' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'
UNION
SELECT tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite,
                             (SELECT        bf.fecha_aprobacion_juridica
                               FROM            tBajaFuncionario bf
                               WHERE        bf.idTramiteNuevo = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, '' AS usuarioLegal,
                         '' AS Observacion_subsanada, 'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM   tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE  e.ESTADO_IMPRESION = 'SI'
AND e.ESTADO = 'AC'
AND e.idEntidad = tr.idEntidad
AND EXISTS (SELECT  1
            FROM  tObservacionMesa_Entrada te
            WHERE te.idTramite = tr.idTramite)
			AND e.idActividadEconomica = ae.idActividadEconomica
			AND tr.Estado_Tramite = 'AR'
			AND TR.idTramite = BF.idTramiteNuevo
			AND bf.idLogTrans = lt.idLogTrans
			AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'
UNION
SELECT tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite,
(SELECT  bf.fecha_aprobacion_juridica
FROM    tBajaFuncionario bf
WHERE  bf.idTramiteNuevo = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, '' AS usuarioLegal,
'' AS Observacion_subsanada, 'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite, ' ' AS usuario
FROM   tEntidad e,
tTramite tr,
tActividadEconomica ae,
tBajaFuncionario BF,
LogsTrans lt
WHERE  e.ESTADO_IMPRESION = 'SI'
AND e.ESTADO = 'AC'
AND e.idEntidad = tr.idEntidad
AND EXISTS (SELECT 1
FROM  tObservacionMesa_Entrada te
 WHERE  te.idTramite = tr.idTramite)
 AND e.idActividadEconomica = ae.idActividadEconomica
 AND tr.Estado_Tramite = 'TE'
 AND TR.idTramite = BF.idTramiteNuevo
 AND bf.idLogTrans = lt.idLogTrans
 AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_procesados_sistemas</NAME>
<ID>78</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname% AS
SELECT distinct
v.idTramite_Secuencia,

CASE WHEN V.Estado_DU = 'D' THEN
(CONVERT(nvarchar, V.idTramite) + '-' + CONVERT(nvarchar, V.Secuencia))
ELSE
CONVERT(nvarchar, v.idTramite) END nro_tramite,

case when
(
(v.Estado_Tramite = 'AR' AND V.Estado_DU = 'U' )
OR
(v.Estado_Tramite = 'AR' AND V.Estado_DU = 'D' )
or
( v.Estado_Tramite = 'TE' AND V.Estado_DU = 'U')
or
(v.Estado_Tramite = 'AR' AND V.Estado_DU = 'D' )
or
(v.Estado_Tramite = 'TE' AND V.Estado_DU = 'D' )
)
then  (SELECT        max(ots.Fecha_Aprobacion)
                               FROM            Observacion_Tramite_Sistemas ots
                               WHERE        ots.idTramite = v.idTramite)

else
NULL end AS fecha_aprobacion,



v.SUJETO_OBLIGADO,v.NIT,v.nombre,

CASE WHEN v.Estado_Tramite IN ('AR','TE') THEN 'PROCESADO'
ELSE 'NO PROCESADO' END
AS estado,


v.tipoProceso +' '+ v.TIPO as TIPO_TRAMITE,
'' AS usuario  --TODO no se usa
FROM v_resumen_traza_requisitos v
left join tObservacionMesa_Entrada tbm on v.idTramite = tbm.idTramite
where
v.ESTADO_IMPRESION = 'SI' AND v.estadoEntidad = 'AC' AND tbm.idObservacionMEntrada IS NOT NULL
AND
(
(v.Estado_Tramite = 'AP' AND V.Estado_DU = 'U')
OR
(v.Estado_Tramite = 'AP' AND V.Estado_DU = 'D')

OR
(v.Estado_Tramite = 'AR' AND V.Estado_DU = 'U' )
OR
(v.Estado_Tramite = 'AR' AND V.Estado_DU = 'D' )
OR
( v.Estado_Tramite = 'TE' AND V.Estado_DU = 'U')
OR
(v.Estado_Tramite = 'TE' AND V.Estado_DU = 'D' )
)
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AP' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado,
                         'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado,
                         'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae,tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND tr.idTramite = c.idTramite</CODE>
</VIEW>
<VIEW>
<NAME>listar_roles</NAME>
<ID>79</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT usuarioRol AS rol, usuarioRol AS rol1
FROM            dbo.Users
WHERE        (usuarioRol IN ('legal', 'estrategico', 'MesaEntrada', 'direccion', 'desarrollador', 'confirmarusuarios', 'archivar', 'admUIF'))</CODE>
</VIEW>
<VIEW>
<NAME>view_AC</NAME>
<ID>80</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                         P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                         f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION
FROM            dbo.tFuncionario AS f INNER JOIN
                         dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                         dbo.tPais AS P ON f.idPais = P.idPais
WHERE        (f.TIPO_FUNCIONARIO = 'AC')</CODE>
</VIEW>
<VIEW>
<NAME>view_FR</NAME>
<ID>81</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                         P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                         f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION
FROM            dbo.tFuncionario AS f INNER JOIN
                         dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                         dbo.tPais AS P ON f.idPais = P.idPais
WHERE        (f.TIPO_FUNCIONARIO = 'FR')</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivados</NAME>
<ID>82</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname%
as

SELECT        tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE,
                         c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
                         rr.fecha_registro, e.nusuario, 'APROBADO' AS ESTADO, '' AS Detalle, tta.Observacion,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) =
											CASE WHEN
											/*(SELECT count(act.nombre)
											FROM dbo.tEntidad ent
											INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
											INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
											INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
											WHERE ent.idEntidad = e.idEntidad
											and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
											THEN 11
											ELSE 9 END  --9 */
											(SELECT count(act.nombre)
											 FROM dbo.tEntidad ent
											 INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
											 INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
											 INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
											 WHERE ent.idEntidad = e.idEntidad
											 and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0 THEN 11
											 --ELSE
											 WHEN
											 (SELECT count(act.nombre)
											 FROM dbo.tEntidad ent
											 INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
											 INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
											 INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
											 WHERE ent.idEntidad = e.idEntidad
											 and act.nombre = 'NOTARIOS' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0 THEN 15
											 ELSE 9 END

							   THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               --WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia)) = 5
							   WHERE rr1.idTramite = rr.idTramite AND rr1.idParam = 4 AND (rr1.Secuencia = rr.Secuencia)) = 4
							   THEN 'REGISTRO DE SUJETO OBLIGADO Y FR'
							   ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN

						CASE WHEN TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

								 END ELSE
								 --'REGISTRO SUJETO OBLIGADO'

						/*		 CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END*/
								 --
							 CASE WHEN	tc.idTramite_Secuencia is  null
                                                 THEN 'REGISTRO DE SUJETO OBLIGADO'
                                                 ELSE 'RENOVACION DE SUJETO OBLIGADO' end
						END AS TIPO_TRAMITE,
                          tta.Fecha_Archivado
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                         dbo.tObservacionTramite_Archivo AS tta ON rr.idTramite = tta.idTramite INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad AND tta.Secuencia = tr.Secuencia AND tr.idTramite = tta.idTramite AND rr.Secuencia = tr.Secuencia
						 LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'TE') AND (rr.idRegistro_Requisito =
                             (SELECT        MIN(idRegistro_Requisito) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr1
                               WHERE        (idEntidad = rr.idEntidad) AND (idTramite = rr.idTramite) AND (ESTADO = 'TE') AND (Secuencia = rr.Secuencia)))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_Aprobado</NAME>
<ID>83</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname%
as

SELECT DISTINCT
                         tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE,
                         c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
                         rr.fecha_registro, e.nusuario, 'APROBADO' AS ESTADO,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                        CASE WHEN
                                  (SELECT        MAX(idParam)
                                   FROM            REGISTRO_REQUISITO rr1
                                    WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) =
																	CASE WHEN
																	/*(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END--9 */
																	--se aumentó para notarios
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0 THEN 11
																	--ELSE
																	WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'NOTARIOS' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0 THEN 15
																	ELSE 9 END
									THEN CASE WHEN
                                         (SELECT        rr1.idParam
                                          FROM            REGISTRO_REQUISITO rr1
                                         --WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia)) = 5
										   WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 4 AND (rr1.Secuencia = rr.Secuencia)) = 4
										   THEN 'REGISTRO DE SUJETO OBLIGADO Y FR'
										   ELSE CASE WHEN
                                               (SELECT DISTINCT (1)
                                                FROM REGISTRO_REQUISITO rr1, tFuncionario t1
                                                 WHERE rr1.idTramite = rr.idTramite
												 AND rr1.idFuncionario = t1.idFuncionario
												 AND t1.TIPO_FUNCIONARIO = 'FR'
												 AND (rr1.Secuencia = rr.Secuencia)) = 1
												THEN
												        CASE WHEN TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END
                                END
								ELSE
								CASE WHEN
                             (SELECT        COUNT(te.idEntidad)
                               FROM            tEntidad AS te
                               WHERE        te.idEntidad IN
                                                             (SELECT        teh.idEntidad
                                                               FROM            tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad)
                               &gt; 0 THEN 'RENOVACION DE SUJETO OBLIGADO'
						     ELSE 'REGISTRO DE SUJETO OBLIGADO' END

						END AS TIPO_TRAMITE
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia
						 LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'AP') AND (tr.Estado_Tramite = 'AP')</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_Aprobado_Archivo</NAME>
<ID>84</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname%
as

SELECT        tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE,
                         c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
                         rr.fecha_registro, e.nusuario, 'APROBADO' AS ESTADO, '' AS Detalle,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                             CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) =
							   CASE WHEN
							   /*(SELECT count(act.nombre)
								FROM dbo.tEntidad ent
								INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
								INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
								INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
								WHERE ent.idEntidad = e.idEntidad
								and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
							   THEN 11
							   ELSE 9 END--9 */
							   --se aumentó para notarios
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0 THEN 11
																	--ELSE
																	WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'NOTARIOS' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0 THEN 15
																	ELSE 9 END
							   THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                             --WHERE rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia)) = 5
							   WHERE rr1.idTramite = rr.idTramite AND rr1.idParam = 4 AND (rr1.Secuencia = rr.Secuencia)) = 4
							 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR'
						     ELSE
							 CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN

						CASE WHEN TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END
                          END ELSE CASE WHEN
                             (SELECT        COUNT(te.idEntidad)
                               FROM            tEntidad AS te
                               WHERE        te.idEntidad IN
                                                             (SELECT        teh.idEntidad
                                                               FROM            tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad)
                         &gt; 0
						 THEN 'RENOVACION DE SUJETO OBLIGADO'
						 ELSE 'REGISTRO DE SUJETO OBLIGADO'
						 END
						 END AS TIPO_TRAMITE
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia
LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia

WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'AR') AND (rr.idRegistro_Requisito =
                             (SELECT        MIN(idRegistro_Requisito) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr1
                               WHERE        (idEntidad = rr.idEntidad) AND (idTramite = rr.idTramite) AND (ESTADO = 'AR') AND (Secuencia = rr.Secuencia))) AND (tr.Estado_Tramite = 'AR') AND
                         EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.Observacion_Tramite_Sistemas
                               WHERE        (idTramite = rr.idTramite))</CODE>
</VIEW>
<VIEW>
<NAME>v_TipoSujetosObligadosCertificado2</NAME>
<ID>85</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
(

SELECT        e.idEntidad,e.SUJETO_OBLIGADO as sujeto_obligado, e.idActividadEconomica, ac.nombre, CAST(MAX(l.Fecha) AS date) AS Fecha
FROM            dbo.tEntidad AS e INNER JOIN
                dbo.tActividadEconomica AS ac ON e.idActividadEconomica = ac.idActividadEconomica INNER JOIN
                dbo.tTramite AS t ON e.idEntidad = t.idEntidad INNER JOIN
                dbo.tCertificadoImpresion AS c ON t.idTramite = c.idTramite INNER JOIN
                dbo.LogsTrans AS l ON c.idLogTrans = l.idLogTrans
WHERE        (c.tipo = 'SO' and t.Estado_Tramite='TE')
GROUP BY e.idEntidad, e.idActividadEconomica, ac.nombre, e.SUJETO_OBLIGADO

except

SELECT        e.idEntidad, e.SUJETO_OBLIGADO as sujetoobligado, e.idActividadEconomica, ac.nombre, CAST(MAX(l.Fecha) AS date) AS Fecha
FROM            dbo.tEntidad AS e INNER JOIN
                dbo.tActividadEconomica AS ac ON e.idActividadEconomica = ac.idActividadEconomica
				INNER JOIN
                dbo.tTramite AS t ON e.idEntidad = t.idEntidad
				INNER JOIN
                dbo.tCertificadoImpresion AS c ON t.idTramite = c.idTramite
				INNER JOIN
                dbo.LogsTrans AS l ON c.idLogTrans = l.idLogTrans
				inner join tTramiteClasificacion tc
				on tc.idTramite=c.idTramite
WHERE        (c.tipo = 'SO' and t.Estado_Tramite='TE')
GROUP BY e.idEntidad, e.idActividadEconomica, ac.nombre, e.SUJETO_OBLIGADO
)</CODE>
</VIEW>
<VIEW>
<NAME>view_registroCasoRenovacion</NAME>
<ID>86</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname% AS
SELECT   rcr.idParam,prs.DESCRIPCION,rcr.id_caso
  FROM [Registro_casoRenovacion] AS rcr
INNER JOIN PARAM_REQUISITOS_SO AS prs ON prs.idParam=rcr.idParam</CODE>
</VIEW>
<VIEW>
<NAME>view_tEntidadConRenovacionPendiente</NAME>
<ID>87</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT COUNT(*) AS cont,rr.idEntidad
FROM REGISTRO_REQUISITO AS rr

WHERE rr.ESTADO='AJ'
  AND rr.idParam in (1,2,3,4,5,6)
 GROUP BY rr.idEntidad
  HAVING count(*)&gt;0</CODE>
</VIEW>
<VIEW>
<NAME>listatotalSujetoObligadoConfechaREgistroImpresion</NAME>
<ID>88</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
  select a.* ,b.idCertificadoImpresion,b.idTramite,b.seq_Func,b.tipo,b.idLogTrans,b.Fecha,b.Transaccion
  from tEntidad a
  left join (

  select b.idCertificadoImpresion,b.idEntidad,b.idTramite,b.seq_Func,b.tipo, l.*
  from
  tCertificadoImpresion b
   inner join LogsTrans l
  on b.idLogTrans=l.idLogTrans
  where
 -- b.tipo='SO'
-- and
  b.idCertificadoImpresion in(

 select max(c.idCertificadoImpresion) from tEntidad e
 inner join tCertificadoImpresion c
 on e.idEntidad= c.idEntidad
  inner join LogsTrans l
  on c.idLogTrans=l.idLogTrans
 where c.tipo='SO'
 group by e.idEntidad)
 ) b
 on a.idEntidad = b.idEntidad</CODE>
</VIEW>
<VIEW>
<NAME>view_tEntidadFechaRenovacion</NAME>
<ID>89</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
   SELECT
	te.idEntidad,
	te.SUJETO_OBLIGADO
   ,SUBSTRING(te.CODIGO_VERIFICADOR, 1, 4) AS año
   ,SUBSTRING(te.CODIGO_VERIFICADOR, 5, 2) AS mes
   ,SUBSTRING(te.CODIGO_VERIFICADOR, 7, 2) AS dia


    ,CONVERT(DATE, (SUBSTRING(te.CODIGO_VERIFICADOR, 1, 4) +
	SUBSTRING(te.CODIGO_VERIFICADOR, 5, 2) +
	SUBSTRING(te.CODIGO_VERIFICADOR, 7, 2))) AS fechaIni

   ,DATEADD(dd, 722, CONVERT(DATE,
	CONVERT(DATE, (SUBSTRING(te.CODIGO_VERIFICADOR, 1, 4) +
	SUBSTRING(te.CODIGO_VERIFICADOR, 5, 2) +
	SUBSTRING(te.CODIGO_VERIFICADOR, 7, 2)))
	)) AS fechaDeRenovacion
   ,te.CODIGO_VERIFICADOR
FROM tEntidad AS te</CODE>
</VIEW>
<VIEW>
<NAME>view_ultIdEntidadhist</NAME>
<ID>90</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS

SELECT MAX(ehr1.idEntidad_hist) AS idEntidad_histULTIMO,ehr1.idEntidad
FROM tEntidadHistRenovados ehr1
GROUP BY ehr1.idEntidad</CODE>
</VIEW>
<VIEW>
<NAME>v_entidatotal</NAME>
<ID>91</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as (

SELECT        e.idEntidad, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, e.nusuario,e.ESTADO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad
WHERE        (e.ESTADO_IMPRESION = 'SI'))</CODE>
</VIEW>
<VIEW>
<NAME>v_entidadtotal_activos</NAME>
<ID>92</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as (
SELECT        e.idEntidad, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, e.nusuario,
                         e.ESTADO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad
WHERE        (e.ESTADO_IMPRESION = 'SI' ) and e.ESTADO='AC')</CODE>
</VIEW>
<VIEW>
<NAME>v_sujetos_obligados_consolidados_activos</NAME>
<ID>93</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as (
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE, lt.Fecha fecha_emision, 'SG' as ng
FROM            v_entidadtotal_activos e, REGISTRO_REQUISITO rr JOIN
                         tCertificadoImpresion ci ON rr.idTramite = ci.idTramite AND ci.tipo = 'SO' AND ci.idCertificadoImpresion =
                             (SELECT        max(ci1.idCertificadoImpresion)
                               FROM            tCertificadoImpresion ci1
                               WHERE        ci1.idTramite = ci.idTramite AND ci1.tipo = 'SO') JOIN
                         LogsTrans lt ON ci.idLogTrans = lt.idLogTrans
WHERE        EXISTS
                             (SELECT        1
                               FROM            REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                               WHERE        rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND EXISTS
                                                             (SELECT        1
                                                               FROM            tTramite t
                                                               WHERE        t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                         e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6 AND rr.fecha_registro =
                             (SELECT        max(rr1.fecha_registro)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idEntidad = e.idEntidad AND rr1.idParam &lt;= 6)
UNION ALL
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE, ota.Fecha_Archivado fecha_emision, 'NG' as ng
FROM            v_entidadtotal_activos e, REGISTRO_REQUISITO rr, tObservacionTramite_Archivo ota
WHERE        EXISTS
                             (SELECT        1
                               FROM            REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                               WHERE        rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND EXISTS
                                                             (SELECT        1
                                                               FROM            tTramite t
                                                               WHERE        t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                         e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6 AND rr.fecha_registro =
                             (SELECT        max(rr1.fecha_registro)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idEntidad = e.idEntidad AND rr1.idParam &lt;= 6) AND NOT EXISTS
                             (SELECT        1
                               FROM            tCertificadoImpresion ci
                               WHERE        rr.idTramite = ci.idTramite) AND rr.idTramite = ota.idTramite AND rr.Secuencia = ota.Secuencia
							   )</CODE>
</VIEW>
<VIEW>
<NAME>v_imprimeconstancia</NAME>
<ID>94</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname%
as
select r.estado_renovacion,r.idTramite,r.idFuncionario,r.idEntidad, r.ESTADO,r.Estado_DU,r.fecha_documento,r.fecha_registro,
r.idRegistro_Requisito,r.idParam,r.nro_documento,r.Secuencia,tc.EstadoImpresion,tc.fechaRegistro,tc.idTramite as idTramiteClasifica,tc.idTramite_Secuencia,tc.Requisitos,
tc.Tipo_Funcionario,tc.Tipo_Tramite,tc.usuarioRegistro
from REGISTRO_REQUISITO r
inner join tTramite t
on r.idEntidad=t.idEntidad
and r.idTramite=t.idTramite
inner join tTramiteClasificacion tc
on t.idTramite_Secuencia=tc.idTramite_Secuencia

where r.ESTADO='AJ'</CODE>
</VIEW>
<VIEW>
<NAME>view_listar_AC_tramiteANTERIOR</NAME>
<ID>95</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                         P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                         f.OBSERVACIONES, f.idEntidad, tr.idTramite, f.Observacion_subsanada, (CASE WHEN EXISTS
                             (SELECT        *
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idFuncionario = rr.idFuncionario AND rr1.ESTADO = 'OB') THEN 'OBSERVADO' WHEN EXISTS
                             (SELECT        *
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idFuncionario = rr.idFuncionario AND rr1.ESTADO = 'AP') THEN 'APROBADO' ELSE 'PENDIENTE' END) AS ESTADO
FROM            dbo.tFuncionario AS f INNER JOIN
                         dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                         dbo.tPais AS P ON f.idPais = P.idPais INNER JOIN
                         dbo.tTramite AS tr ON f.idEntidad = tr.idEntidad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON tr.idTramite = rr.idTramite AND f.idFuncionario = rr.idFuncionario INNER JOIN
                         dbo.tEstado AS est ON rr.ESTADO = est.Estado_Tramite
WHERE        (f.TIPO_FUNCIONARIO = 'AC') AND (rr.idRegistro_Requisito =
                             (SELECT        MIN(idRegistro_Requisito) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO
                               WHERE        (idFuncionario = rr.idFuncionario))) AND (tr.Estado_Tramite &lt;&gt; 'AP') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr
                               WHERE        (idTramite = tr.idTramite) AND (idFuncionario = f.idFuncionario))</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivados_ConNombres</NAME>
<ID>96</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create VIEW %viewname% as
SELECT distinct
      --case when tipo='DE SUJETO OBLIGADO Y FR'
	  --then null else vt.[idFuncionario] end as idFuncionario
	  vt.[idFuncionario]
      ,vt.[idEntidad]
      ,vt.[idTramite_Secuencia]
      ,vt.[idTramite]
      ,vt.[SUJETO_OBLIGADO]
      ,vt.[NIT]
      ,vt.[TIPO_SUJETO_OBLIGADO]
      ,vt.[OTRO_TIPO_SO]
      ,vt.[NOMBRE_REPRESENTANTE]
      ,vt.[CIUDAD]
      ,vt.[CORREO_ELECTRONICO]
      ,vt.[OFCEN_ZONA]
      ,vt.[OFCEN_DIRECCION]
      ,vt.[OFCEN_TELEFONO]
      ,vt.[OBSERVACIONES]
      ,vt.[CODIGO_VERIFICADOR]
      ,vt.[nusuario]
      ,vt.[estadoEntidad]
      ,vt.[fecha_registro]
      ,vt.[ESTADO]
	 ,'' AS Detalle
	 ,
	 '' as usuarioLegal
	 ,'' as Observacion_subsanada
      ,vt.[Secuencia]
      ,vt.[Estado_DU]
      ,
	  --case when tipo='DE SUJETO OBLIGADO Y FR'
	  --then null else vt.[nombre_funcionario] end as nombre_funcionario
	  vt.[nombre_funcionario]
      ,vt.[tipoProceso]
      ,vt.[TIPO]
	  ,vt.tipoProceso + ' '+ TIPO as TIPO_TRAMITE
      ,tta.Observacion,
	  max(tta.Fecha_Archivado ) as FEcha_Archivo,
	  tta.Observacion AS nro_sicod,
	  vt.TIPO_FUNCIONARIO
FROM v_resumen_traza_requisitos vt
inner join dbo.tObservacionTramite_Archivo AS tta ON vt.idTramite = tta.idTramite
and tta.Secuencia = vt.Secuencia
where
vt.TIPO != 'DADO DE BAJA' AND
vt.estadoEntidad = 'AC' and vt.ESTADO_IMPRESION = 'SI' and vt.ESTADO = 'TE'
and idTramite_Secuencia
in
	(
		SELECT max(vt.idTramite_Secuencia) FROM v_resumen_traza_requisitos vt
		inner join dbo.tObservacionTramite_Archivo AS tta ON vt.idTramite = tta.idTramite
		where  vt.TIPO != 'DADO DE BAJA' AND vt.estadoEntidad = 'AC' and vt.ESTADO_IMPRESION = 'SI' and vt.ESTADO = 'TE'
		--	group by vt.idEntidad, case when vt.tipo='DE SUJETO OBLIGADO Y FR' then 'DE SUJETO OBLIGADO' else vt.tipo end
		and (vt.TIPO_FUNCIONARIO not in ('BA','BC') or vt.TIPO_FUNCIONARIO is null  )
		group by vt.idEntidad, vt.idFuncionario
	)
	--and (vt.TIPO_FUNCIONARIO not in ('BA') or vt.TIPO_FUNCIONARIO is null  )
	and (
	        --  (vt.TIPO='DE SUJETO OBLIGADO Y FR' and vt.[nombre_funcionario] is not null)
		    (vt.TIPO='DE SUJETO OBLIGADO Y FR' and vt.[nombre_funcionario] is  null)
		   or
		   (vt.TIPO!='DE SUJETO OBLIGADO Y FR')
		)

	--and vt.idEntidad=1033
	--and vt.idEntidad=1262
	--and vt.idEntidad=1011
	--and vt.idEntidad=1028
	--and vt.idEntidad=1140
	--and vt.idEntidad=1093
	--and vt.idEntidad=1128
	/*
	SELECT vt.idEntidad, case when vt.tipo='DE SUJETO OBLIGADO Y FR' then 'DE SUJETO OBLIGADO' else vt.tipo end ,
	 max(vt.idTramite_Secuencia) FROM v_resumen_traza_requisitos vt
		inner join dbo.tObservacionTramite_Archivo AS tta ON vt.idTramite = tta.idTramite
		where  vt.TIPO != 'DADO DE BAJA' AND vt.estadoEntidad = 'AC' and vt.ESTADO_IMPRESION = 'SI' and vt.ESTADO = 'TE'
		group by vt.idEntidad, case when vt.tipo='DE SUJETO OBLIGADO Y FR' then 'DE SUJETO OBLIGADO' else vt.tipo end
		having idEntidad=1262
		*/


group by  vt.[idFuncionario]
      ,vt.[idEntidad]
      ,vt.[idTramite_Secuencia]
      ,vt.[idTramite]
      ,vt.[SUJETO_OBLIGADO]
      ,vt.[NIT]
      ,vt.[TIPO_SUJETO_OBLIGADO]
      ,vt.[OTRO_TIPO_SO]
      ,vt.[NOMBRE_REPRESENTANTE]
      ,vt.[CIUDAD]
      ,vt.[CORREO_ELECTRONICO]
      ,vt.[OFCEN_ZONA]
      ,vt.[OFCEN_DIRECCION]
      ,vt.[OFCEN_TELEFONO]
      ,vt.[OBSERVACIONES]
      ,vt.[CODIGO_VERIFICADOR]
      ,vt.[nusuario]
      ,vt.[estadoEntidad]
      ,vt.[fecha_registro]
      ,vt.[ESTADO]


      ,vt.[Secuencia]
      ,vt.[Estado_DU]
      ,
	  --case when tipo='DE SUJETO OBLIGADO Y FR'
	  --then null else vt.[nombre_funcionario] end as nombre_funcionario
	  vt.[nombre_funcionario]
      ,vt.[tipoProceso]
      ,vt.[TIPO]
	  ,vt.tipoProceso + ' '+ TIPO
      ,tta.Observacion,

	  tta.Observacion ,
	  vt.TIPO_FUNCIONARIO</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivadosANTERIOR</NAME>
<ID>97</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE,
                         c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
                         rr.fecha_registro, e.nusuario, 'APROBADO' AS ESTADO, '' AS Detalle, tta.Observacion,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          tta.Fecha_Archivado
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                         dbo.tObservacionTramite_Archivo AS tta ON rr.idTramite = tta.idTramite INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad AND tta.Secuencia = tr.Secuencia AND tr.idTramite = tta.idTramite AND rr.Secuencia = tr.Secuencia
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'TE') AND (rr.idRegistro_Requisito =
                             (SELECT        MIN(idRegistro_Requisito) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr1
                               WHERE        (idEntidad = rr.idEntidad) AND (idTramite = rr.idTramite) AND (ESTADO = 'TE') AND (Secuencia = rr.Secuencia)))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_Aprobado_ArchivoANTERIOR</NAME>
<ID>98</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE,
                         c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
                         rr.fecha_registro, e.nusuario, 'APROBADO' AS ESTADO, '' AS Detalle,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN



						  CASE
															WHEN (SELECT count(f.idFuncionario)
																	FROM tFuncionario f
																	WHERE f.TIPO_FUNCIONARIO='FR' AND f.idFuncionario IN (SELECT fhr.idFuncionario
																											FROM tFuncionarioHistRenovados fhr
																											WHERE fhr.idFuncionario=f.idFuncionario AND fhr.idEntidad=e.idEntidad))
																&gt; 0 THEN 'RENOVACION FUNCIONARIO RESPONSABLE'
															ELSE 'REGISTRO FUNCIONARIO RESPONSABLE'
														END




						 ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END
						 ELSE
						    CASE WHEN (SELECT COUNT(te.idEntidad) FROM tEntidad as te
										  WHERE te.idEntidad IN (SELECT teh.idEntidad FROM tEntidadHistRenovados AS teh)
										AND te.idEntidad=e.idEntidad)&gt;0
										THEN 'RENOVACION DE SUJETO OBLIGADO'
										ELSE 'REGISTRO DE SUJETO OBLIGADO'
								END



						 END AS TIPO_TRAMITE
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'AR') AND (rr.idRegistro_Requisito =
                             (SELECT        MIN(idRegistro_Requisito) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr1
                               WHERE        (idEntidad = rr.idEntidad) AND (idTramite = rr.idTramite) AND (ESTADO = 'AR') AND (Secuencia = rr.Secuencia))) AND (tr.Estado_Tramite = 'AR') AND
                         EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.Observacion_Tramite_Sistemas
                               WHERE        (idTramite = rr.idTramite))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_AprobadoANTERIOR</NAME>
<ID>99</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE,
                         c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
                         rr.fecha_registro, e.nusuario, 'APROBADO' AS ESTADO,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN


						  CASE
															WHEN (SELECT count(f.idFuncionario)
																	FROM tFuncionario f
																	WHERE f.TIPO_FUNCIONARIO='FR' AND f.idFuncionario IN (SELECT fhr.idFuncionario
																											FROM tFuncionarioHistRenovados fhr
																											WHERE fhr.idFuncionario=f.idFuncionario AND fhr.idEntidad=e.idEntidad))
																&gt; 0 THEN 'RENOVACION FUNCIONARIO RESPONSABLE'
															ELSE 'REGISTRO FUNCIONARIO RESPONSABLE'
														END





						 ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END
						 END
						   ELSE
								CASE WHEN (SELECT COUNT(te.idEntidad) FROM tEntidad as te
										  WHERE te.idEntidad IN (SELECT teh.idEntidad FROM tEntidadHistRenovados AS teh)
										AND te.idEntidad=e.idEntidad)&gt;0
										THEN 'RENOVACION DE SUJETO OBLIGADO'
										ELSE 'REGISTRO DE SUJETO OBLIGADO'
								END

						 END AS TIPO_TRAMITE
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'AP') AND (tr.Estado_Tramite = 'AP')</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_tramiteRegistroTerminado</NAME>
<ID>100</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        e.idEntidad, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, e.nusuario,
                         e.TIPO_EMPRESA, e.CORREO_ELECTRONICO AS Expr1,
                             (SELECT        MIN(ot.Fecha_Archivado) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr INNER JOIN
                                                         dbo.tObservacionTramite_Archivo AS ot ON rr.idTramite = ot.idTramite
                               WHERE        (rr.idParam &lt;= 6) AND (rr.idEntidad = e.idEntidad)) AS fecha_archivado
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad
WHERE        (e.ESTADO_IMPRESION = 'SI') AND (e.ESTADO = 'AC') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tTramite AS t
                               WHERE        (Estado_Tramite = 'TE') AND (idEntidad = e.idEntidad) AND (idTramite =
                                                             (SELECT        MIN(idTramite) AS Expr1
                                                               FROM            dbo.tTramite AS tr
                                                               WHERE        (idEntidad = t.idEntidad))))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisitoANTERIOR</NAME>
<ID>101</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE,
                         c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
                         rr.fecha_registro, e.nusuario, 'PENDIENTE' AS ESTADO,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN


									 CASE
															WHEN (SELECT count(f.idFuncionario)
																	FROM tFuncionario f
																	WHERE f.TIPO_FUNCIONARIO='FR' AND f.idFuncionario IN (SELECT fhr.idFuncionario
																											FROM tFuncionarioHistRenovados fhr
																											WHERE fhr.idFuncionario=f.idFuncionario AND fhr.idEntidad=e.idEntidad))
																&gt; 0 THEN 'RENOVACION FUNCIONARIO RESPONSABLE'
															ELSE 'REGISTRO FUNCIONARIO RESPONSABLE'
														END




						 ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END
						 ELSE
						    CASE WHEN (SELECT COUNT(te.idEntidad) FROM tEntidad as te
										  WHERE te.idEntidad IN (SELECT teh.idEntidad FROM tEntidadHistRenovados AS teh)
										AND te.idEntidad=e.idEntidad)&gt;0
										THEN 'RENOVACION DE SUJETO OBLIGADO'
										ELSE 'REGISTRO DE SUJETO OBLIGADO'
								END


						 END AS TIPO_TRAMITE
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                         dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'AJ') AND (tr.Estado_Tramite &lt;&gt; 'AP') AND (tr.Estado_Tramite &lt;&gt; 'TE') AND
                         (tr.Estado_Tramite &lt;&gt; 'AR') AND (tr.Estado_Tramite &lt;&gt; 'AH') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tTramite AS t
                               WHERE        (idEntidad = e.idEntidad)) AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
      WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite))</CODE>
</VIEW>
<VIEW>
<NAME>view_estrategico</NAME>
<ID>102</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT     e.SUJETO_OBLIGADO, e.OFCEN_TELEFONO, e.CORREO_ELECTRONICO AS correo_electronico_institucion, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO,
                      vv.fecha_archivado, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS nombre, f.CM_TELEFONO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f1.PN_NOMBRE + ' ' + f1.PN_PATERNO + ' ' + f1.PN_MATERNO AS nombre_analista, f1.CM_TELEFONO AS telefono_analista, f1.CM_CELULAR AS celular_analista,
                      f1.CORREO_ELECTRONICO AS correo_analista, vv.CIUDAD
FROM         dbo.tEntidad AS e LEFT OUTER JOIN
                      dbo.tFuncionario AS f ON e.idEntidad = f.idEntidad AND f.TIPO_FUNCIONARIO = 'FR' INNER JOIN
                      dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                      dbo.view_ver_entidad_tramiteRegistroTerminado AS vv ON e.idEntidad = vv.idEntidad LEFT OUTER JOIN
                      dbo.tFuncionario AS f1 ON e.idEntidad = f1.idEntidad AND f1.TIPO_FUNCIONARIO = 'AC'
WHERE     (e.ESTADO_IMPRESION = 'SI') AND (e.ESTADO = 'AC')</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisitoME_ANTERIOR</NAME>
<ID>103</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname%
as

SELECT DISTINCT
                         rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, rr.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO, CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN CASE WHEN
                             (SELECT        COUNT(f.idFuncionario)
                               FROM            tFuncionario f
                               WHERE        f.TIPO_FUNCIONARIO = 'FR' AND f.idFuncionario =
                                                             (SELECT        fhr.idFuncionario
                                                               FROM            tFuncionarioHistRenovados fhr
                                                               WHERE        fhr.idFuncionario = f.idFuncionario)) &gt; 0 THEN CASE WHEN
                             (SELECT        COUNT(f.idFuncionario)
                               FROM            tFuncionario f
                               WHERE        f.TIPO_FUNCIONARIO = 'FR' AND f.idFuncionario IN
                                                             (SELECT        fhr.idFuncionario
                                                               FROM            tFuncionarioHistRenovados fhr
                                                               WHERE        fhr.idFuncionario = f.idFuncionario AND fhr.idEntidad = e.idEntidad))
                         &gt; 0 THEN 'RENOVACION FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO FUNCIONARIO RESPONSABLE' END ELSE 'REGISTRO FUNCIONARIO RESPONSABLE' END
                          ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE CASE WHEN
                             (SELECT        COUNT(te.idEntidad)
                               FROM            tEntidad AS te
                               WHERE        te.idEntidad IN
                                                             (SELECT        teh.idEntidad
                                                               FROM            tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad)
                         &gt; 0 THEN 'RENOVACION DE SUJETO OBLIGADO' ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                         dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'AJ') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tTramite AS t
                               WHERE        (idEntidad = e.idEntidad)) AND (NOT EXISTS
                             (SELECT1 AS sExpr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite)))
							   --AND (rr.estado_renovacion = 0)</CODE>
</VIEW>
<VIEW>
<NAME>view_AC_observados</NAME>
<ID>104</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
select * from view_AC v
where exists (select 1 from REGISTRO_REQUISITO rr where rr.idFuncionario=v.idFuncionario and rr.ESTADO='OB')</CODE>
</VIEW>
<VIEW>
<NAME>v_TramiteParametrosMinimosMaximos</NAME>
<ID>105</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
select idTramite,Secuencia,min(idParam) as minimoParam,max(idParam) as maximoParam from REGISTRO_REQUISITO
group by idTramite,Secuencia</CODE>
</VIEW>
<VIEW>
<NAME>busqueda_por_FR</NAME>
<ID>106</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname% as
SELECT        e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.NOMBRE_REPRESENTANTE, e.OFCEN_DIRECCION,
                         fr.PN_NOMBRE + ' ' + fr.PN_PATERNO + ' ' + fr.PN_MATERNO AS NOMBRE_FR, e.idEntidad
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tFuncionario AS fr ON e.idEntidad = fr.idEntidad
WHERE        (fr.TIPO_FUNCIONARIO = 'FR') and e.ESTADO_IMPRESION='SI' and e.ESTADO='AC'</CODE>
</VIEW>
<VIEW>
<NAME>v_otros_tipos_tramite</NAME>
<ID>107</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT distinct       tr.idTramite ,'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' as tipo
FROM          tTramite tr, tComunicacionCambioFR c
WHERE         tr.idTramite = c.idTramite
--'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE'

union

--'BAJA FUNCIONARIO RESPONSABLE'
SELECT distinct       tr.idTramite , 'BAJA FUNCIONARIO RESPONSABLE' as tipo
FROM          tTramite tr,  tBajaFuncionario BF, LogsTrans lt
WHERE
              TR.idTramite = BF.idTramiteNuevo
			  AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
union

SELECT        tr.idTramite, 'BAJA ANALISTA DE CUMPLIMIENTO' as tipo
FROM            tTramite tr,  tBajaFuncionario BF, LogsTrans lt
WHERE           TR.idTramite = BF.idTramiteNuevo
               AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'</CODE>
</VIEW>
<VIEW>
<NAME>busqueda_por_FR_tramiteRegistroTerminado</NAME>
<ID>108</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT        e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.NOMBRE_REPRESENTANTE, e.OFCEN_DIRECCION,
                         fr.PN_NOMBRE + ' ' + fr.PN_PATERNO + ' ' + fr.PN_MATERNO AS NOMBRE_FR, e.idEntidad
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tFuncionario AS fr ON e.idEntidad = fr.idEntidad
WHERE        (fr.TIPO_FUNCIONARIO = 'FR') AND (e.ESTADO_IMPRESION = 'SI') AND (e.ESTADO = 'AC')
			 and exists (select 1 from tTramite t where t.Estado_Tramite='TE' and t.idEntidad=e.idEntidad
			 and t.idTramite=(select min(tr.idTramite) from tTramite tr where tr.idEntidad=t.idEntidad))</CODE>
</VIEW>
<VIEW>
<NAME>v_resumen_traza_requisitos</NAME>
<ID>109</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
--ALTER  view v_algo as
SELECT                   fun.idFuncionario,
                         e.idEntidad,
                         tr.idTramite_Secuencia, tr.idTramite,
						 rr.idParam,
						 rr.idRegistro_Requisito,
						 e.SUJETO_OBLIGADO,
						 e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO,
						 ae.nombre,
						 e.OTRO_TIPO_SO,
                         e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO,
						 e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO,
                         e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
						 e.nusuario,
						 --tta.Observacion,
                         --tta.Fecha_Archivado,
						 e.ESTADO as estadoEntidad,
						 e.ESTADO_IMPRESION,
						 rr.estado_renovacion,
						 rr.fecha_registro,
						 rr.ESTADO,
						 tr.Secuencia,
						 rr.Estado_DU,
						tr.Estado_Tramite,--nuevo
						 tr.Observacion_subsanada,

                         fun.PN_NOMBRE + ' ' + fun.PN_PATERNO + ' ' + fun.PN_MATERNO AS nombre_funcionario,
						 --tta.Observacion AS nro_sicod,
						 CASE WHEN  tc.idTramite_Secuencia IS NULL THEN 'REGISTRO' ELSE 'RENOVACION' END tipoProceso,
						 CASE WHEN   vp.minimoParam &lt;= 6 and (vp.maximoParam=9 or vp.maximoParam =11 or vp.maximoParam =15) then 'DE SUJETO OBLIGADO Y FR'
						 when  (vp.maximoParam&lt;=6 or vp.maximoParam = 10 or vp.maximoParam = 13) then 'DE SUJETO OBLIGADO'
						 when  vp.minimoParam=7  and (vp.maximoParam=9 or vp.maximoParam = 11 or vp.maximoParam =15) and fun.TIPO_FUNCIONARIO in ('FR','BA','BT')
						 then  'FUNCIONARIO RESPONSABLE'
						 --when  vp.minimoParam=7  and vp.maximoParam=9 and fun.TIPO_FUNCIONARIO='BA'
						 --then  'BAJA DE FUNCIONARIO RESPONSABLE'
						 --when  vp.minimoParam=7  and vp.maximoParam=9 and fun.TIPO_FUNCIONARIO='BT'
						 --then  'BAJA DE FUNCIONARIO RESPONSABLE'
						 when  vp.minimoParam=7  and (vp.maximoParam=9 or vp.maximoParam=11 or vp.maximoParam =15) and fun.TIPO_FUNCIONARIO in ('AC','BC')
						 then  'ANALISTA DE CUMPLIMIENTO'
						 --when  vp.minimoParam=7  and vp.maximoParam=9 and fun.TIPO_FUNCIONARIO='BC'
						 --then  'BAJA DE ANALISTA DE CUMPLIMIENTO'

						 when ott.idTramite is not null
						 then ott.tipo

						 ELSE
						 'DADO DE BAJA'
						 --+' min'+ isnull(cast(vp.minimoParam as varchar),'')
						 --+ 'max'+ isnull( cast(vp.maximoParam as varchar),'') +'  fun  '+ isnull( fun.TIPO_FUNCIONARIO,'nn')
						 END AS TIPO      ,c.Descripcion
						 ,fun.TIPO_FUNCIONARIO


FROM                     dbo.tEntidad AS e
                         INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica
						 INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad

						 INNER JOIN
                         tTramite  AS tr ON
						 tr.idEntidad = e.idEntidad

						 LEFT JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON tr.idTramite = rr.idTramite
						 and
						 tr.Secuencia = rr.Secuencia

						 LEFT  join
						  v_TramiteParametrosMinimosMaximos vp on vp.idTramite = rr.idTramite and vp.Secuencia = rr.Secuencia
						 LEFT OUTER JOIN
                         dbo.tFuncionario AS fun ON rr.idFuncionario = fun.idFuncionario
						 LEFT OUTER JOIN
                         dbo.tTramiteClasificacion AS tc ON tr.idTramite= tc.idTramite
						 left join
						 v_otros_tipos_tramite ott on tr.idTramite = ott.idTramite</CODE>
</VIEW>
<VIEW>
<NAME>lista_final_1</NAME>
<ID>110</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.NOMBRE_REPRESENTANTE, e.OFCEN_DIRECCION,
                         fr.PN_NOMBRE + ' ' + fr.PN_PATERNO + ' ' + fr.PN_MATERNO AS NOMBRE_FR, e.idEntidad
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tFuncionario AS fr ON e.idEntidad = fr.idEntidad
WHERE        (fr.TIPO_FUNCIONARIO = 'FR') AND (e.ESTADO_IMPRESION = 'SI') AND (e.ESTADO = 'AC')</CODE>
</VIEW>
<VIEW>
<NAME>v_listar_tiempos_registro_sub</NAME>
<ID>111</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT distinct
v.idTramite_Secuencia,
V.idTramite, V.Secuencia,
v.SUJETO_OBLIGADO,v.NIT,v.nombre AS TIPO_SUJETO_OBLIGADO,
v.tipoProceso +' '+ v.TIPO as TIPO_TRAMITE,
(SELECT        CONVERT(date, MAX(fecha_registro)) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr
                               WHERE        (idTramite = v.idTramite) AND (Secuencia = v.Secuencia)) AS fecha_registro,

 (SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN

                                                         dbo.REGISTRO_REQUISITO AS rr
														 ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'RC')
							   AND (rr.idTramite = v.idTramite) AND (rr.Secuencia = v.Secuencia))
							    AS fecha_recepcion ,

								(SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                         dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'OB') AND (rr.idTramite = v.idTramite) AND (rr.Secuencia = v.Secuencia)) AS fecha_ultimaObservacion,

							   (SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                         dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'CR') AND (rr.idTramite = v.idTramite) AND (rr.Secuencia = v.Secuencia)) AS fecha_ultimaCorreccion,

							   (SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                         dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'AP') AND (rr.idTramite = v.idTramite) AND (rr.Secuencia = v.Secuencia)) AS fecha_aprobacion_legal,

							    (SELECT        CONVERT(date, MAX(Fecha_Aprobacion)) AS Expr1
                               FROM            dbo.Observacion_Tramite_Sistemas AS l
                               WHERE        (idTramite = v.idTramite)) AS fecha_aprobacion_sistemas,

							          (SELECT        CONVERT(date, MAX(Fecha_Archivado)) AS Expr1
                               FROM            dbo.tObservacionTramite_Archivo AS l
                               WHERE        (idTramite = v.idTramite)) AS fecha_archivado,

							     CASE WHEN v.Estado_Tramite = 'AJ'
							   THEN
							   CASE WHEN  (SELECT DISTINCT 1
                                           FROM            LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                                           WHERE        l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'AP' AND rr.idTramite = v.idTramite AND rr.Secuencia = v.Secuencia)
                                           = 1
								THEN 'APROBADO SOLO SUJETO OBLIGADO ÁREA JURÍDICA'
						        ELSE 'TRAMITE PENDIENTE' END

						  ELSE CASE WHEN v.Estado_Tramite = 'AP' THEN 'APROBADO ÁREA JURÍDICA'
                          ELSE CASE WHEN v.Estado_tramite = 'AR' THEN 'APROBADO ÁREA SISTEMAS'
						  ELSE CASE WHEN v.Estado_tramite = 'AH' THEN 'TRÁMITE ARCHIVADO'
						  ELSE CASE WHEN v.Estado_Tramite = 'OB' THEN 'TRÁMITE OBSERVADO'
						  ELSE 'TRÁMITE TERMINADO' END END END END END AS ESTADO_TRAMITE
FROM v_resumen_traza_requisitos v
WHERE        (v.estadoEntidad = 'AC') AND (v.ESTADO_IMPRESION = 'SI')











--left join tObservacionMesa_Entrada tbm on v.idTramite = tbm.idTramite</CODE>
</VIEW>
<VIEW>
<NAME>lista_final_2</NAME>
<ID>112</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
select (PN_NOMBRE +' '+ PN_PATERNO +' '+ PN_MATERNO) NOMBRE_FR,idEntidad from tFuncionario
where TIPO_FUNCIONARIO='AC'</CODE>
</VIEW>
<VIEW>
<NAME>view_estado_sujetos_obligadosANTERIOR</NAME>
<ID>113</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE, lt.Fecha fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr JOIN
                      tCertificadoImpresion ci ON rr.idTramite = ci.idTramite and ci.tipo='SO' AND ci.idCertificadoImpresion =
                          (SELECT     max(ci1.idCertificadoImpresion)
                            FROM          tCertificadoImpresion ci1
                            WHERE      ci1.idTramite = ci.idTramite and ci1.tipo='SO') JOIN
                      LogsTrans lt ON ci.idLogTrans = lt.idLogTrans
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'

							 and rr.idTramite=rr2.idTramite
							 AND EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idParam &lt;= 6)
union all
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE, ota.Fecha_Archivado fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr,tObservacionTramite_Archivo ota
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
							and rr.idTramite=rr2.idTramite
							 AND EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idParam &lt;= 6)
					  and not exists (select  1 from  tCertificadoImpresion ci
						where rr.idTramite = ci.idTramite)
						and rr.idTramite=ota.idTramite
						and rr.Secuencia=ota.Secuencia
UNION ALL
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN ARCHIVOS' ESTADO_TRAMITE, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
							and  rr.idtramite=rr2.idTramite AND EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AR') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
UNION ALL
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN SISTEMAS' ESTADO_TRAMITE, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
							and rr.idTramite=rr2.idTramite
							AND EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AP') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
UNION ALL
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
							and rr2.idTramite=rr.idTramite
							AND EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AJ') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
UNION ALL
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' and rr2.idTramite=rr.idTramite) AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
UNION ALL
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN MESA DE ENTRADA' ESTADO_TRAMITE, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'

							and rr.idTramite=rr2.idTramite
							)
		AND NOT EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6</CODE>
</VIEW>
<VIEW>
<NAME>view_estado_sujetos_obligadosANTERIORJP</NAME>
<ID>114</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE, lt.Fecha fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr JOIN
                      tCertificadoImpresion ci ON rr.idTramite = ci.idTramite and ci.tipo='SO' AND ci.idCertificadoImpresion =
                          (SELECT     max(ci1.idCertificadoImpresion)
                            FROM          tCertificadoImpresion ci1
                            WHERE      ci1.idTramite = ci.idTramite and ci1.tipo='SO') JOIN
                      LogsTrans lt ON ci.idLogTrans = lt.idLogTrans
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idParam &lt;= 6)
union all
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE, ota.Fecha_Archivado fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr,tObservacionTramite_Archivo ota
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idParam &lt;= 6)
					  and not exists (select  1 from  tCertificadoImpresion ci
						where rr.idTramite = ci.idTramite)
						and rr.idTramite=ota.idTramite
						and rr.Secuencia=ota.Secuencia
UNION ALL
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN ARCHIVOS' ESTADO_TRAMITE, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AR') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
UNION ALL
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN SISTEMAS' ESTADO_TRAMITE, NULL fecha_emision
FROM     view_ver_entidad e, REGISTRO_REQUISITO rr
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AP') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
UNION ALL
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AJ') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
UNION ALL
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP') AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
UNION ALL
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN MESA DE ENTRADA' ESTADO_TRAMITE, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP') AND NOT EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivados_observados</NAME>
<ID>115</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
SELECT        tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE,
                         c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
                         rr.fecha_registro, e.nusuario, 'APROBADO' AS ESTADO, '' AS Detalle, tta.Observacion,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) in (9,15) THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 4 AND (rr1.Secuencia = rr.Secuencia))
                         = 4 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          tta.Fecha_Archivado
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                         dbo.tObservacionTramite_Archivo AS tta ON rr.idTramite = tta.idTramite INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad AND tta.Secuencia = tr.Secuencia AND tr.idTramite = tta.idTramite AND rr.Secuencia = tr.Secuencia
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'TE') AND (rr.idRegistro_Requisito =
                             (SELECT        MIN(idRegistro_Requisito) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr1
                               WHERE        (idEntidad = rr.idEntidad) AND (idTramite = rr.idTramite) AND (ESTADO = 'TE') AND (Secuencia = rr.Secuencia)))
							   and exists (select 1 from LOG_REGISTRO_REQUISITO lrr1 where lrr1.idRegistro_Requisito=rr.idRegistro_Requisito and lrr1.Operacion='OB')</CODE>
</VIEW>
<VIEW>
<NAME>view_AC_recepcionados</NAME>
<ID>116</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT   distinct     f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                         P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                         f.OBSERVACIONES, f.idEntidad
FROM            dbo.tFuncionario AS f INNER JOIN
                         dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                         dbo.tPais AS P ON f.idPais = P.idPais inner join
						 dbo.REGISTRO_REQUISITO as rr on f.idFuncionario=rr.idFuncionario
WHERE        (f.TIPO_FUNCIONARIO = 'AC') and not exists (select 1 from tObservacionMesa_Entrada where
							   f.idEntidad=idEntidad and rr.idTramite=idTramite)</CODE>
</VIEW>
<VIEW>
<NAME>view_listar_tiempos_registroANTERIOR</NAME>
<ID>117</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname%
--Reporte por Tiempos y Etapas de Registro
--view_listar_tiempos_registro
as
SELECT DISTINCT tr.idTramite_Secuencia, tr.idTramite, tr.Secuencia, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = tr.idTramite AND rr1.Secuencia = tr.Secuencia) = 9
							THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = tr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = tr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = tr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = tr.Secuencia))
                         = 1

						-- THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO'

						 THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END

						 END AS TIPO_TRAMITE,
                             (SELECT        CONVERT(date, MAX(fecha_registro)) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr
                               WHERE        (idTramite = tr.idTramite) AND (Secuencia = tr.Secuencia)) AS fecha_registro,
                             (SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                         dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'RC') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)) AS fecha_recepcion, DATEDIFF(dd,
                             (SELECT        CONVERT(date, MAX(fecha_registro)) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr
                               WHERE        (idTramite = tr.idTramite) AND (Secuencia = tr.Secuencia)),
                             (SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                         dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'RC') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia))) AS tdias1,
                             (SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                         dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'OB') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)) AS fecha_ultimaObservacion,
                             (SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                         dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'CR') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)) AS fecha_ultimaCorreccion, DATEDIFF(dd,
                             (SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                         dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'OB') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)),
                             (SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                         dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'CR') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia))) AS tdias2,
                             (SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                         dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'AP') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)) AS fecha_aprobacion_legal, CASE WHEN
                             (SELECT        CONVERT(date, MAX(l.Fecha))
                               FROM            LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                               WHERE        l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'AP' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia)
                         != '' THEN CASE WHEN
                             (SELECT        CONVERT(date, MAX(l.Fecha))
                               FROM            LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                               WHERE        l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'CR' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia)
                         != '' THEN DATEDIFF(dd,
                             (SELECT        CONVERT(date, MAX(l.Fecha))
                         FROM            LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                               WHERE        l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'CR' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia),
                             (SELECT        CONVERT(date, MAX(l.Fecha))
                               FROM            LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                               WHERE        l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'AP' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia))
                         ELSE DATEDIFF(dd,
                             (SELECT        CONVERT(date, MAX(l.Fecha))
                               FROM            LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                               WHERE        l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'RC' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia),
                             (SELECT        CONVERT(date, MAX(l.Fecha))
                               FROM            LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                               WHERE        l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'AP' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia))
                         END ELSE NULL END AS tdias3,
                             (SELECT        CONVERT(date, MAX(Fecha_Aprobacion)) AS Expr1
                               FROM            dbo.Observacion_Tramite_Sistemas AS l
                               WHERE        (idTramite = tr.idTramite)) AS fecha_aprobacion_sistemas, DATEDIFF(dd,
                             (SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                         dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'AP') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)),
                             (SELECT        CONVERT(date, MAX(Fecha_Aprobacion)) AS Expr1
                               FROM            dbo.Observacion_Tramite_Sistemas AS l
                               WHERE        (idTramite = tr.idTramite))) AS tdias4,
                             (SELECT        CONVERT(date, MAX(Fecha_Archivado)) AS Expr1
                               FROM            dbo.tObservacionTramite_Archivo AS l
                               WHERE        (idTramite = tr.idTramite)) AS fecha_archivado, DATEDIFF(dd,
                             (SELECT        CONVERT(date, MAX(Fecha_Aprobacion)) AS Expr1
                               FROM            dbo.Observacion_Tramite_Sistemas AS l
                               WHERE        (idTramite = tr.idTramite)),
                             (SELECT        CONVERT(date, MAX(Fecha_Archivado)) AS Expr1
                               FROM            dbo.tObservacionTramite_Archivo AS l
                               WHERE        (idTramite = tr.idTramite))) AS tdias5, CASE WHEN tr.Estado_Tramite = 'AJ' THEN CASE WHEN
                             (SELECT DISTINCT 1
                               FROM            LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                               WHERE        l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'AP' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia)
                         = 1 THEN 'APROBADO SOLO SUJETO OBLIGADO ÁREA JURÍDICA' ELSE 'TRAMITE PENDIENTE' END ELSE CASE WHEN tr.Estado_Tramite = 'AP' THEN 'APROBADO ÁREA JURÍDICA'
                          ELSE CASE WHEN tr.Estado_tramite = 'AR' THEN 'APROBADO ÁREA SISTEMAS' ELSE CASE WHEN TR.Estado_tramite = 'AH' THEN 'TRÁMITE ARCHIVADO' ELSE CASE
                          WHEN tr.Estado_Tramite = 'OB' THEN 'TRÁMITE OBSERVADO' ELSE 'TRÁMITE TERMINADO' END END END END END AS ESTADO_TRAMITE
FROM            dbo.tTramite AS tr INNER JOIN
                         dbo.tEntidad AS e ON tr.idEntidad = e.idEntidad INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI')

and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
--where idtramite in (1362,9994)

where idfuncionario is not null
--and estado='TE'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
--where idtramite in (1362,9994)

where idfuncionario is  null
--and estado='TE'
group by idEntidad)))</CODE>
</VIEW>
<VIEW>
<NAME>view_documentos_observados_AC</NAME>
<ID>118</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT        r.idRegistro_Requisito, p.DESCRIPCION, r.nro_documento, r.fecha_documento, r.imagen, r.idEntidad, r.idFuncionario, l.Observacion AS observaciones,
                         r.idTramite
FROM            dbo.REGISTRO_REQUISITO AS r , dbo.PARAM_REQUISITOS_SO AS p ,LOG_REGISTRO_REQUISITO l
WHERE        (r.ESTADO = 'OB') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tFuncionario AS f
                               WHERE        (f.idFuncionario = r.idFuncionario) AND (f.TIPO_FUNCIONARIO = 'AC'))
							   and r.idParam = p.idParam
and r.idRegistro_Requisito=l.idRegistro_Requisito
and l.Operacion='OB'
and l.idLogRegistro_Requisito=(select max(l1.idLogRegistro_Requisito) from LOG_REGISTRO_REQUISITO l1 where r.idRegistro_Requisito=l1.idRegistro_Requisito and l1.Operacion='OB')</CODE>
</VIEW>
<VIEW>
<NAME>view_listar_tiempos_registroANTERIORJP</NAME>
<ID>119</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT tr.idTramite_Secuencia, tr.idTramite, tr.Secuencia, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = tr.idTramite AND rr1.Secuencia = tr.Secuencia) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = tr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = tr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = tr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = tr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          (SELECT     CONVERT(date, MAX(fecha_registro)) AS Expr1
                            FROM          dbo.REGISTRO_REQUISITO AS rr
                            WHERE      (idTramite = tr.idTramite) AND (Secuencia = tr.Secuencia)) AS fecha_registro,
                          (SELECT     CONVERT(date, MAX(l.Fecha)) AS Expr1
                            FROM          dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                   dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                            WHERE      (l.Operacion = 'RC') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)) AS fecha_recepcion, DATEDIFF(dd,
                          (SELECT     CONVERT(date, MAX(fecha_registro)) AS Expr1
                            FROM          dbo.REGISTRO_REQUISITO AS rr
                            WHERE      (idTramite = tr.idTramite) AND (Secuencia = tr.Secuencia)),
                          (SELECT     CONVERT(date, MAX(l.Fecha)) AS Expr1
                            FROM          dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                   dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                            WHERE      (l.Operacion = 'RC') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia))) AS tdias1,
                          (SELECT     CONVERT(date, MAX(l.Fecha)) AS Expr1
                            FROM          dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                   dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                            WHERE      (l.Operacion = 'OB') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)) AS fecha_ultimaObservacion,
                          (SELECT     CONVERT(date, MAX(l.Fecha)) AS Expr1
                            FROM          dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                   dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                            WHERE      (l.Operacion = 'CR') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)) AS fecha_ultimaCorreccion, DATEDIFF(dd,
                          (SELECT     CONVERT(date, MAX(l.Fecha)) AS Expr1
                            FROM          dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                   dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                            WHERE      (l.Operacion = 'OB') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)),
                          (SELECT     CONVERT(date, MAX(l.Fecha)) AS Expr1
                            FROM          dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                   dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                            WHERE      (l.Operacion = 'CR') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia))) AS tdias2,
                          (SELECT     CONVERT(date, MAX(l.Fecha)) AS Expr1
                            FROM          dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                   dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                            WHERE      (l.Operacion = 'AP') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)) AS fecha_aprobacion_legal, CASE WHEN
                          (SELECT     CONVERT(date, MAX(l.Fecha))
                            FROM          LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                            WHERE      l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'AP' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia)
                      != '' THEN CASE WHEN
                          (SELECT     CONVERT(date, MAX(l.Fecha))
                            FROM          LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                            WHERE      l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'CR' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia)
                      != '' THEN DATEDIFF(dd,
                          (SELECT     CONVERT(date, MAX(l.Fecha))
                            FROM          LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                            WHERE      l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'CR' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia),
                          (SELECT     CONVERT(date, MAX(l.Fecha))
                            FROM          LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                            WHERE      l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'AP' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia))
                      ELSE DATEDIFF(dd,
                          (SELECT     CONVERT(date, MAX(l.Fecha))
                            FROM          LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                            WHERE      l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'RC' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia),
                          (SELECT     CONVERT(date, MAX(l.Fecha))
                            FROM          LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                            WHERE      l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'AP' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia)) END ELSE NULL
                       END AS tdias3,
                          (SELECT     CONVERT(date, MAX(Fecha_Aprobacion)) AS Expr1
                            FROM          dbo.Observacion_Tramite_Sistemas AS l
                            WHERE      (idTramite = tr.idTramite)) AS fecha_aprobacion_sistemas, DATEDIFF(dd,
                          (SELECT     CONVERT(date, MAX(l.Fecha)) AS Expr1
                            FROM          dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                   dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                            WHERE      (l.Operacion = 'AP') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)),
                          (SELECT     CONVERT(date, MAX(Fecha_Aprobacion)) AS Expr1
                            FROM          dbo.Observacion_Tramite_Sistemas AS l
            WHERE      (idTramite = tr.idTramite))) AS tdias4,
                          (SELECT     CONVERT(date, MAX(Fecha_Archivado)) AS Expr1
                            FROM          dbo.tObservacionTramite_Archivo AS l
                            WHERE      (idTramite = tr.idTramite)) AS fecha_archivado, DATEDIFF(dd,
                          (SELECT     CONVERT(date, MAX(Fecha_Aprobacion)) AS Expr1
                            FROM          dbo.Observacion_Tramite_Sistemas AS l
                            WHERE      (idTramite = tr.idTramite)),
                          (SELECT     CONVERT(date, MAX(Fecha_Archivado)) AS Expr1
                            FROM          dbo.tObservacionTramite_Archivo AS l
                            WHERE      (idTramite = tr.idTramite))) AS tdias5, CASE WHEN tr.Estado_Tramite = 'AJ' THEN CASE WHEN
                          (SELECT DISTINCT 1
                            FROM          LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                            WHERE      l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'AP' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia)
                      = 1 THEN 'APROBADO SOLO SUJETO OBLIGADO ÁREA JURÍDICA' ELSE 'TRAMITE PENDIENTE' END ELSE CASE WHEN tr.Estado_Tramite = 'AP' THEN 'APROBADO ÁREA JURÍDICA'
                       ELSE CASE WHEN tr.Estado_tramite = 'AR' THEN 'APROBADO ÁREA SISTEMAS' ELSE CASE WHEN TR.Estado_tramite = 'AH' THEN 'TRÁMITE ARCHIVADO' ELSE CASE
                       WHEN tr.Estado_Tramite = 'OB' THEN 'TRÁMITE OBSERVADO' ELSE 'TRÁMITE TERMINADO' END END END END END AS ESTADO_TRAMITE
FROM         dbo.tTramite AS tr INNER JOIN
                      dbo.tEntidad AS e ON tr.idEntidad = e.idEntidad INNER JOIN
                      dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica
WHERE     (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI')</CODE>
</VIEW>
<VIEW>
<NAME>view_documentos_observados_FR</NAME>
<ID>120</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT        r.idRegistro_Requisito, p.DESCRIPCION, r.nro_documento, r.fecha_documento, r.imagen, r.idEntidad, r.idFuncionario, l.Observacion AS observaciones,
                         r.idTramite
FROM            dbo.REGISTRO_REQUISITO AS r , dbo.PARAM_REQUISITOS_SO AS p ,LOG_REGISTRO_REQUISITO l
WHERE        (r.ESTADO = 'OB') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tFuncionario AS f
                               WHERE        (f.idFuncionario = r.idFuncionario) AND (f.TIPO_FUNCIONARIO = 'FR'))
							   and r.idParam = p.idParam
and r.idRegistro_Requisito=l.idRegistro_Requisito
and l.Operacion='OB'
and l.idLogRegistro_Requisito=(select max(l1.idLogRegistro_Requisito) from LOG_REGISTRO_REQUISITO l1 where r.idRegistro_Requisito=l1.idRegistro_Requisito and l1.Operacion='OB')</CODE>
</VIEW>
<VIEW>
<NAME>view_documentos_observados_SO</NAME>
<ID>121</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
select
r.idRegistro_Requisito, p.DESCRIPCION, r.nro_documento, r.fecha_documento, r.imagen, r.idEntidad, r.idFuncionario, p.COD_PARAM, l.Observacion AS observaciones,
                         r.idTramite from
REGISTRO_REQUISITO r, PARAM_REQUISITOS_SO p,LOG_REGISTRO_REQUISITO l
where r.idParam = p.idParam
and  (r.ESTADO = 'OB') AND (p.COD_PARAM = 'SO')
and r.idRegistro_Requisito=l.idRegistro_Requisito
and l.Operacion='OB'
and l.idLogRegistro_Requisito=(select max(l1.idLogRegistro_Requisito) from LOG_REGISTRO_REQUISITO l1 where r.idRegistro_Requisito=l1.idRegistro_Requisito and l1.Operacion='OB')</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivados_ConNombresANTERIOR</NAME>
<ID>122</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT        fun.idFuncionario, tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO,
                         e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO,
                         e.OBSERVACIONES, e.CODIGO_VERIFICADOR, rr.fecha_registro, e.nusuario, 'APROBADO' AS ESTADO, '' AS Detalle, tta.Observacion,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN CASE WHEN TC.idTramite_Secuencia IS NULL
                         THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END ELSE CASE WHEN TC.idTramite_Secuencia IS NULL
                         THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO' ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO' END END END ELSE CASE WHEN
                             (SELECT        COUNT(te.idEntidad)
                               FROM            tEntidad AS te
                               WHERE        te.idEntidad IN
                                                             (SELECT        teh.idEntidad
                                                               FROM            tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad)
                         &gt; 0 THEN 'RENOVACION DE SUJETO OBLIGADO' ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE, tta.Fecha_Archivado,
                         fun.PN_NOMBRE + ' ' + fun.PN_PATERNO + ' ' + fun.PN_MATERNO AS nombre_funcionario, tta.Observacion AS nro_sicod
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad LEFT OUTER JOIN
                         dbo.tFuncionario AS fun ON rr.idFuncionario = fun.idFuncionario INNER JOIN
                         dbo.tObservacionTramite_Archivo AS tta ON rr.idTramite = tta.idTramite INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad AND tta.Secuencia = tr.Secuencia AND tr.idTramite = tta.idTramite AND rr.Secuencia = tr.Secuencia LEFT OUTER JOIN
                         dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'TE') AND (rr.idRegistro_Requisito =
                             (SELECT        MIN(idRegistro_Requisito) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr1
                               WHERE        (idEntidad = rr.idEntidad) AND (idTramite = rr.idTramite) AND (ESTADO = 'TE') AND (Secuencia = rr.Secuencia))) AND (tr.idTramite IN
                             (SELECT        MAX(idTramite) AS idtrammite
                               FROM            dbo.REGISTRO_REQUISITO
                               WHERE        (idFuncionario IS NOT NULL)
							  -- AND (ESTADO = 'TE'
							   --)
                               GROUP BY idFuncionario) OR
                         tr.idTramite IN
                             (SELECT        MAX(idTramite) AS idtrammite
                               FROM            dbo.REGISTRO_REQUISITO
                               WHERE        (idFuncionario IS NULL)
							  -- AND (ESTADO = 'TE'
							  -- )
                               GROUP BY idEntidad))

							and rr.ESTADO='TE'</CODE>
</VIEW>
<VIEW>
<NAME>view_entidad_all</NAME>
<ID>123</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT        e.idEntidad, e.SUJETO_OBLIGADO, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.TIPO_EMPRESA, e.NIT, e.CODIGO_VERIFICADOR, e.NOMBRE_REPRESENTANTE,
                         e.OFCEN_DEPARTAMENTO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.CORREO_ELECTRONICO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica
WHERE        (e.ESTADO_IMPRESION = 'SI') AND (e.ESTADO is null)</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivados_ConNombresANTERIORJP</NAME>
<ID>124</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
SELECT        tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE,
                         c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
                         rr.fecha_registro, e.nusuario, 'APROBADO' AS ESTADO, '' AS Detalle, tta.Observacion,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          tta.Fecha_Archivado,(fun.PN_NOMBRE+ ' '+fun.PN_PATERNO+' '+fun.PN_MATERNO) as nombre_funcionario,tta.Observacion nro_sicod
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad left outer JOIN
						 dbo.tFuncionario as fun on rr.idFuncionario=fun.idFuncionario inner join
                         dbo.tObservacionTramite_Archivo AS tta ON rr.idTramite = tta.idTramite INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad AND tta.Secuencia = tr.Secuencia AND tr.idTramite = tta.idTramite AND rr.Secuencia = tr.Secuencia
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'TE') AND (rr.idRegistro_Requisito =
                             (SELECT        MIN(idRegistro_Requisito) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr1
                               WHERE        (idEntidad = rr.idEntidad) AND (idTramite = rr.idTramite) AND (ESTADO = 'TE') AND (Secuencia = rr.Secuencia)))</CODE>
</VIEW>
<VIEW>
<NAME>view_entidad_detallado</NAME>
<ID>125</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        e.idEntidad, e.SUJETO_OBLIGADO, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.TIPO_EMPRESA, e.NIT, e.CODIGO_VERIFICADOR, e.NOMBRE_REPRESENTANTE,
                         e.OFCEN_DEPARTAMENTO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.CORREO_ELECTRONICO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica
WHERE        (e.ESTADO_IMPRESION = 'SI') AND (e.ESTADO = 'AC')</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivados_observados_ConNombresANTERIOR</NAME>
<ID>126</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as

SELECT        tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE,
                         c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
                         rr.fecha_registro, e.nusuario, 'APROBADO' AS ESTADO, '' AS Detalle, tta.Observacion,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1

						THEN CASE WHEN TC.idTramite_Secuencia IS NULL
                         THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END ELSE CASE WHEN TC.idTramite_Secuencia IS NULL
                         THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO' ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO' END END END ELSE CASE WHEN
                             (SELECT        COUNT(te.idEntidad)
                               FROM            tEntidad AS te
                               WHERE        te.idEntidad IN
                                                             (SELECT        teh.idEntidad
                                                               FROM            tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad)
                         &gt; 0 THEN 'RENOVACION DE SUJETO OBLIGADO' ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE,
                          tta.Fecha_Archivado,(fun.PN_NOMBRE+ ' '+fun.PN_PATERNO+' '+fun.PN_MATERNO) as nombre_funcionario,tta.Observacion nro_sicod
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad left outer JOIN
						 dbo.tFuncionario as fun on rr.idFuncionario=fun.idFuncionario inner join
                         dbo.tObservacionTramite_Archivo AS tta ON rr.idTramite = tta.idTramite INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad AND tta.Secuencia = tr.Secuencia AND tr.idTramite = tta.idTramite AND rr.Secuencia = tr.Secuencia

						 LEFT OUTER JOIN
                         dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'TE') AND (rr.idRegistro_Requisito =
                             (SELECT        MIN(idRegistro_Requisito) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr1
                               WHERE        (idEntidad = rr.idEntidad) AND (idTramite = rr.idTramite) AND (ESTADO = 'TE') AND (Secuencia = rr.Secuencia))) AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS lrr1
                               WHERE        (idRegistro_Requisito = rr.idRegistro_Requisito) AND (Operacion = 'OB'))
							   AND (tr.idTramite IN
                             (SELECT        MAX(idTramite) AS idtrammite
                               FROM            dbo.REGISTRO_REQUISITO
                               WHERE        (idFuncionario IS NOT NULL)
							  -- AND (ESTADO = 'TE'
							   --)
                               GROUP BY idFuncionario) OR
                         tr.idTramite IN
                             (SELECT        MAX(idTramite) AS idtrammite
                               FROM            dbo.REGISTRO_REQUISITO
                               WHERE        (idFuncionario IS NULL)
							  -- AND (ESTADO = 'TE'
							  -- )
                               GROUP BY idEntidad))

							and rr.ESTADO='TE'</CODE>
</VIEW>
<VIEW>
<NAME>view_entidad_detallado_baja</NAME>
<ID>127</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT        e.idEntidad, e.SUJETO_OBLIGADO, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.TIPO_EMPRESA, e.NIT, e.CODIGO_VERIFICADOR, e.NOMBRE_REPRESENTANTE,
                         e.OFCEN_DEPARTAMENTO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.CORREO_ELECTRONICO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica
WHERE        (e.ESTADO_IMPRESION = 'SI') AND (e.ESTADO = 'BA')</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivados_observados_ConNombresANTERIORJP</NAME>
<ID>128</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
SELECT        tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE,
                         c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
                         rr.fecha_registro, e.nusuario, 'APROBADO' AS ESTADO, '' AS Detalle, tta.Observacion,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          tta.Fecha_Archivado,(fun.PN_NOMBRE+ ' '+fun.PN_PATERNO+' '+fun.PN_MATERNO) as nombre_funcionario,tta.Observacion nro_sicod
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad left outer JOIN
						 dbo.tFuncionario as fun on rr.idFuncionario=fun.idFuncionario inner join
                         dbo.tObservacionTramite_Archivo AS tta ON rr.idTramite = tta.idTramite INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad AND tta.Secuencia = tr.Secuencia AND tr.idTramite = tta.idTramite AND rr.Secuencia = tr.Secuencia
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'TE') AND (rr.idRegistro_Requisito =
                             (SELECT        MIN(idRegistro_Requisito) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr1
                               WHERE        (idEntidad = rr.idEntidad) AND (idTramite = rr.idTramite) AND (ESTADO = 'TE') AND (Secuencia = rr.Secuencia))) AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS lrr1
                               WHERE        (idRegistro_Requisito = rr.idRegistro_Requisito) AND (Operacion = 'OB'))</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_procesados_archivoANTERIOR</NAME>
<ID>129</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>--view_tramites_procesados_archivo

create view %viewname%
as
SELECT DISTINCT
                         tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'NO PROCESADO' estado,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1
						-- THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO'

						  THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END

						  END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario

from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite
LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia

--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI'
AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							   --AND e.idActividadEconomica = ae.idActividadEconomica
							   AND TR.Estado_DU = 'U'
							   AND tr.Estado_Tramite = 'AR'
							  -- AND tr.idTramite = rr.idTramite

							  and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
--and estado='AR'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
--and estado='AR'
group by idEntidad)))

and rr.estado='AR'
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO,
                         e.NIT, ae.nombre, 'NO PROCESADO' estado, CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1
						-- THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO'

						  THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END

						 END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite
LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							  -- AND e.idActividadEconomica = ae.idActividadEconomica
							   AND TR.Estado_DU = 'D'
							   AND tr.Estado_Tramite = 'AR'
							   --AND  tr.idTramite = rr.idTramite
						 AND tr.Secuencia = rr.Secuencia

						 and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
--and estado='AR'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
--and estado='AR'
group by idEntidad)))

and rr.estado='AR'
UNION
SELECT DISTINCT tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite,
                             (SELECT        max(Fecha_Archivado)
                               FROM            tObservacionTramite_Archivo ota
                               WHERE        ota.idTramite = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'ARCHIVADO' estado, CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1
						-- THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO'

						  THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END

						 END AS TIPO_TRAMITE,
                          ' ' AS usuario
from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite
LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
 --AND e.idEntidad = tr.idEntidad
 AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							  -- AND e.idActividadEconomica = ae.idActividadEconomica
							   AND TR.Estado_DU = 'U'
							   AND tr.Estado_Tramite = 'TE'
							   --AND tr.idTramite = rr.idTramite
							   and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
--and estado='TE'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
--and estado='TE'
group by idEntidad)))
and rr.estado='TE'
UNION
SELECT DISTINCT tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite,
                             (SELECT        max(Fecha_Archivado)
                               FROM            tObservacionTramite_Archivo ota
                               WHERE        ota.idTramite = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'ARCHIVADO' estado, CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1
						 --THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO'

						 THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END
						 END AS TIPO_TRAMITE,
                          ' ' AS usuario
from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite
LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							  -- AND e.idActividadEconomica = ae.idActividadEconomica
							   AND TR.Estado_DU = 'D'
							   AND tr.Estado_Tramite = 'TE'
							   --AND tr.idTramite = rr.idTramite
							   AND tr.Secuencia = rr.Secuencia

							   and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
--and estado='TE'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
--and estado='TE'
group by idEntidad)))

and rr.estado='TE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite
LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
--FROM          tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							   --AND e.idActividadEconomica = ae.idActividadEconomica
							   AND tr.Estado_Tramite = 'AR'
							   --AND tr.idTramite = c.idTramite

and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
--and estado='TE'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
--and estado='TE'
group by idEntidad)))

and rr.estado='AR'

UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'ARCHIVADO' estado,
                         'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, 'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, BF.fecha_archivado fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'ARCHIVADO' estado, 'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, 'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, BF.fecha_archivado fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'ARCHIVADO' estado, 'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'</CODE>
</VIEW>
<VIEW>
<NAME>view_listar_AC_tramite</NAME>
<ID>130</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as

SELECT DISTINCT
                         f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE,
						 f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                         P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO,
						  f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                         f.OBSERVACIONES, f.idEntidad, tr.idTramite, f.Observacion_subsanada,
						 (CASE WHEN EXISTS
                             (SELECT        *
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idFuncionario = rr.idFuncionario AND rr1.ESTADO = 'OB')
							   THEN 'OBSERVADO'
							   WHEN EXISTS
                             (SELECT        *
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idFuncionario = rr.idFuncionario AND rr1.ESTADO = 'AP')
							   THEN 'APROBADO' ELSE 'PENDIENTE' END) AS ESTADO
FROM            dbo.tFuncionario AS f INNER JOIN
                         dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                         dbo.tPais AS P ON f.idPais = P.idPais INNER JOIN
                         dbo.tTramite AS tr ON f.idEntidad = tr.idEntidad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON tr.idTramite = rr.idTramite
						 AND f.idFuncionario = rr.idFuncionario INNER JOIN
                         dbo.tEstado AS est ON rr.ESTADO = est.Estado_Tramite
                         LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE        (f.TIPO_FUNCIONARIO = 'AC')

AND (rr.idRegistro_Requisito =
                             (SELECT        MIN(idRegistro_Requisito) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO
                               WHERE        (idFuncionario = rr.idFuncionario and idTramite = tr.idTramite )))
AND (tr.Estado_Tramite &lt;&gt; 'AP') AND EXISTS
   (SELECT        1 AS Expr1
    FROM            dbo.REGISTRO_REQUISITO AS rr
    WHERE        (idTramite = tr.idTramite) AND (idFuncionario = f.idFuncionario))

--and tr.idTramite=2532</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_procesados_archivoANTERIORJP</NAME>
<ID>131</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT DISTINCT
                         tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, null fecha_aprobacion , e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'NO PROCESADO' estado,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AR' AND
                         tr.idTramite = rr.idTramite
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, null fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT,
                         ae.nombre, 'NO PROCESADO' estado,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'AR' AND
                         tr.idTramite = rr.idTramite and tr.Secuencia=rr.Secuencia
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, (select max(Fecha_Archivado) from tObservacionTramite_Archivo ota where ota.idTramite=tr.idTramite) as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'ARCHIVADO' estado,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'TE' AND
                         tr.idTramite = rr.idTramite
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, (select max(Fecha_Archivado) from tObservacionTramite_Archivo ota where ota.idTramite=tr.idTramite) as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT,
                         ae.nombre, 'ARCHIVADO' estado,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE, ' ' AS usuario
FROM tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'TE' AND
                         tr.idTramite = rr.idTramite and tr.Secuencia=rr.Secuencia
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'ARCHIVADO' estado, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, 'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, BF.fecha_archivado fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'ARCHIVADO' estado, 'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, 'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, BF.fecha_archivado fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'ARCHIVADO' estado, 'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'</CODE>
</VIEW>
<VIEW>
<NAME>view_listar_observados_AC</NAME>
<ID>132</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        en.idFuncionario, en.idEntidad, rr.idTramite, en.PN_NOMBRE + ' ' + en.PN_PATERNO + ' ' + en.PN_MATERNO AS nombre, prs.DESCRIPCION,
                         lrr.Observacion AS observaciones
FROM            dbo.REGISTRO_REQUISITO AS rr INNER JOIN
                         dbo.tFuncionario AS en ON rr.idEntidad = en.idEntidad AND rr.idFuncionario = en.idFuncionario INNER JOIN
                         dbo.PARAM_REQUISITOS_SO AS prs ON rr.idParam = prs.idParam INNER JOIN
                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr.idRegistro_Requisito = lrr.idRegistro_Requisito
WHERE        (rr.ESTADO = 'OB') AND (en.TIPO_FUNCIONARIO = 'AC') AND (rr.idParam &gt;= 7) AND (lrr.Operacion = 'OB') AND (lrr.idLogRegistro_Requisito =
                             (SELECT        MAX(idLogRegistro_Requisito) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS lrr1
                               WHERE        (idRegistro_Requisito = lrr.idRegistro_Requisito) AND (Operacion = 'OB')))</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_procesados_arealegalANTERIOR</NAME>
<ID>133</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>-- select * FROM view_tramites_procesados_arealegal --- Reporte de Tramites Procesados por el Area Legal
--drop view view_tramites_procesados_arealegal
create view %viewname%
as
SELECT DISTINCT
tr.idTramite_Secuencia,
CONVERT(nvarchar, tr.idTramite) nro_tramite,
NULL AS fecha_aprobacion,
e.SUJETO_OBLIGADO,
e.NIT, ae.nombre,
'NO PROCESADO' estado,
 (SELECT DISTINCT lrr.nusuario
  FROM dbo.REGISTRO_REQUISITO AS rr1
  INNER JOIN dbo.LOG_REGISTRO_REQUISITO AS lrr
  ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
  WHERE        (rr1.idTramite = rr.idTramite)
  AND (rr1.Secuencia = rr.Secuencia)
  AND (lrr.Operacion = 'OB')) AS usuariolegal,
  tr.Observacion_subsanada,
  CASE WHEN (SELECT MAX(idParam)
             FROM  REGISTRO_REQUISITO rr1
             WHERE  rr1.idTramite = rr.idTramite
			 AND (rr1.Secuencia = rr.Secuencia)) = 9
			 THEN
			      CASE WHEN
                       (SELECT rr1.idParam
                        FROM REGISTRO_REQUISITO rr1
                        WHERE rr1.idTramite = rr.idTramite
						AND rr1.idParam = 5
						AND (rr1.Secuencia = rr.Secuencia)) = 5
						THEN 'REGISTRO DE SUJETO OBLIGADO Y FR'
						ELSE
						         CASE WHEN (SELECT DISTINCT (1)
                                   FROM REGISTRO_REQUISITO rr1, tFuncionario t1
                                   WHERE rr1.idTramite = rr.idTramite
								   AND rr1.idFuncionario = t1.idFuncionario
								   AND t1.TIPO_FUNCIONARIO = 'FR'
								   AND (rr1.Secuencia = rr.Secuencia)) = 1
								  THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END
	END AS TIPO_TRAMITE,
            (SELECT (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno) AS usuario
              FROM  Users u
               WHERE u.usuarioRol = 'legal'
			   AND estado = 'AC'
			   AND EXISTS (SELECT DISTINCT lrr.nusuario
                           FROM  dbo.REGISTRO_REQUISITO AS rr1
						   INNER JOIN dbo.LOG_REGISTRO_REQUISITO AS lrr
						   ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                            WHERE (rr1.idTramite = rr.idTramite)
							AND (lrr.Operacion= 'OB'))) AS usuario
--FROM   tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia

WHERE e.ESTADO_IMPRESION = 'SI'
AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS (SELECT  1
            FROM  tObservacionMesa_Entrada te
            WHERE  te.idTramite = tr.idTramite)
			--AND e.idActividadEconomica = ae.idActividadEconomica
			AND TR.Estado_DU = 'U'
			AND tr.Estado_Tramite = 'AJ'
			AND NOT EXISTS (SELECT  1
                            FROM  REGISTRO_REQUISITO rr
                            WHERE rr.idTramite = tr.idTramite
							AND rr.ESTADO IN ('OB'))
						--	AND tr.idTramite = rr.idTramite
and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='AJ'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='AJ'
group by idEntidad)))

UNION
SELECT DISTINCT tr.idTramite_Secuencia,
(CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite,
NULL AS fecha_aprobacion,
e.SUJETO_OBLIGADO,
e.NIT,
ae.nombre,
'NO PROCESADO' estado,
(SELECT DISTINCT lrr.nusuario
FROM dbo.REGISTRO_REQUISITO AS rr1
INNER JOIN dbo.LOG_REGISTRO_REQUISITO AS lrr
ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
WHERE (rr1.idTramite = rr.idTramite)
AND (rr1.Secuencia = rr.Secuencia)
AND (lrr.Operacion = 'OB')) AS usuariolegal,
tr.Observacion_subsanada,
CASE WHEN
  (SELECT   MAX(idParam)
   FROM   REGISTRO_REQUISITO rr1
   WHERE rr1.idTramite = rr.idTramite
   AND (rr1.Secuencia = rr.Secuencia)) = 9
   THEN
       CASE WHEN
             (SELECT rr1.idParam
              FROM  REGISTRO_REQUISITO rr1
               WHERE  rr1.idTramite = rr.idTramite AND rr1.idParam = 5
			           AND (rr1.Secuencia = rr.Secuencia)) = 5
		    THEN 'REGISTRO DE SUJETO OBLIGADO Y FR'
			ELSE
			    CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1
					/*THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
					 ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO'
				END
		END
	ELSE 'REGISTRO SUJETO OBLIGADO' */

	THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
      ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END


END AS TIPO_TRAMITE,
      (SELECT (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
        FROM   Users u
        WHERE  u.usuarioRol = 'legal'
		AND estado = 'AC'
		AND EXISTS (SELECT DISTINCT lrr.nusuario
                    FROM dbo.REGISTRO_REQUISITO AS rr1
					INNER JOIN dbo.LOG_REGISTRO_REQUISITO AS lrr
					ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                    WHERE  (rr1.idTramite = rr.idTramite) AND (lrr.Operacion = 'OB'))) AS usuario
from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
--FROM    tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI'
AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS (SELECT  1
            FROM  tObservacionMesa_Entrada te
            WHERE te.idTramite = tr.idTramite)
			--AND e.idActividadEconomica = ae.idActividadEconomica
			AND TR.Estado_DU = 'D'
			AND tr.Estado_Tramite = 'OB'
			AND NOT EXISTS
            (SELECT  1
             FROM REGISTRO_REQUISITO rr
             WHere rr.idTramite = tr.idTramite
			 AND rr.ESTADO IN ('OB'))
			 --AND tr.idTramite = rr.idTramite
			 AND tr.Secuencia = rr.Secuencia

and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='OB'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='OB'
group by idEntidad)))



UNION
SELECT DISTINCT tr.idTramite_Secuencia,
CONVERT(nvarchar, tr.idTramite) nro_tramite,
 (SELECT        max(CONVERT(date, o.fecha))
   FROM            LOG_REGISTRO_REQUISITO o
   WHERE        o.idRegistro_Requisito = rr.idRegistro_Requisito AND Operacion = 'AP') AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
'PROCESADO' estado,
 (SELECT DISTINCT lrr.nusuario
   FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                             dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
   WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
    CASE WHEN
         (SELECT        MAX(idParam)
           FROM            REGISTRO_REQUISITO rr1
           WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9
		 THEN CASE WHEN
                  (SELECT        rr1.idParam
                    FROM            REGISTRO_REQUISITO rr1
                    WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))  = 5
		       THEN 'REGISTRO DE SUJETO OBLIGADO Y FR'
			   ELSE
			       CASE WHEN
                        (SELECT DISTINCT (1)
                          FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                          WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia)) = 1
			        /*THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
					ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO'
					END
				END
		  ELSE 'REGISTRO SUJETO OBLIGADO' */
		  THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END
	END AS TIPO_TRAMITE,
(SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
FROM            Users u
WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario

from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia


--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI'
AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS (SELECT  1
           FROM   tObservacionMesa_Entrada te
            WHERE   te.idTramite = tr.idTramite)
			--AND e.idActividadEconomica = ae.idActividadEconomica
			AND TR.Estado_DU = 'U'
			AND tr.Estado_Tramite = 'AP'
			--AND  tr.idTramite = rr.idTramite

			and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='AP'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='AP'
group by idEntidad)))

UNION
SELECT DISTINCT tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite,
(SELECT        max(CONVERT(date, o.fecha))
  FROM            LOG_REGISTRO_REQUISITO o
  WHERE        o.idRegistro_Requisito = rr.idRegistro_Requisito AND Operacion = 'AP') AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
'PROCESADO' estado,
    (SELECT DISTINCT lrr.nusuario
      FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
      WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
  CASE WHEN
      (SELECT        MAX(idParam)
        FROM            REGISTRO_REQUISITO rr1
        WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9
	THEN
	   CASE WHEN
         (SELECT        rr1.idParam
           FROM            REGISTRO_REQUISITO rr1
          WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))  = 5
	   THEN 'REGISTRO DE SUJETO OBLIGADO Y FR'
	   ELSE
	      CASE WHEN
            (SELECT DISTINCT (1)
             FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
             WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))  = 1
		 /* THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
		  ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO'
		  END
		END
    ELSE 'REGISTRO SUJETO OBLIGADO' */
	THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END
END AS TIPO_TRAMITE,
       (SELECT  (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
        FROM    Users u
        WHERE  u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario

from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
--FROM    tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE   e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
          (SELECT        1
            FROM            tObservacionMesa_Entrada te
            WHERE        te.idTramite = tr.idTramite)
			--AND e.idActividadEconomica = ae.idActividadEconomica
			AND TR.Estado_DU = 'D'
			AND tr.Estado_Tramite = 'AP'
			--AND tr.idTramite = rr.idTramite
			AND tr.Secuencia = rr.Secuencia

and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='AP'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='AP'
group by idEntidad)))
UNION
SELECT DISTINCT tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite,
(SELECT        max(CONVERT(date, o.fecha))
  FROM            LOG_REGISTRO_REQUISITO o
  WHERE        o.idRegistro_Requisito = rr.idRegistro_Requisito AND Operacion = 'AP') AS fecha_aprobacion,
 e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
'PROCESADO' estado,
    (SELECT DISTINCT lrr.nusuario
      FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
      WHERE  (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal,
 tr.Observacion_subsanada,
   CASE WHEN
       (SELECT        MAX(idParam)
         FROM            REGISTRO_REQUISITO rr1
         WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9
   THEN
      CASE WHEN
       (SELECT        rr1.idParam
         FROM            REGISTRO_REQUISITO rr1
         WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))  = 5
	  THEN 'REGISTRO DE SUJETO OBLIGADO Y FR'
	  ELSE
	     CASE WHEN
       (SELECT DISTINCT (1)
         FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
         WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))  = 1
		/* THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO'
		 END
	   END
	ELSE 'REGISTRO SUJETO OBLIGADO' */
	THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END
	END AS TIPO_TRAMITE,
       (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
         FROM            Users u
         WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario

		 from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia

		-- FROM   tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE  e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad
AND EXISTS
           (SELECT        1
             FROM            tObservacionMesa_Entrada te
             WHERE        te.idTramite = tr.idTramite)
			-- AND e.idActividadEconomica = ae.idActividadEconomica
			 AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AR'
			 --AND
            -- tr.idTramite = rr.idTramite

			and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='AR'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='AR'
group by idEntidad)))
UNION
SELECT DISTINCT tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite,
                             (SELECT        max(CONVERT(date, o.fecha))
                               FROM            LOG_REGISTRO_REQUISITO o
                               WHERE        o.idRegistro_Requisito = rr.idRegistro_Requisito AND Operacion = 'AP') AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1
						/* THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
						 ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO'
						 END
						 END
						 ELSE 'REGISTRO SUJETO OBLIGADO' */

						 THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                              THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END

						 END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario

from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia

--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT  1
                               FROM   tObservacionMesa_Entrada te
                               WHERE  te.idTramite = tr.idTramite)
							  -- AND e.idActividadEconomica = ae.idActividadEconomica
							    AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'AR'
								-- AND
                        -- tr.idTramite = rr.idTramite
						 AND tr.Secuencia = rr.Secuencia
and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='AR'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='AR'
group by idEntidad)))

UNION
SELECT DISTINCT tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite,
                             (SELECT        max(CONVERT(date, o.fecha))
                               FROM            LOG_REGISTRO_REQUISITO o
                               WHERE        o.idRegistro_Requisito = rr.idRegistro_Requisito AND Operacion = 'AP') AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT   rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1
						/* THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
						 ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO'
						 END END ELSE 'REGISTRO SUJETO OBLIGADO' */
						 THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END

						 END AS TIPO_TRAMITE,
                          ' ' AS usuario

from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia

--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
 AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							 --  AND e.idActividadEconomica = ae.idActividadEconomica
							    AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'TE'
								--AND  tr.idTramite = rr.idTramite

and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='TE'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='TE'
group by idEntidad)))
UNION
SELECT DISTINCT tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite,
                             (SELECT        max(CONVERT(date, o.fecha))
                               FROM            LOG_REGISTRO_REQUISITO o
                               WHERE        o.idRegistro_Requisito = rr.idRegistro_Requisito AND Operacion = 'AP') AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1
						 /*THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
						 ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO'
						 END
						 END
						 ELSE 'REGISTRO SUJETO OBLIGADO' */
						 THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END

						 END AS TIPO_TRAMITE,
             ' ' AS usuario

from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							   --AND e.idActividadEconomica = ae.idActividadEconomica
							   AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'TE'
							  -- AND tr.idTramite = rr.idTramite
						 AND tr.Secuencia = rr.Secuencia

and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='TE'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='TE'
group by idEntidad)))
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'legal' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AJ' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AP' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada, 'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'legal' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AJ' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite,
                             (SELECT        bf.fecha_aprobacion_juridica
                               FROM            tBajaFuncionario bf
                               WHERE        bf.idTramiteNuevo = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, '' AS usuarioLegal,
                         '' AS Observacion_subsanada, 'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT  tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite,
(SELECT        bf.fecha_aprobacion_juridica
FROM            tBajaFuncionario bf
WHERE        bf.idTramiteNuevo = tr.idTramite) AS fecha_aprobacion,
e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, '' AS usuarioLegal,
'' AS Observacion_subsanada,
'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite,
' ' AS usuario
FROM   tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE  e.ESTADO_IMPRESION = 'SI'
AND e.ESTADO = 'AC'
AND e.idEntidad = tr.idEntidad
AND EXISTS (SELECT  1
            FROM  tObservacionMesa_Entrada te
             WHERE te.idTramite = tr.idTramite)
			 AND e.idActividadEconomica = ae.idActividadEconomica
			 AND tr.Estado_Tramite = 'TE'
			 AND TR.idTramite = BF.idTramiteNuevo
			 AND bf.idLogTrans = lt.idLogTrans
			 AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT  tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
'NO PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada,
'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite,
(SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
 FROM            Users u
WHERE        u.usuarioRol = 'legal' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AJ' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'
UNION
SELECT tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite,
                             (SELECT        bf.fecha_aprobacion_juridica
                               FROM            tBajaFuncionario bf
                               WHERE        bf.idTramiteNuevo = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, '' AS usuarioLegal,
                         '' AS Observacion_subsanada, 'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM   tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE  e.ESTADO_IMPRESION = 'SI'
AND e.ESTADO = 'AC'
AND e.idEntidad = tr.idEntidad
AND EXISTS (SELECT  1
            FROM  tObservacionMesa_Entrada te
            WHERE te.idTramite = tr.idTramite)
			AND e.idActividadEconomica = ae.idActividadEconomica
			AND tr.Estado_Tramite = 'AR'
			AND TR.idTramite = BF.idTramiteNuevo
			AND bf.idLogTrans = lt.idLogTrans
			AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'
UNION
SELECT tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite,
(SELECT  bf.fecha_aprobacion_juridica
FROM    tBajaFuncionario bf
WHERE  bf.idTramiteNuevo = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, '' AS usuarioLegal,
'' AS Observacion_subsanada, 'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite, ' ' AS usuario
FROM   tEntidad e,
tTramite tr,
tActividadEconomica ae,
tBajaFuncionario BF,
LogsTrans lt
WHERE  e.ESTADO_IMPRESION = 'SI'
AND e.ESTADO = 'AC'
AND e.idEntidad = tr.idEntidad
AND EXISTS (SELECT 1
FROM  tObservacionMesa_Entrada te
 WHERE  te.idTramite = tr.idTramite)
 AND e.idActividadEconomica = ae.idActividadEconomica
 AND tr.Estado_Tramite = 'TE'
 AND TR.idTramite = BF.idTramiteNuevo
 AND bf.idLogTrans = lt.idLogTrans
 AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'</CODE>
</VIEW>
<VIEW>
<NAME>view_listar_observados_FR</NAME>
<ID>134</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        en.idEntidad, rr.idTramite, en.PN_NOMBRE + ' ' + en.PN_PATERNO + ' ' + en.PN_MATERNO AS nombre, prs.DESCRIPCION, lrr.Observacion AS observaciones
FROM            dbo.REGISTRO_REQUISITO AS rr INNER JOIN
                         dbo.tFuncionario AS en ON rr.idEntidad = en.idEntidad AND rr.idFuncionario = en.idFuncionario INNER JOIN
                         dbo.PARAM_REQUISITOS_SO AS prs ON rr.idParam = prs.idParam INNER JOIN
                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr.idRegistro_Requisito = lrr.idRegistro_Requisito
--WHERE        (rr.ESTADO = 'OB') AND (en.TIPO_FUNCIONARIO = 'FR') AND (rr.idParam &gt;= 7) AND (lrr.Operacion = 'OB') AND (lrr.idLogRegistro_Requisito =
WHERE        (rr.ESTADO = 'OB') AND (en.TIPO_FUNCIONARIO = 'FR') AND (rr.idParam &gt;= 7 AND rr.idParam != 10 AND rr.idParam != 12 AND rr.idParam != 13) AND (lrr.Operacion = 'OB') AND (lrr.idLogRegistro_Requisito =
                             (SELECT        MAX(idLogRegistro_Requisito) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS lrr1
                               WHERE        (idRegistro_Requisito = lrr.idRegistro_Requisito) AND (Operacion = 'OB')))</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_procesados_arealegalANTERIORJP</NAME>
<ID>135</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT DISTINCT
                         tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, null as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'NO PROCESADO' estado,
                         (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno) AS usuario
                               FROM            Users u
                               WHERE        u.usuarioRol = 'legal' AND estado = 'AC' AND EXISTS
                                                             (SELECT DISTINCT lrr.nusuario
                                                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                                                               WHERE        (rr1.idTramite = rr.idTramite) AND (lrr.Operacion = 'OB'))) AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AJ' AND
                         NOT EXISTS
                             (SELECT        1
                               FROM            REGISTRO_REQUISITO rr
                               WHERE        rr.idTramite = tr.idTramite AND rr.ESTADO IN ('OB')) AND tr.idTramite = rr.idTramite
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, null as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT,
                         ae.nombre, 'NO PROCESADO' estado, (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'legal' AND estado = 'AC' AND EXISTS
                                                             (SELECT DISTINCT lrr.nusuario
                                                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                                                               WHERE        (rr1.idTramite = rr.idTramite) AND (lrr.Operacion = 'OB'))) AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'OB' AND
                         NOT EXISTS
                             (SELECT        1
                               FROM            REGISTRO_REQUISITO rr
                               WHERE        rr.idTramite = tr.idTramite AND rr.ESTADO IN ('OB')) AND tr.idTramite = rr.idTramite and tr.Secuencia=rr.Secuencia
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, (select max(CONVERT(date,o.fecha)) from LOG_REGISTRO_REQUISITO o where o.idRegistro_Requisito=rr.idRegistro_Requisito and Operacion='AP') as fecha_aprobacion
						 , e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado,
                         (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AP' AND
                         tr.idTramite = rr.idTramite
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, (select max(CONVERT(date,o.fecha)) from LOG_REGISTRO_REQUISITO o where o.idRegistro_Requisito=rr.idRegistro_Requisito and Operacion='AP') as fecha_aprobacion
						 , e.SUJETO_OBLIGADO, e.NIT,
                         ae.nombre, 'PROCESADO' estado, (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'AP' AND
                         tr.idTramite = rr.idTramite and tr.Secuencia=rr.Secuencia
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, (select max(CONVERT(date,o.fecha)) from LOG_REGISTRO_REQUISITO o where o.idRegistro_Requisito=rr.idRegistro_Requisito and Operacion='AP') as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado,
                         (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AR' AND
                         tr.idTramite = rr.idTramite
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, (select max(CONVERT(date,o.fecha)) from LOG_REGISTRO_REQUISITO o where o.idRegistro_Requisito=rr.idRegistro_Requisito and Operacion='AP') as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT,
                         ae.nombre, 'PROCESADO' estado, (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'AR' AND
                         tr.idTramite = rr.idTramite and tr.Secuencia=rr.Secuencia
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, (select max(CONVERT(date,o.fecha)) from LOG_REGISTRO_REQUISITO o where o.idRegistro_Requisito=rr.idRegistro_Requisito and Operacion='AP') as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado,
                         (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTROFUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'TE' AND
                         tr.idTramite = rr.idTramite
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, (select max(CONVERT(date,o.fecha)) from LOG_REGISTRO_REQUISITO o where o.idRegistro_Requisito=rr.idRegistro_Requisito and Operacion='AP') as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT,
                         ae.nombre, 'PROCESADO' estado, (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'TE' AND
                         tr.idTramite = rr.idTramite and tr.Secuencia=rr.Secuencia
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado,'' as usuarioLegal,'' as Observacion_subsanada, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'legal' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO= 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AJ' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado,'' as usuarioLegal,'' as Observacion_subsanada,  'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AP' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado,'' as usuarioLegal,'' as Observacion_subsanada,  'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado, '' as usuarioLegal,'' as Observacion_subsanada, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado,'' as usuarioLegal,'' as Observacion_subsanada,  'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'legal' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AJ' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, (select bf.fecha_aprobacion_juridica from tBajaFuncionario bf where bf.idTramiteNuevo=tr.idTramite) as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado,'' as usuarioLegal,'' as Observacion_subsanada,  'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, (select bf.fecha_aprobacion_juridica from tBajaFuncionario bf where bf.idTramiteNuevo=tr.idTramite) as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado,'' as usuarioLegal,'' as Observacion_subsanada,  'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado,'' as usuarioLegal,'' as Observacion_subsanada,  'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'legal' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AJ' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, (select bf.fecha_aprobacion_juridica from tBajaFuncionario bf where bf.idTramiteNuevo=tr.idTramite) as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado,'' as usuarioLegal,'' as Observacion_subsanada,  'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, (select bf.fecha_aprobacion_juridica from tBajaFuncionario bf where bf.idTramiteNuevo=tr.idTramite) as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado,'' as usuarioLegal,'' as Observacion_subsanada,  'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'</CODE>
</VIEW>
<VIEW>
<NAME>view_listar_observados_SO</NAME>
<ID>136</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        en.idEntidad, rr.idTramite, en.SUJETO_OBLIGADO, prs.DESCRIPCION, lrr.Observacion AS observaciones
FROM            dbo.REGISTRO_REQUISITO AS rr INNER JOIN
                         dbo.tEntidad AS en ON rr.idEntidad = en.idEntidad INNER JOIN
                         dbo.PARAM_REQUISITOS_SO AS prs ON rr.idParam = prs.idParam INNER JOIN
                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr.idRegistro_Requisito = lrr.idRegistro_Requisito
--WHERE        (rr.ESTADO = 'OB') AND (rr.idParam &lt;= 6) AND (lrr.Operacion = 'OB') AND (lrr.idLogRegistro_Requisito =
WHERE        (rr.ESTADO = 'OB') AND (rr.idParam &lt;= 6 OR rr.idParam = 10 OR rr.idParam = 12 OR rr.idParam = 13) AND (lrr.Operacion = 'OB') AND (lrr.idLogRegistro_Requisito =
                             (SELECT        MAX(idLogRegistro_Requisito) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS lrr1
                               WHERE        (idRegistro_Requisito = lrr.idRegistro_Requisito) AND (Operacion = 'OB')))</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_procesados_sistemasANTERIOR</NAME>
<ID>137</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>--view_tramites_procesados_sistemas   Reporte de Tramites Procesados por el Area De Sistemas
create view %viewname%
as
SELECT DISTINCT
                         tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1
						-- THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO'
						 THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END
						 END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite
LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							 --  AND e.idActividadEconomica = ae.idActividadEconomica
							   AND TR.Estado_DU = 'U'
							   AND tr.Estado_Tramite = 'AP'
							   --AND
                        -- tr.idTramite = rr.idTramite
and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='AP'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='AP'
group by idEntidad)))


UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, NULL AS fecha_aprobacion,
                         e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'NO PROCESADO' estado, CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1

						-- THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO'
						 THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                             ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END
						 END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia


--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI'
AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							   --AND e.idActividadEconomica = ae.idActividadEconomica
							   AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'AP'
							  -- AND tr.idTramite = rr.idTramite
							   AND tr.Secuencia = rr.Secuencia
and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='AP'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='AP'
group by idEntidad)))
UNION
SELECT DISTINCT tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite,
                             (SELECT        max(ots.Fecha_Aprobacion)
                               FROM            Observacion_Tramite_Sistemas ots
                               WHERE        ots.idTramite = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1

						-- THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO'
						 THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END
						 END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario

from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia

--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							  -- AND e.idActividadEconomica = ae.idActividadEconomica
							   AND TR.Estado_DU = 'U'
							   AND tr.Estado_Tramite = 'AR'
							  -- AND tr.idTramite = rr.idTramite
and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='AR'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='AR'
group by idEntidad)))

UNION
SELECT DISTINCT tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite,
                             (SELECT        max(ots.Fecha_Aprobacion)
                               FROM            Observacion_Tramite_Sistemas ots
                               WHERE        ots.idTramite = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1

						 --THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO'

						 THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END

						 END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario

from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia


--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							   --AND e.idActividadEconomica = ae.idActividadEconomica
							   AND TR.Estado_DU = 'D'
							   AND tr.Estado_Tramite = 'AR'
							   --AND tr.idTramite = rr.idTramite
							   AND tr.Secuencia = rr.Secuencia
							   and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='AR'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='AR'
group by idEntidad)))
UNION
SELECT DISTINCT tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite,
                             (SELECT        max(ots.Fecha_Aprobacion)
                               FROM            Observacion_Tramite_Sistemas ots
                               WHERE        ots.idTramite = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, CASE WHEN
              (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1
						 --THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO'

						 THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END

						 END AS TIPO_TRAMITE,
                          ' ' AS usuario

						  from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia

--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							  -- AND e.idActividadEconomica = ae.idActividadEconomica
							   AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'TE'
							  -- AND tr.idTramite = rr.idTramite

							  and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='TE'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='TE'
group by idEntidad)))
UNION
SELECT DISTINCT tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite,
                             (SELECT        max(ots.Fecha_Aprobacion)
                               FROM            Observacion_Tramite_Sistemas ots
                               WHERE        ots.idTramite = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1

						-- THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO'
						 THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END
						 END AS TIPO_TRAMITE,
                          ' ' AS usuario
from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia

--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							   --AND e.idActividadEconomica = ae.idActividadEconomica
							   AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'TE'
							   --AND  tr.idTramite = rr.idTramite
						 AND tr.Secuencia = rr.Secuencia

						 and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='TE'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='TE'
group by idEntidad)))
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AP' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado,
                         'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado,
                         'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND tr.idTramite = c.idTramite</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivados_ConNombres1</NAME>
<ID>138</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW [dbo].[view_tramites_archivados_ConNombres] as
SELECT distinct
      --case when tipo='DE SUJETO OBLIGADO Y FR'
	  --then null else vt.[idFuncionario] end as idFuncionario
	  vt.[idFuncionario]
      ,vt.[idEntidad]
      ,vt.[idTramite_Secuencia]
      ,vt.[idTramite]
      ,vt.[SUJETO_OBLIGADO]
      ,vt.[NIT]
      ,vt.[TIPO_SUJETO_OBLIGADO]
      ,vt.[OTRO_TIPO_SO]
      ,vt.[NOMBRE_REPRESENTANTE]
      ,vt.[CIUDAD]
      ,vt.[CORREO_ELECTRONICO]
      ,vt.[OFCEN_ZONA]
      ,vt.[OFCEN_DIRECCION]
      ,vt.[OFCEN_TELEFONO]
      ,vt.[OBSERVACIONES]
      ,vt.[CODIGO_VERIFICADOR]
      ,vt.[nusuario]
      ,vt.[estadoEntidad]
      ,vt.[fecha_registro]
      ,vt.[ESTADO]
	 ,'' AS Detalle
	 ,
	 '' as usuarioLegal
	 ,'' as Observacion_subsanada
      ,vt.[Secuencia]
      ,vt.[Estado_DU]
      ,
	  --case when tipo='DE SUJETO OBLIGADO Y FR'
	  --then null else vt.[nombre_funcionario] end as nombre_funcionario
	  vt.[nombre_funcionario]
      ,vt.[tipoProceso]
      ,vt.[TIPO]
	  ,vt.tipoProceso + ' '+ TIPO as TIPO_TRAMITE
      ,tta.Observacion,tta.Fecha_Archivado ,
	  tta.Observacion AS nro_sicod,
	  vt.TIPO_FUNCIONARIO
FROM v_resumen_traza_requisitos vt
inner join dbo.tObservacionTramite_Archivo AS tta ON vt.idTramite = tta.idTramite
and tta.Secuencia = vt.Secuencia
where
vt.TIPO != 'DADO DE BAJA' AND
vt.estadoEntidad = 'AC' and vt.ESTADO_IMPRESION = 'SI' and vt.ESTADO = 'TE'
and idTramite_Secuencia
in
	(
		SELECT max(vt.idTramite_Secuencia) FROM v_resumen_traza_requisitos vt
		inner join dbo.tObservacionTramite_Archivo AS tta ON vt.idTramite = tta.idTramite
		where  vt.TIPO != 'DADO DE BAJA' AND vt.estadoEntidad = 'AC' and vt.ESTADO_IMPRESION = 'SI' and vt.ESTADO = 'TE'
		--	group by vt.idEntidad, case when vt.tipo='DE SUJETO OBLIGADO Y FR' then 'DE SUJETO OBLIGADO' else vt.tipo end
		and (vt.TIPO_FUNCIONARIO not in ('BA','BC') or vt.TIPO_FUNCIONARIO is null  )
		group by vt.idEntidad, vt.idFuncionario
	)
	--and (vt.TIPO_FUNCIONARIO not in ('BA') or vt.TIPO_FUNCIONARIO is null  )
	and (
	        --  (vt.TIPO='DE SUJETO OBLIGADO Y FR' and vt.[nombre_funcionario] is not null)
		    (vt.TIPO='DE SUJETO OBLIGADO Y FR' and vt.[nombre_funcionario] is  null)
		   or
		   (vt.TIPO!='DE SUJETO OBLIGADO Y FR')
		)
	--and vt.idEntidad=1262
	--and vt.idEntidad=1011
	--and vt.idEntidad=1028
	--and vt.idEntidad=1140
	--and vt.idEntidad=1093
	--and vt.idEntidad=1128
	/*
	SELECT vt.idEntidad, case when vt.tipo='DE SUJETO OBLIGADO Y FR' then 'DE SUJETO OBLIGADO' else vt.tipo end ,
	 max(vt.idTramite_Secuencia) FROM v_resumen_traza_requisitos vt
		inner join dbo.tObservacionTramite_Archivo AS tta ON vt.idTramite = tta.idTramite
		where  vt.TIPO != 'DADO DE BAJA' AND vt.estadoEntidad = 'AC' and vt.ESTADO_IMPRESION = 'SI' and vt.ESTADO = 'TE'
		group by vt.idEntidad, case when vt.tipo='DE SUJETO OBLIGADO Y FR' then 'DE SUJETO OBLIGADO' else vt.tipo end
		having idEntidad=1262
		*/</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_procesados_sistemasANTERIORJP</NAME>
<ID>139</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT DISTINCT
                         tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, null as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'NO PROCESADO' estado,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AP' AND
                         tr.idTramite = rr.idTramite
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, null as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT,
                         ae.nombre, 'NO PROCESADO' estado,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'AP' AND
                         tr.idTramite = rr.idTramite and tr.Secuencia=rr.Secuencia
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, (select max(ots.Fecha_Aprobacion) from Observacion_Tramite_Sistemas ots where ots.idTramite=tr.idTramite) as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AR' AND
                         tr.idTramite = rr.idTramite
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, (select max(ots.Fecha_Aprobacion) from Observacion_Tramite_Sistemas ots where ots.idTramite=tr.idTramite) as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT,
                         ae.nombre, 'PROCESADO' estado,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'AR' AND
                         tr.idTramite = rr.idTramite and tr.Secuencia=rr.Secuencia
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, (select max(ots.Fecha_Aprobacion) from Observacion_Tramite_Sistemas ots where ots.idTramite=tr.idTramite) as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'TE' AND
                         tr.idTramite = rr.idTramite
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, (select max(ots.Fecha_Aprobacion) from Observacion_Tramite_Sistemas ots where ots.idTramite=tr.idTramite) as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT,
                         ae.nombre, 'PROCESADO' estado,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam= 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'TE' AND
                         tr.idTramite = rr.idTramite and tr.Secuencia=rr.Secuencia
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AP' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND tr.idTramite = c.idTramite</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivados_observados_ConNombres</NAME>
<ID>140</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
SELECT distinct
      case when tipo='DE SUJETO OBLIGADO Y FR'
	  then null else vt.[idFuncionario] end as idFuncionario
      ,vt.[idEntidad]
      ,vt.[idTramite_Secuencia]
      ,vt.[idTramite]
      ,vt.[SUJETO_OBLIGADO]
      ,vt.[NIT]
      ,vt.[TIPO_SUJETO_OBLIGADO]
      ,vt.[OTRO_TIPO_SO]
      ,vt.[NOMBRE_REPRESENTANTE]
      ,vt.[CIUDAD]
      ,vt.[CORREO_ELECTRONICO]
      ,vt.[OFCEN_ZONA]
      ,vt.[OFCEN_DIRECCION]
      ,vt.[OFCEN_TELEFONO]
      ,vt.[OBSERVACIONES]
      ,vt.[CODIGO_VERIFICADOR]
      ,vt.[nusuario]
      ,vt.[estadoEntidad]
      ,vt.[fecha_registro]
      ,vt.[ESTADO]
	  ,'' AS Detalle
	 ,
	 '' as usuarioLegal
	 ,'' as Observacion_subsanada
      ,vt.[Secuencia]
      ,vt.[Estado_DU]
      ,case when tipo='DE SUJETO OBLIGADO Y FR'
	  then null else vt.[nombre_funcionario] end as nombre_funcionario
      ,vt.[tipoProceso]
      ,vt.[TIPO]
	  ,vt.tipoProceso + ' '+ TIPO as TIPO_TRAMITE
      ,tta.Observacion,tta.Fecha_Archivado ,
	  tta.Observacion AS nro_sicod
FROM v_resumen_traza_requisitos vt
inner join dbo.tObservacionTramite_Archivo AS tta ON vt.idTramite = tta.idTramite
and tta.Secuencia = vt.Secuencia
where
vt.TIPO != 'DADO DE BAJA' AND
vt.estadoEntidad = 'AC' and vt.ESTADO_IMPRESION = 'SI' and vt.ESTADO = 'TE'
and idTramite_Secuencia
in
	(
		SELECT max(vt.idTramite_Secuencia) FROM v_resumen_traza_requisitos vt
		inner join dbo.tObservacionTramite_Archivo AS tta ON vt.idTramite = tta.idTramite
		inner join dbo.LOG_REGISTRO_REQUISITO lr on vt.idRegistro_Requisito = lr.idRegistro_Requisito and lr.Operacion='OB'
		where vt.TIPO != 'DADO DE BAJA' AND vt.estadoEntidad = 'AC' and vt.ESTADO_IMPRESION = 'SI' and vt.ESTADO = 'TE'
		group by vt.idEntidad, vt.idFuncionario
	)</CODE>
</VIEW>
<VIEW>
<NAME>view_SO</NAME>
<ID>141</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT        e.idEntidad, e.SUJETO_OBLIGADO, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.TIPO_EMPRESA, e.NIT, e.CODIGO_VERIFICADOR, e.NOMBRE_REPRESENTANTE,
                         e.OFCEN_DEPARTAMENTO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.CORREO_ELECTRONICO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica</CODE>
</VIEW>
<VIEW>
<NAME>view_estado_sujetos_obligados</NAME>
<ID>142</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname% AS

select distinct   --e.*,

e.idEntidad, e.SUJETO_OBLIGADO, e.NIT, v.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, v.CIUDAD as  CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, e.nusuario,
						 v.fecha_registro, v.idTramite, v.Secuencia, v.Estado_DU, 'EN MESA DE ENTRADA' ESTADO_TRAMITE,
NULL fecha_emision
	   from v_resumen_traza_requisitos  v
inner join tEntidad e on v.idEntidad = e.idEntidad
left join LOG_REGISTRO_REQUISITO lr on lr.idRegistro_Requisito = v.idRegistro_Requisito and  lr.Operacion = 'AP'
left join  tObservacionMesa_Entrada ome on ome.idTramite = v.idTramite
where v.ESTADO_IMPRESION = 'SI' AND v.estadoEntidad = 'AC'
and ome.idLogTrans is null
and lr.idRegistro_Requisito is null
and (v.idParam &lt;= 6  or v.idParam = 10 or v.idParam = 12 or v.idParam = 13)

union

select distinct  --e.*,
e.idEntidad, e.SUJETO_OBLIGADO, e.NIT, v.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, v.CIUDAD as  CIUDAD,
 e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, e.nusuario,
	   v.fecha_registro, v.idTramite, v.Secuencia, v.Estado_DU, 'EN LEGAL'  ESTADO_TRAMITE,
NULL fecha_emision
	   from v_resumen_traza_requisitos  v
inner join tEntidad e on v.idEntidad = e.idEntidad
left join LOG_REGISTRO_REQUISITO lr on lr.idRegistro_Requisito = v.idRegistro_Requisito and  lr.Operacion = 'AP'
left join  tObservacionMesa_Entrada ome on ome.idTramite = v.idTramite
where v.ESTADO_IMPRESION = 'SI' AND v.estadoEntidad = 'AC'
and (
		(lr.idRegistro_Requisito is not null  and v.Estado_Tramite='AJ')
		or
		(lr.idRegistro_Requisito is null and ome.idLogTrans is not null )
)
and (v.idParam &lt;= 6  or v.idParam = 10 or v.idParam = 12 or v.idParam = 13)

union

select distinct  --e.*,
e.idEntidad, e.SUJETO_OBLIGADO, e.NIT, v.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, v.CIUDAD as  CIUDAD,
 e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, e.nusuario,
	   v.fecha_registro, v.idTramite, v.Secuencia, v.Estado_DU, 'EN SISTEMAS'  ESTADO_TRAMITE,
NULL fecha_emision
	   from v_resumen_traza_requisitos  v
inner join tEntidad e on v.idEntidad = e.idEntidad
left join LOG_REGISTRO_REQUISITO lr on lr.idRegistro_Requisito = v.idRegistro_Requisito and  lr.Operacion = 'AP'
left join  tObservacionMesa_Entrada ome on ome.idTramite = v.idTramite
where v.ESTADO_IMPRESION = 'SI' AND v.estadoEntidad = 'AC'
and (
		(lr.idRegistro_Requisito is not null  and v.Estado_Tramite='AP')

)
and (v.idParam &lt;= 6  or v.idParam = 10 or v.idParam = 12 or v.idParam = 13)

union

select distinct  --e.*,
e.idEntidad, e.SUJETO_OBLIGADO, e.NIT, v.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, v.CIUDAD as  CIUDAD,
 e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, e.nusuario,
	   v.fecha_registro, v.idTramite, v.Secuencia, v.Estado_DU, 'EN ARCHIVOS' ESTADO_TRAMITE,
NULL fecha_emision
	   from v_resumen_traza_requisitos  v
inner join tEntidad e on v.idEntidad = e.idEntidad
left join LOG_REGISTRO_REQUISITO lr on lr.idRegistro_Requisito = v.idRegistro_Requisito and  lr.Operacion = 'AP'
left join  tObservacionMesa_Entrada ome on ome.idTramite = v.idTramite
where v.ESTADO_IMPRESION = 'SI' AND v.estadoEntidad = 'AC'
and (
		(lr.idRegistro_Requisito is not null    and v.Estado_Tramite='AR')

)
and (v.idParam &lt;= 6  or v.idParam = 10 or v.idParam = 12 or v.idParam = 13)

union

select distinct  --e.*,
e.idEntidad, e.SUJETO_OBLIGADO, e.NIT, v.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, v.CIUDAD as  CIUDAD,
 e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, e.nusuario,
v.fecha_registro, v.idTramite, v.Secuencia, v.Estado_DU, 'TERMINADO'  ESTADO_TRAMITE,
case when ci.idLogTrans is null then ota.Fecha_Archivado else
lt.Fecha end fecha_emision
	   from v_resumen_traza_requisitos  v
inner join tEntidad e on v.idEntidad = e.idEntidad
left join tObservacionTramite_Archivo ota on v.idTramite=ota.idTramite and v.Secuencia = ota.Secuencia
left join LOG_REGISTRO_REQUISITO lr on lr.idRegistro_Requisito = v.idRegistro_Requisito and  lr.Operacion = 'AP'
left join tCertificadoImpresion ci ON v.idTramite = ci.idTramite and ci.tipo='SO' AND ci.idCertificadoImpresion =
                          (SELECT     max(ci1.idCertificadoImpresion)
                            FROM          tCertificadoImpresion ci1
                            WHERE      ci1.idTramite = ci.idTramite and ci1.tipo='SO')
--left join  tObservacionMesa_Entrada ome on ome.idTramite = v.idTramite
left join LogsTrans lt ON ci.idLogTrans = lt.idLogTrans

where v.ESTADO_IMPRESION = 'SI' AND v.estadoEntidad = 'AC'
and v.Estado_Tramite='TE'
and (v.idParam &lt;= 6  or v.idParam = 10 or v.idParam = 12 or v.idParam = 13)
and v.fecha_registro=(select max(rr1.fecha_registro)
						from REGISTRO_REQUISITO rr1
						where rr1.idEntidad=v.idEntidad AND (rr1.idParam &lt;= 6  or rr1.idParam = 10 or v.idParam = 12 or v.idParam = 13))
and
(
  (lr.idRegistro_Requisito is not null and ci.idLogTrans is null) or
  (lt.idLogTrans is not null  )
)</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivados_baja_AC</NAME>
<ID>143</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT DISTINCT
                         tr.idTramite_Secuencia,tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO,'' AS Detalle,tta.Observacion
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tBajaFuncionario AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramiteNuevo INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionarioNuevo = f.idFuncionario INNER JOIN
                         dbo.LogsTrans AS lt ON bf.idLogTrans = lt.idLogTrans INNER JOIN
						 dbo.tObservacionTramite_Archivo AS tta ON tr.idTramite = tta.idTramite
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'TE') AND (bf.TipoBaja = 'BD') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite)) AND (lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO')</CODE>
</VIEW>
<VIEW>
<NAME>view_estado_funcionarios_responsablesANTERIOR</NAME>
<ID>144</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW dbo.view_estado_funcionarios_responsables
AS
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, lt.Fecha fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr JOIN
                      tCertificadoImpresion ci ON rr.idTramite = ci.idTramite and ci.tipo='FR' AND ci.idCertificadoImpresion =
                          (SELECT     max(ci1.idCertificadoImpresion)
                            FROM          tCertificadoImpresion ci1
                            WHERE      ci1.idTramite = ci.idTramite and ci1.tipo='FR') JOIN
                      LogsTrans lt ON ci.idLogTrans = lt.idLogTrans, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('FR', 'BA')
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idFuncionario=F.idFuncionario AND F.TIPO_FUNCIONARIO IN ('FR','BA'))
union all
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, OTA.Fecha_Archivado fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr,tObservacionTramite_Archivo ota , tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.SecuenciaAND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('FR', 'BA')
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idFuncionario=F.idFuncionario AND F.TIPO_FUNCIONARIO IN ('FR','BA'))
					  and not exists (select  1 from  tCertificadoImpresion ci
						where rr.idTramite = ci.idTramite)
						and rr.idTramite=ota.idTramite
						and rr.Secuencia=ota.Secuencia
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN ARCHIVOS' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AR') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('FR', 'BA')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN SISTEMAS' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AP') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('FR', 'BA')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, f.idFuncionario,
                      f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD, P.nombre AS NACIONALIDAD,
                      f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO, f.OBSERVACIONES, f.idEntidad,
                      f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AJ') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('FR', 'BA')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, f.idFuncionario,
                      f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD, P.nombre AS NACIONALIDAD,
                      f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO, f.OBSERVACIONES, f.idEntidad,
                      f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP') AND
                      EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND
                      f.TIPO_FUNCIONARIO IN ('FR', 'BA')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN MESA DE ENTRADA' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP') AND
                      NOT EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND
                      f.TIPO_FUNCIONARIO IN ('FR', 'BA')</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivados_baja_FR</NAME>
<ID>145</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT DISTINCT
                         tr.idTramite_Secuencia, tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO,'' AS Detalle,tta.Observacion
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tBajaFuncionario AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramiteNuevo INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionarioNuevo = f.idFuncionario INNER JOIN
                         dbo.LogsTrans AS lt ON bf.idLogTrans = lt.idLogTrans INNER JOIN
						 dbo.tObservacionTramite_Archivo AS tta ON tr.idTramite = tta.idTramite
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'TE') AND (bf.TipoBaja = 'BD') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite)) AND (lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE')</CODE>
</VIEW>
<VIEW>
<NAME>view_estado_analistasANTERIOR</NAME>
<ID>146</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW dbo.view_estado_analistas
AS
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, lt.Fecha fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr  JOIN
                      tCertificadoImpresion ci ON rr.idTramite = ci.idTramite and ci.tipo='AC' AND ci.idCertificadoImpresion =
                          (SELECT     max(ci1.idCertificadoImpresion)
                            FROM          tCertificadoImpresion ci1
                            WHERE      ci1.idTramite = ci.idTramite and ci1.tipo='AC') JOIN
                      LogsTrans lt ON ci.idLogTrans = lt.idLogTrans, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('AC', 'BC')
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idFuncionario=F.idFuncionario AND F.TIPO_FUNCIONARIO IN ('AC','BC'))
union all
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, ota.Fecha_Archivado fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr ,tObservacionTramite_Archivo ota , tFuncionario f JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('AC', 'BC')
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idFuncionario=F.idFuncionario AND F.TIPO_FUNCIONARIO IN ('AC','BC'))
					  and not exists (select  1 from  tCertificadoImpresion ci
						where rr.idTramite = ci.idTramite)
						and rr.idTramite=ota.idTramite
						and rr.Secuencia=ota.Secuencia
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN ARCHIVOS' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AR') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('AC', 'BC')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN SISTEMAS' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AP') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('AC', 'BC')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, f.idFuncionario,
                      f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AJ') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('AC', 'BC')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, f.idFuncionario,
                      f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP') AND
                      EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND
                      f.TIPO_FUNCIONARIO IN ('AC', 'BC')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN MESA DE ENTRADA' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP') AND
                      NOT EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND
                      f.TIPO_FUNCIONARIO IN ('AC', 'BC')</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad</NAME>
<ID>147</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        e.idEntidad, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, e.nusuario
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad
WHERE        (e.ESTADO_IMPRESION = 'SI') AND (e.ESTADO = 'AC')</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_registro</NAME>
<ID>148</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT        e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad</CODE>
</VIEW>
<VIEW>
<NAME>v_obtenerReporteTrimestral01_03_2017_legal</NAME>
<ID>149</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname%
 as
 (
 select distinct b.idEntidad,b.idfuncionario,b.idTramite,b.fecha_registro,
-- b.estado,
 a.COD_PARAM ,c.SUJETO_OBLIGADO, c.SUJETO_OBLIGADO as funcionario

 ,c.ESTADO as estado
 ,b.idRegistro_Requisito as id
 --,d.PN_NOMBRE,d.PN_PATERNO,d.PN_MATERNO, d.TIPO_FUNCIONARIO
  from REGISTRO_REQUISITO b
  inner join PARAM_REQUISITOS_SO a
  on b.idParam = a.idParam

  inner join tEntidad c
  on b.idEntidad=c.idEntidad

 -- inner join tFuncionario d
-- on b.idEntidad=d.idEntidad

  where
 COD_PARAM='SO'
 and

   idRegistro_Requisito  in
  (
1331,
1331,
1332,
1332,
1333,
1334,
1335,
1336,
2052,
2053,
2054,
2551,
2551,
2551,
2555,
2556,
4494,
4495,
4496,
4526,
4526,
4527,
4527,
4528,
4528,
4529,
4529,
4530,
4530,
4531,
4531,
4532,
4532,
4853,
4854,
4855,
4856,
4857,
4858,
4864,
4864,
4865,
4866,
4867,
4868,
4869,
4877,
4878,
4882,
4883,
4884,
4885,
4886,
4887,
4888,
4889,
4894,
4894,
4895,
4895,
4896,
4896,
4900,
4901,
4902,
4903,
4904,
4905,
4906,
4907,
4908,
4909,
4911,
4912,
4913,
4914,
4915,
4915,
4916,
4916,
4917,
4917,
4918,
4919,
4920,
4921,
4922,
4923,
4924,
4926,
4928,
4929,
4930,
4931,
4932,
4933,
4934,
4935,
4935,
4935,
4935,
4935,
4935,
4936,
4936,
4936,
4936,
4936,
4936,
4937,
4937,
4937,
4937,
4937,
4937,
4938,
4938,
4938,
4938,
4938,
4938,
4939,
4939,
4939,
4939,
4939,
4939,
4940,
4940,
4940,
4940,
4940,
4940,
4941,
4942,
4943,
4946,
4947,
4948,
4951,
4951,
4952,
4953,
4954,
4954,
4954,
4955,
4955,
4955,
4956,
4956,
4956,
4958,
4959,
4960,
4966,
4968,
4969,
4970,
4970,
4970,
4970,
4971,
4971,
4972,
4973,
4974,
4975,
4976,
4976,
4977,
4978,
4979,
4979,
4980,
4981,
4982,
4983,
4984,
4985,
4986,
4987,
4988,
4988,
4989,
4990,
4991,
4992,
4993,
4994,
4995,
4996,
4997,
4998,
4999,
5002,
5002,
5003,
5003,
5004,
5005,
5006,
5007,
5008,
5009,
5010,
5013,
5014,
5015,
5016,
5017,
5018,
5019,
5020,
5021,
5022,
5022,
5023,
5024,
5025,
5025,
5026,
5027,
5028,
5028,
5029,
5030,
5031,
5031,
5032,
5033,
5037,
5038,
5039,
5040,
5041,
5042,
5045,
5046,
5047,
5048,
5048,
5049,
5049,
5049,
5050,
5050,
5051,
5052,
5053,
5054,
5055,
5056,
5057,
5058,
5058,
5059,
5060,
5060,
5061,
5061,
5062,
5062,
5063,
5063,
5064,
5065,
5065,
5066,
5067,
5068,
5069,
5072,
5073,
5074,
5075,
5076,
5077,
5078,
5081,
5082,
5083,
5084,
5085,
5086,
5087,
5088,
5089,
5091,
5091,
5091,
5092,
5092,
5092,
5092,
5093,
5093,
5095,
5096,
5097,
5101,
5101,
5102,
5102,
5103,
5104,
5105,
5105,
5106,
5107,
5108,
5109,
5111,
5111,
5111,
5111,
5113,
5114,
5115,
5116,
5117,
5118,
5119,
5120,
5121,
5122,
5123,
5124,
5125,
5126,
5126,
5127,
5127,
5128,
5129,
5130,
5131,
5132,
5132,
5133,
5134,
5135,
5136,
5137,
5138,
5139,
5140,
5141,
5142,
5143,
5144,
5145,
5146,
5147,
5149,
5150,
5150,
5151,
5152,
5153,
5154,
5156,
5157,
5158,
5161,
5162,
5164,
5165,
5166,
5169,
5170,
5171,
5173,
5175,
5176,
5177,
5178)

--order by b.idEntidad


union




select distinct b.idEntidad,b.idFuncionario,b.idTramite,b.fecha_registro,
-- b.estado,
 a.COD_PARAM
 ,d.SUJETO_OBLIGADO
 ,(c.PN_NOMBRE + ' '+c.PN_PATERNO+' '+ c.PN_MATERNO) as funcionario

 ,c.TIPO_FUNCIONARIO as estado
 ,b.idRegistro_Requisito as id
 --,d.SUJETO_OBLIGADO
 --,d.PN_NOMBRE,d.PN_PATERNO,d.PN_MATERNO, d.TIPO_FUNCIONARIO
  from REGISTRO_REQUISITO b
  inner join PARAM_REQUISITOS_SO a
  on b.idParam = a.idParam

  inner join tFuncionario c
  on b.idEntidad=c.idEntidad
  AND B.idFuncionario=C.idFuncionario


 inner join tEntidad d
on b.idEntidad=d.idEntidad

  where
--  COD_PARAM='FR'
--  and

   idRegistro_Requisito  in
  (
1331,
1331,
1332,
1332,
1333,
1334,
1335,
1336,
2052,
2053,
2054,
2551,
2551,
2551,
2555,
2556,
4494,
4495,
4496,
4526,
4526,
4527,
4527,
4528,
4528,
4529,
4529,
4530,
4530,
4531,
4531,
4532,
4532,
4853,
4854,
4855,
4856,
4857,
4858,
4864,
4864,
4865,
4866,
4867,
4868,
4869,
4877,
4878,
4882,
4883,
4884,
4885,
4886,
4887,
4888,
4889,
4894,
4894,
4895,
4895,
4896,
4896,
4900,
4901,
4902,
4903,
4904,
4905,
4906,
4907,
4908,
4909,
4911,
4912,
4913,
4914,
4915,
4915,
4916,
4916,
4917,
4917,
4918,
4919,
4920,
4921,
4922,
4923,
4924,
4926,
4928,
4929,
4930,
4931,
4932,
4933,
4934,
4935,
4935,
4935,
4935,
4935,
4935,
4936,
4936,
4936,
4936,
4936,
4936,
4937,
4937,
4937,
4937,
4937,
4937,
4938,
4938,
4938,
4938,
4938,
4938,
4939,
4939,
4939,
4939,
4939,
4939,
4940,
4940,
4940,
4940,
4940,
4940,
4941,
4942,
4943,
4946,
4947,
4948,
4951,
4951,
4952,
4953,
4954,
4954,
4954,
4955,
4955,
4955,
4956,
4956,
4956,
4958,
4959,
4960,
4966,
4968,
4969,
4970,
4970,
4970,
4970,
4971,
4971,
4972,
4973,
4974,
4975,
4976,
4976,
4977,
4978,
4979,
4979,
4980,
4981,
4982,
4983,
4984,
4985,
4986,
4987,
4988,
4988,
4989,
4990,
4991,
4992,
4993,
4994,
4995,
4996,
4997,
4998,
4999,
5002,
5002,
5003,
5003,
5004,
5005,
5006,
5007,
5008,
5009,
5010,
5013,
5014,
5015,
5016,
5017,
5018,
5019,
5020,
5021,
5022,
5022,
5023,
5024,
5025,
5025,
5026,
5027,
5028,
5028,
5029,
5030,
5031,
5031,
5032,
5033,
5037,
5038,
5039,
5040,
5041,
5042,
5045,
5046,
5047,
5048,
5048,
5049,
5049,
5049,
5050,
5050,
5051,
5052,
5053,
5054,
5055,
5056,
5057,
5058,
5058,
5059,
5060,
5060,
5061,
5061,
5062,
5062,
5063,
5063,
5064,
5065,
5065,
5066,
5067,
5068,
5069,
5072,
5073,
5074,
5075,
5076,
5077,
5078,
5081,
5082,
5083,
5084,
5085,
5086,
5087,
5088,
5089,
5091,
5091,
5091,
5092,
5092,
5092,
5092,
5093,
5093,
5095,
5096,
5097,
5101,
5101,
5102,
5102,
5103,
5104,
5105,
5105,
5106,
5107,
5108,
5109,
5111,
5111,
5111,
5111,
5113,
5114,
5115,
5116,
5117,
5118,
5119,
5120,
5121,
5122,
5123,
5124,
5125,
5126,
5126,
5127,
5127,
5128,
5129,
5130,
5131,
5132,
5132,
5133,
5134,
5135,
5136,
5137,
5138,
5139,
5140,
5141,
5142,
5143,
5144,
5145,
5146,
5147,
5149,
5150,
5150,
5151,
5152,
5153,
5154,
5156,
5157,
5158,
5161,
5162,
5164,
5165,
5166,
5169,
5170,
5171,
5173,
5175,
5176,
5177,
5178)

--order by b.idEntidad


)</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_Aprobado_Archivo_baja</NAME>
<ID>150</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tBajaFuncionario AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramiteNuevo INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionarioNuevo = f.idFuncionario
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AR') AND (bf.TipoBaja = 'RE') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_Aprobado_Archivo_bajaDef</NAME>
<ID>151</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tBajaFuncionario AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramiteNuevo INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionarioNuevo = f.idFuncionario INNER JOIN
                         dbo.LogsTrans AS lt ON bf.idLogTrans = lt.idLogTrans
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AR') AND (bf.TipoBaja = 'BD') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite)) AND (lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE')</CODE>
</VIEW>
<VIEW>
<NAME>view_estado_funcionarios_responsables</NAME>
<ID>152</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create VIEW %viewname%
AS
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, lt.Fecha fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr JOIN
                      tCertificadoImpresion ci ON rr.idTramite = ci.idTramite and ci.tipo='FR' AND ci.idCertificadoImpresion =
                          (SELECT     max(ci1.idCertificadoImpresion)
                            FROM          tCertificadoImpresion ci1
                            WHERE      ci1.idTramite = ci.idTramite and ci1.tipo='FR') JOIN
                      LogsTrans lt ON ci.idLogTrans = lt.idLogTrans, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
							and rr2.idTramite=rr.idTramite
							 AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('FR', 'BA')
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idFuncionario=F.idFuncionario AND F.TIPO_FUNCIONARIO IN ('FR','BA'))
union all
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, OTA.Fecha_Archivado fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr,tObservacionTramite_Archivo ota , tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
							and rr.idTramite=rr2.idTramite

							 AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
            WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('FR', 'BA')
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idFuncionario=F.idFuncionario AND F.TIPO_FUNCIONARIO IN ('FR','BA'))
					  and not exists (select  1 from  tCertificadoImpresion ci
						where rr.idTramite = ci.idTramite)
						and rr.idTramite=ota.idTramite
						and rr.Secuencia=ota.Secuencia
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN ARCHIVOS' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
							and rr2.idTramite=rr.idTramite
							 AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AR') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('FR', 'BA')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN SISTEMAS' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
						and rr2.idTramite=rr.idTramite
							AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AP')AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('FR', 'BA')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, f.idFuncionario,
                      f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD, P.nombre AS NACIONALIDAD,
                      f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO, f.OBSERVACIONES, f.idEntidad,
                      f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
							and rr2.idTramite=rr.idTramite
							 AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AJ') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('FR', 'BA')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, f.idFuncionario,
                      f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD, P.nombre AS NACIONALIDAD,
                      f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO, f.OBSERVACIONES, f.idEntidad,
                      f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
							and rr2.idtramite=rr.idTramite
							) AND
                      EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND
                      f.TIPO_FUNCIONARIO IN ('FR', 'BA')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN MESA DE ENTRADA' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
							and rr.idTramite=rr2.idTramite
							) AND
                      NOT EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND
                      f.TIPO_FUNCIONARIO IN ('FR', 'BA')</CODE>
</VIEW>
<VIEW>
<NAME>v_obtenerLogRequisito_RegistroRequisito</NAME>
<ID>153</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname%

  as
  select  b.idEntidad,b.idfuncionario,b.idTramite,b.fecha_registro, c.COD_PARAM,b.estado,a.nusuario,max(a.Fecha) as fechalog
-- b.estado,

  from LOG_REGISTRO_REQUISITO a
   inner join REGISTRO_REQUISITO b
   on a.idRegistro_Requisito=b.idRegistro_Requisito

   inner join PARAM_REQUISITOS_SO c

   on b.idParam= c.idParam

  -- where a.nusuario='flegal'

  -- and a.Fecha &gt;= '01/01/2017' and a.fecha&lt;='31/03/2017'

   group by b.idEntidad,b.idfuncionario,b.idTramite,b.fecha_registro, c.COD_PARAM,a.nusuario,b.estado</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_Aprobado_Archivo_bajaDefAC</NAME>
<ID>154</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tBajaFuncionario AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramiteNuevo INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionarioNuevo = f.idFuncionario INNER JOIN
                         dbo.LogsTrans AS lt ON bf.idLogTrans = lt.idLogTrans
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AR') AND (bf.TipoBaja = 'BD') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite)) AND (lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO')</CODE>
</VIEW>
<VIEW>
<NAME>view_estado_analistas</NAME>
<ID>155</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, lt.Fecha fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr  JOIN
                      tCertificadoImpresion ci ON rr.idTramite = ci.idTramite and ci.tipo='AC' AND ci.idCertificadoImpresion =
                          (SELECT     max(ci1.idCertificadoImpresion)
                            FROM          tCertificadoImpresion ci1
                            WHERE      ci1.idTramite = ci.idTramite and ci1.tipo='AC') JOIN
                      LogsTrans lt ON ci.idLogTrans = lt.idLogTrans, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
							and rr2.idTramite=rr.idTramite
							AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('AC', 'BC')
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idFuncionario=F.idFuncionario AND F.TIPO_FUNCIONARIO IN ('AC','BC'))
union all
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, ota.Fecha_Archivado fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr ,tObservacionTramite_Archivo ota , tFuncionario f JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
								and rr2.idTramite=rr.idTramite
							 AND
												   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('AC', 'BC')
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idFuncionario=F.idFuncionario AND F.TIPO_FUNCIONARIO IN ('AC','BC'))
					  and not exists (select  1 from  tCertificadoImpresion ci
						where rr.idTramite = ci.idTramite)
						and rr.idTramite=ota.idTramite
						and rr.Secuencia=ota.Secuencia
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN ARCHIVOS' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
								and rr2.idTramite=rr.idTramite
							AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AR') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('AC', 'BC')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN SISTEMAS' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
								and rr2.idTramite=rr.idTramite
							AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AP') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('AC', 'BC')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, f.idFuncionario,
                      f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
								and rr2.idTramite=rr.idTramite
							AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AJ') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('AC', 'BC')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, f.idFuncionario,
                      f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
								and rr2.idTramite=rr.idTramite
							) AND
                      EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND
                      f.TIPO_FUNCIONARIO IN ('AC', 'BC')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN MESA DE ENTRADA' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
								and rr2.idTramite=rr.idTramite
							) AND
                      NOT EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND
                      f.TIPO_FUNCIONARIO IN ('AC', 'BC')</CODE>
</VIEW>
<VIEW>
<NAME>v_LogTrans_TCertificado</NAME>
<ID>156</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname%

   as
   (
   select a.*,b.idLogTrans as idLog, b.nUsuario,b.Estado as estadoLog,b.Transaccion,b.Fecha from tCertificadoImpresion a

   inner join LogsTrans b

   on a.idLogTrans=b.idLogTrans
   )</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_Aprobado_Archivo_ComunicaFR</NAME>
<ID>157</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_notificacion,
                         e.nusuario, 'PENDIENTE' AS ESTADO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tComunicacionCambioFR AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramite INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionario = f.idFuncionario
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AR') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_baja</NAME>
<ID>158</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS nombre_nuevo,
                         f1.PN_NOMBRE + ' ' + f1.PN_PATERNO + ' ' + f1.PN_MATERNO AS nombre_anterior
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tBajaFuncionario AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramiteNuevo INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionarioNuevo = f.idFuncionario INNER JOIN
                         dbo.tFuncionario AS f1 ON bf.idFuncionarioAnterior = f1.idFuncionario
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AJ') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_bajadef</NAME>
<ID>159</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS nombre_FR
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tBajaFuncionario AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramiteNuevo INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionarioNuevo = f.idFuncionario INNER JOIN
                         dbo.LogsTrans AS lt ON bf.idLogTrans = lt.idLogTrans
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AJ') AND (bf.TipoBaja = 'BD') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite)) AND (lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE')</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_bajadefAC</NAME>
<ID>160</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS nombre_FR
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tBajaFuncionario AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramiteNuevo INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionarioNuevo = f.idFuncionario INNER JOIN
                         dbo.LogsTrans AS lt ON bf.idLogTrans = lt.idLogTrans
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AJ') AND (lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO') AND
                         (bf.TipoBaja = 'BD') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_ComunicaFR</NAME>
<ID>161</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_notificacion,
                         e.nusuario, 'PENDIENTE' AS ESTADO, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS nombre_FR
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tComunicacionCambioFR AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramite INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionario = f.idFuncionario
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AJ')  AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_ComunicaFR_sistemas</NAME>
<ID>162</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_notificacion,
                         e.nusuario, 'PENDIENTE' AS ESTADO, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS nombre_FR
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tComunicacionCambioFR AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramite INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionario = f.idFuncionario
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AP')  AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisitoME_baja</NAME>
<ID>163</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tBajaFuncionario AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramiteNuevo
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AJ') AND (bf.TipoBaja = 'RE') AND (NOT EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite)))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisitoME_bajadef</NAME>
<ID>164</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tBajaFuncionario AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramiteNuevo INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionarioNuevo = f.idFuncionario INNER JOIN
                         dbo.LogsTrans AS lt ON bf.idLogTrans = lt.idLogTrans
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AJ') AND (bf.TipoBaja = 'BD') AND (NOT EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite))) AND (lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE')</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_Baja</NAME>
<ID>165</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT        e.idEntidad, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, e.nusuario
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad
WHERE        (e.ESTADO_IMPRESION = 'SI') AND (e.ESTADO = 'BA')</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisitoME_bajadefAC</NAME>
<ID>166</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tBajaFuncionario AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramiteNuevo INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionarioNuevo = f.idFuncionario INNER JOIN
                         dbo.LogsTrans AS lt ON bf.idLogTrans = lt.idLogTrans
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AJ') AND (bf.TipoBaja = 'BD') AND (NOT EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite))) AND (lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO')</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisitoME_ComunicaFR</NAME>
<ID>167</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_notificacion,
                         e.nusuario, 'PENDIENTE' AS ESTADO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tComunicacionCambioFR AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramite INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionario = f.idFuncionario
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AJ')  AND (NOT EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite)))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_tramite</NAME>
<ID>168</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
select e.idEntidad,tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, e.nusuario,es.Descripcion
from tEntidad e, tActividadEconomica ae,tTramite tr,tCiudad c,tEstado es
where e.idActividadEconomica = ae.idActividadEconomica and
e.idCiudad = c.idCiudad and
e.idEntidad=tr.idEntidad
and (e.ESTADO_IMPRESION = 'SI') AND (e.ESTADO = 'AC')
and tr.Estado_Tramite=es.Estado_Tramite</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_tramite_modif</NAME>
<ID>169</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        rr.idRegistro_Requisito, pr.DESCRIPCION, rr.idTramite, rr.nro_documento, rr.fecha_documento, e.Descripcion AS estado, ' ' AS observaciones
FROM            dbo.REGISTRO_REQUISITO AS rr INNER JOIN
                         dbo.PARAM_REQUISITOS_SO AS pr ON rr.idParam = pr.idParam INNER JOIN
                         dbo.tEstado AS e ON rr.ESTADO = e.Estado_Tramite
WHERE        (pr.COD_PARAM = 'SO')</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_tramite_modif_AC</NAME>
<ID>170</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        rr.idRegistro_Requisito, pr.DESCRIPCION, rr.idTramite, rr.nro_documento, rr.fecha_documento, e.Descripcion AS estado, f.idFuncionario, rr.idEntidad,
                         ' ' AS observaciones
FROM            dbo.REGISTRO_REQUISITO AS rr INNER JOIN
                         dbo.PARAM_REQUISITOS_SO AS pr ON rr.idParam = pr.idParam INNER JOIN
                         dbo.tEstado AS e ON rr.ESTADO = e.Estado_Tramite INNER JOIN
                         dbo.tFuncionario AS f ON rr.idEntidad = f.idEntidad AND rr.idFuncionario = f.idFuncionario
WHERE        (pr.COD_PARAM = 'FR') AND (f.TIPO_FUNCIONARIO = 'AC')</CODE>
</VIEW>
<VIEW>
<NAME>v_funcionario_entidad_flujo_concluido</NAME>
<ID>171</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname%
as
SELECT        e.idEntidad as idEntidadSO, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO as correoSO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES as observacionSO, e.CODIGO_VERIFICADOR, e.nusuario, f.*
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad

						 inner join tFuncionario f
						 on e.idEntidad= f.idEntidad

WHERE        (e.ESTADO_IMPRESION = 'SI') AND (e.ESTADO = 'AC')
and f.TIPO_FUNCIONARIO!='BA'</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_tramite_modif_FR</NAME>
<ID>172</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        rr.idRegistro_Requisito, pr.DESCRIPCION, rr.idTramite, rr.nro_documento, rr.fecha_documento, e.Descripcion AS estado, f.idFuncionario, rr.idEntidad,
                         ' ' AS observaciones
FROM            dbo.REGISTRO_REQUISITO AS rr INNER JOIN
                         dbo.PARAM_REQUISITOS_SO AS pr ON rr.idParam = pr.idParam INNER JOIN
                         dbo.tEstado AS e ON rr.ESTADO = e.Estado_Tramite INNER JOIN
                         dbo.tFuncionario AS f ON rr.idEntidad = f.idEntidad AND rr.idFuncionario = f.idFuncionario
WHERE        (pr.COD_PARAM = 'FR') AND (f.TIPO_FUNCIONARIO = 'FR')</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_registro_requisito_AJ</NAME>
<ID>173</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        t1.idRegistro_Requisito, t1.DESCRIPCION, t1.nro_documento, t1.fecha_documento, rr.imagen, t1.idEntidad, t1.idFuncionario, t1.COD_PARAM, t1.observaciones,
                         t1.observacion_subsanada, t1.idTramite
FROM            (SELECT DISTINCT
                                                    r.idRegistro_Requisito, p.DESCRIPCION, r.nro_documento, r.fecha_documento, '' AS imagen, r.idEntidad, r.idFuncionario, p.COD_PARAM,
                                                    (CASE WHEN l.Operacion = 'CR' THEN
                                                        (SELECT        l3.Observacion
                                                          FROM            LOG_REGISTRO_REQUISITO l3
                                                          WHERE        r.idRegistro_Requisito = l3.idRegistro_Requisito AND l3.Operacion = 'OB' AND l3.idLogRegistro_Requisito =
                                                                                        (SELECT        MAX(l4.idLogRegistro_Requisito)
                                                                                          FROM            LOG_REGISTRO_REQUISITO l4
                                                                                          WHERE        r.idRegistro_Requisito = l4.idRegistro_Requisito AND l4.Operacion = 'OB')) ELSE ' ' END) AS observaciones,
                                                    (CASE WHEN l.Operacion = 'RE' THEN ' ' ELSE 'SI' END) AS observacion_subsanada, r.idTramite
                          FROM            dbo.REGISTRO_REQUISITO AS r FULL OUTER JOIN
                                                    dbo.LOG_REGISTRO_REQUISITO AS l1 ON r.idRegistro_Requisito = l1.idRegistro_Requisito AND l1.Operacion = 'CR' INNER JOIN
                                                    dbo.PARAM_REQUISITOS_SO AS p ON r.idParam = p.idParam INNER JOIN
                                                    dbo.LOG_REGISTRO_REQUISITO AS l ON r.idRegistro_Requisito = l.idRegistro_Requisito
                          WHERE        (r.ESTADO = 'AJ') AND (l.Operacion IN ('RE', 'CR')) AND (l.idLogRegistro_Requisito =
                                                        (SELECT        MAX(idLogRegistro_Requisito) AS Expr1
                                                          FROM            dbo.LOG_REGISTRO_REQUISITO AS l2
                                                          WHERE        (r.idRegistro_Requisito = idRegistro_Requisito) AND (Operacion IN ('RE', 'CR'))))) AS t1 INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON t1.idRegistro_Requisito = rr.idRegistro_Requisito</CODE>
</VIEW>
<VIEW>
<NAME>v_NombreSujetos_ObligadosConCertificadoActivos</NAME>
<ID>174</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as (
SELECT        e.idEntidad, e.idActividadEconomica, ac.nombre, CAST(MAX(l.Fecha) AS date) AS Fecha
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ac ON e.idActividadEconomica = ac.idActividadEconomica INNER JOIN
                         dbo.tTramite AS t ON e.idEntidad = t.idEntidad INNER JOIN
                         dbo.tCertificadoImpresion AS c ON t.idTramite = c.idTramite INNER JOIN
                         dbo.LogsTrans AS l ON c.idLogTrans = l.idLogTrans
WHERE        (c.tipo = 'SO') AND (t.Estado_Tramite = 'TE') and e.ESTADO='AC'
GROUP BY e.idEntidad, e.idActividadEconomica, ac.nombre)</CODE>
</VIEW>
<VIEW>
<NAME>v_NombreSujetos_ObligadosConCertificadoActivosArchivo</NAME>
<ID>175</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create  view %viewname%

as (

SELECT     distinct   e.idEntidad, e.idActividadEconomica, ac.nombre, CAST(MAX(l.Fecha) AS date) AS Fecha
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ac ON e.idActividadEconomica = ac.idActividadEconomica INNER JOIN
                         dbo.tTramite AS t ON e.idEntidad = t.idEntidad INNER JOIN
                         dbo.tObservacionTramite_Archivo AS c ON t.idTramite = c.idTramite INNER JOIN
                         dbo.LogsTrans AS l ON c.idLogTrans = l.idLogTrans

						 inner join REGISTRO_REQUISITO re
						 on re.idTramite=t.idTramite and re.idTramite=c.idTramite
						 and re.idEntidad=t.idEntidad
WHERE        (t.Estado_Tramite = 'TE') and e.ESTADO='AC'

and re.idFuncionario is null

and l.Transaccion='RE'
GROUP BY e.idEntidad, e.idActividadEconomica, ac.nombre
union

SELECT        e.idEntidad, e.idActividadEconomica, ac.nombre, CAST(MAX(l.Fecha) AS date) AS Fecha
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ac ON e.idActividadEconomica = ac.idActividadEconomica INNER JOIN
                         dbo.tTramite AS t ON e.idEntidad = t.idEntidad INNER JOIN
                         dbo.tCertificadoImpresion AS c ON t.idTramite = c.idTramite INNER JOIN
                         dbo.LogsTrans AS l ON c.idLogTrans = l.idLogTrans
WHERE        (c.tipo = 'SO') AND (t.Estado_Tramite = 'TE') and e.ESTADO='AC'
GROUP BY e.idEntidad, e.idActividadEconomica, ac.nombre)</CODE>
</VIEW>
</VIEWS>
<RELATIONSHIPS>
<REL>
<NAME>CasosRenovacionDocumentos_Registro_casoRenovacion</NAME>
<NAMETEMPLATE>CasosRenovacionDocumentos_Registro_casoRenovacion</NAMETEMPLATE>
<ID>176</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>2</PARENTOBJECTID>
<CHILDOBJECTID>11</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>1</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>CasosRenovacionDocumentos_Registro_casoRenovacion</NAME>
<NAMETEMPLATE>CasosRenovacionDocumentos_Registro_casoRenovacion</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>5</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>5</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>PARAM_REQUISITOS_SO_Registro_casoRenovacion</NAME>
<NAMETEMPLATE>PARAM_REQUISITOS_SO_Registro_casoRenovacion</NAMETEMPLATE>
<ID>177</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>10</PARENTOBJECTID>
<CHILDOBJECTID>11</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>1</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>PARAM_REQUISITOS_SO_Registro_casoRenovacion</NAME>
<NAMETEMPLATE>PARAM_REQUISITOS_SO_Registro_casoRenovacion</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>3</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>3</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>FK_REGISTRO_REQUISITO_PARAM_REQUISITOS_SO</NAME>
<NAMETEMPLATE>FK_REGISTRO_REQUISITO_PARAM_REQUISITOS_SO</NAMETEMPLATE>
<ID>178</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>10</PARENTOBJECTID>
<CHILDOBJECTID>12</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>0</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>FK_REGISTRO_REQUISITO_PARAM_REQUISITOS_SO</NAME>
<NAMETEMPLATE>FK_REGISTRO_REQUISITO_PARAM_REQUISITOS_SO</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>4</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>4</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>FK_REGISTRO_REQUISITO_tEntidad1</NAME>
<NAMETEMPLATE>FK_REGISTRO_REQUISITO_tEntidad1</NAMETEMPLATE>
<ID>179</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>26</PARENTOBJECTID>
<CHILDOBJECTID>12</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>0</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>FK_REGISTRO_REQUISITO_tEntidad1</NAME>
<NAMETEMPLATE>FK_REGISTRO_REQUISITO_tEntidad1</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>3</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>3</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>FK_REGISTRO_REQUISITO_tFuncionario</NAME>
<NAMETEMPLATE>FK_REGISTRO_REQUISITO_tFuncionario</NAMETEMPLATE>
<ID>180</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>30</PARENTOBJECTID>
<CHILDOBJECTID>12</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>0</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>FK_REGISTRO_REQUISITO_tFuncionario</NAME>
<NAMETEMPLATE>FK_REGISTRO_REQUISITO_tFuncionario</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>5</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>5</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>REGISTRO_REQUISITO_REGISTRO_REQUISITOHistRenovados</NAME>
<NAMETEMPLATE>REGISTRO_REQUISITO_REGISTRO_REQUISITOHistRenovados</NAMETEMPLATE>
<ID>181</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>12</PARENTOBJECTID>
<CHILDOBJECTID>13</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>1</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>REGISTRO_REQUISITO_REGISTRO_REQUISITOHistRenovados</NAME>
<NAMETEMPLATE>REGISTRO_REQUISITO_REGISTRO_REQUISITOHistRenovados</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>3</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>3</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>FK_tEntidad_tActividadEconomica</NAME>
<NAMETEMPLATE>FK_tEntidad_tActividadEconomica</NAMETEMPLATE>
<ID>182</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>17</PARENTOBJECTID>
<CHILDOBJECTID>26</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>0</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>FK_tEntidad_tActividadEconomica</NAME>
<NAMETEMPLATE>FK_tEntidad_tActividadEconomica</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>17</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>17</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>FK_tEntidad_tCiudad</NAME>
<NAMETEMPLATE>FK_tEntidad_tCiudad</NAMETEMPLATE>
<ID>183</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>21</PARENTOBJECTID>
<CHILDOBJECTID>26</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>0</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>FK_tEntidad_tCiudad</NAME>
<NAMETEMPLATE>FK_tEntidad_tCiudad</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>18</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>18</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>tEntidad_tEntidadHistRenovados2</NAME>
<NAMETEMPLATE>tEntidad_tEntidadHistRenovados2</NAMETEMPLATE>
<ID>184</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>26</PARENTOBJECTID>
<CHILDOBJECTID>27</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>1</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>tEntidad_tEntidadHistRenovados2</NAME>
<NAMETEMPLATE>tEntidad_tEntidadHistRenovados2</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>3</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>3</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>FK_tAnalistaCumplimiento_tEntidad</NAME>
<NAMETEMPLATE>FK_tAnalistaCumplimiento_tEntidad</NAMETEMPLATE>
<ID>185</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>26</PARENTOBJECTID>
<CHILDOBJECTID>30</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>0</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>FK_tAnalistaCumplimiento_tEntidad</NAME>
<NAMETEMPLATE>FK_tAnalistaCumplimiento_tEntidad</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>18</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>18</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>FK_tAnalistaCumplimiento_tPais</NAME>
<NAMETEMPLATE>FK_tAnalistaCumplimiento_tPais</NAMETEMPLATE>
<ID>186</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>37</PARENTOBJECTID>
<CHILDOBJECTID>30</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>0</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>FK_tAnalistaCumplimiento_tPais</NAME>
<NAMETEMPLATE>FK_tAnalistaCumplimiento_tPais</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>19</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>19</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>tFuncionario_tFuncionarioHistRenovados</NAME>
<NAMETEMPLATE>tFuncionario_tFuncionarioHistRenovados</NAMETEMPLATE>
<ID>187</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>30</PARENTOBJECTID>
<CHILDOBJECTID>31</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>1</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>tFuncionario_tFuncionarioHistRenovados</NAME>
<NAMETEMPLATE>tFuncionario_tFuncionarioHistRenovados</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>3</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>3</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>FK__tTramiteC__idTra__3AA1AEB8</NAME>
<NAMETEMPLATE>FK__tTramiteC__idTra__3AA1AEB8</NAMETEMPLATE>
<ID>188</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>40</PARENTOBJECTID>
<CHILDOBJECTID>41</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>0</RELTYPE>
<MANDATORYPARENT>1</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>FK__tTramiteC__idTra__3AA1AEB8</NAME>
<NAMETEMPLATE>FK__tTramiteC__idTra__3AA1AEB8</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>2</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
</RELATIONSHIPS>
<SUBCATEGORYCONNECTIONS>
</SUBCATEGORYCONNECTIONS>
</DATADICT>
<DIAGRAMS>
<DisplayPreferences>
<USEINDICATORLINE>0</USEINDICATORLINE>
<INDICATORBITMAPS>0</INDICATORBITMAPS>
<PKINDICATOR>PK</PKINDICATOR>
<FKINDICATOR>FK</FKINDICATOR>
<PFINDICATOR>PF</PFINDICATOR>
<NOTNULLINDICATOR>*</NOTNULLINDICATOR>
<INDICATORPOSITION>0</INDICATORPOSITION>
<USEGRADIENT>1</USEGRADIENT>
<DEFTEXTAREACOLOR>16777215</DEFTEXTAREACOLOR>
<DEFENTCOLOR>16777215</DEFENTCOLOR>
<DEFSTAMPCOLOR>16777215</DEFSTAMPCOLOR>
<DEFGROUPBOXCOLOR>8421504</DEFGROUPBOXCOLOR>
<DEFTEXTAREALINECOLOR>0</DEFTEXTAREALINECOLOR>
<DEFENTLINECOLOR>0</DEFENTLINECOLOR>
<DEFSTAMPLINECOLOR>0</DEFSTAMPLINECOLOR>
<DEFSUBCATLINECOLOR>0</DEFSUBCATLINECOLOR>
<DEFCONLINECOLOR>0</DEFCONLINECOLOR>
<DEFGROUPBOXLINECOLOR>0</DEFGROUPBOXLINECOLOR>
<DEFTEXTAREATRANSPARENT>0</DEFTEXTAREATRANSPARENT>
<DEFSTAMPTRANSPARENT>0</DEFSTAMPTRANSPARENT>
<DEFTEXTAREALINEWIDTH>1</DEFTEXTAREALINEWIDTH>
<DEFSTAMPLINEWIDTH>1</DEFSTAMPLINEWIDTH>
<DEFGROUPBOXLINEWIDTH>0</DEFGROUPBOXLINEWIDTH>
<DEFTEXTAREALINESTYLE>0</DEFTEXTAREALINESTYLE>
<DEFSTAMPLINESTYLE>0</DEFSTAMPLINESTYLE>
<DEFGROUPBOXLINESTYLE>0</DEFGROUPBOXLINESTYLE>
<ENTNAMEFONT>Arial,9,B,0,clNavy,0</ENTNAMEFONT>
<ENTPKFONT>Arial,8,B,0,clWindowText,0</ENTPKFONT>
<ENTFKFONT>Arial,8,I,0,clWindowText,0</ENTFKFONT>
<ENTATTRFONT>Arial,8,,0,clWindowText,0</ENTATTRFONT>
<TEXTAREAFONT>Arial,8,,0,clWindowText,0</TEXTAREAFONT>
<GROUPBOXFONT>Arial,8,,0,clWindowText,0</GROUPBOXFONT>
<CAPTIONFONT>Arial,8,,0,clWindowText,0</CAPTIONFONT>
</DisplayPreferences>
<DIAGRAM>
<ID>1</ID>
<NAME>Main Diagram</NAME>
<DESC></DESC>
<TODO></TODO>
<ISMAINDIAGRAM>1</ISMAINDIAGRAM>
<BGCOLOR>16702121</BGCOLOR>
<DISPLAYLEVEL>0</DISPLAYLEVEL>
<VISIBLEATTR>0</VISIBLEATTR>
<CAPTIONSTYLE>0</CAPTIONSTYLE>
<SHOWPKINDICATOR>1</SHOWPKINDICATOR>
<SHOWFKINDICATOR>1</SHOWFKINDICATOR>
<SHOWNOTNULLINDICATOR>0</SHOWNOTNULLINDICATOR>
<NOTATION>0</NOTATION>
</DIAGRAM>
<CONTROLS>
<ENTITYCONTROLS>
<ENTC>
<ID>2</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>182</W>
<H>63</H>
<L>32</L>
<T>55</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>3</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>114</W>
<H>153</H>
<L>1675</L>
<T>449</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>4</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>65</W>
<H>93</H>
<L>1330</L>
<T>57</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>5</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>166</W>
<H>153</H>
<L>1361</L>
<T>319</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>6</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>90</W>
<H>108</H>
<L>1691</L>
<T>324</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>7</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>130</W>
<H>303</H>
<L>1660</L>
<T>8</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>8</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>191</W>
<H>213</H>
<L>235</L>
<T>792</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>9</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>113</W>
<H>138</H>
<L>1556</L>
<T>323</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>10</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>150</W>
<H>93</H>
<L>505</L>
<T>40</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>11</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>157</W>
<H>93</H>
<L>286</L>
<T>40</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>12</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>143</W>
<H>228</H>
<L>508</L>
<T>182</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>13</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>220</W>
<H>243</H>
<L>244</L>
<T>174</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>14</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>151</W>
<H>198</H>
<L>1345</L>
<T>484</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>15</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>245</W>
<H>153</H>
<L>1401</L>
<T>10</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>16</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>280</W>
<H>138</H>
<L>1359</L>
<T>170</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>17</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>147</W>
<H>63</H>
<L>377</L>
<T>633</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>18</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>156</W>
<H>213</H>
<L>220</L>
<T>449</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>19</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>143</W>
<H>93</H>
<L>57</L>
<T>326</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>20</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>155</W>
<H>153</H>
<L>1504</L>
<T>480</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>21</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>85</W>
<H>63</H>
<L>652</L>
<T>906</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>22</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>118</W>
<H>123</H>
<L>20</L>
<T>794</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>23</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>171</W>
<H>168</H>
<L>35</L>
<T>137</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>24</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>82</W>
<H>108</H>
<L>10</L>
<T>642</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>25</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>114</W>
<H>108</H>
<L>65</L>
<T>437</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>26</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>195</W>
<H>348</H>
<L>597</L>
<T>513</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>27</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>195</W>
<H>378</H>
<L>863</L>
<T>497</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>28</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>113</W>
<H>63</H>
<L>103</L>
<T>671</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>29</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>98</W>
<H>108</H>
<L>1818</L>
<T>11</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>30</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>178</W>
<H>348</H>
<L>721</L>
<T>122</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>31</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>178</W>
<H>378</H>
<L>967</L>
<T>108</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>32</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>132</W>
<H>93</H>
<L>1820</L>
<T>133</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>33</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>136</W>
<H>108</H>
<L>1952</L>
<T>22</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>34</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>166</W>
<H>123</H>
<L>2007</L>
<T>155</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>35</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>192</W>
<H>78</H>
<L>2007</L>
<T>297</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>36</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>177</W>
<H>138</H>
<L>2007</L>
<T>394</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>37</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>64</W>
<H>63</H>
<L>778</L>
<T>11</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>38</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>128</W>
<H>153</H>
<L>2018</L>
<T>556</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>39</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>105</W>
<H>123</H>
<L>2147</L>
<T>12</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>40</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>150</W>
<H>138</H>
<L>2285</L>
<T>25</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>41</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>141</W>
<H>153</H>
<L>2290</L>
<T>259</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>42</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>159</W>
<H>108</H>
<L>2291</L>
<T>435</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>43</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>131</W>
<H>108</H>
<L>1837</L>
<T>466</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>44</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>109</W>
<H>168</H>
<L>1840</L>
<T>264</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
</ENTITYCONTROLS>
<SUBCATEGORYCONTROLS>
</SUBCATEGORYCONTROLS>
<TEXTAREACONTROLS>
</TEXTAREACONTROLS>
<STAMPCONTROLS>
</STAMPCONTROLS>
<GROUPBOXESCONTROLS>
</GROUPBOXESCONTROLS>
<RELATIONSHIPCONNECTORS>
<RELC>
<ID>176</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>5000</FROMRELATIVEX>
<FROMRELATIVEY>5000</FROMRELATIVEY>
<TORELATIVEX>5000</TORELATIVEX>
<TORELATIVEY>5000</TORELATIVEY>
<POINTS>
<POINT>
<X>214</X>
<Y>87</Y>
</POINT>
<POINT>
<X>244</X>
<Y>87</Y>
</POINT>
<POINT>
<X>244</X>
<Y>86</Y>
</POINT>
<POINT>
<X>285</X>
<Y>86</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>177</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>5467</FROMRELATIVEX>
<FROMRELATIVEY>5000</FROMRELATIVEY>
<TORELATIVEX>5000</TORELATIVEX>
<TORELATIVEY>5000</TORELATIVEY>
<POINTS>
<POINT>
<X>504</X>
<Y>86</Y>
</POINT>
<POINT>
<X>470</X>
<Y>86</Y>
</POINT>
<POINT>
<X>470</X>
<Y>86</Y>
</POINT>
<POINT>
<X>443</X>
<Y>86</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>178</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>5000</FROMRELATIVEX>
<FROMRELATIVEY>5000</FROMRELATIVEY>
<TORELATIVEX>5000</TORELATIVEX>
<TORELATIVEY>5000</TORELATIVEY>
<POINTS>
<POINT>
<X>580</X>
<Y>133</Y>
</POINT>
<POINT>
<X>580</X>
<Y>155</Y>
</POINT>
<POINT>
<X>580</X>
<Y>155</Y>
</POINT>
<POINT>
<X>580</X>
<Y>181</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>179</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>4000</FROMRELATIVEX>
<FROMRELATIVEY>5000</FROMRELATIVEY>
<TORELATIVEX>4755</TORELATIVEX>
<TORELATIVEY>5000</TORELATIVEY>
<POINTS>
<POINT>
<X>675</X>
<Y>512</Y>
</POINT>
<POINT>
<X>675</X>
<Y>491</Y>
</POINT>
<POINT>
<X>576</X>
<Y>491</Y>
</POINT>
<POINT>
<X>576</X>
<Y>410</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>180</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>5000</FROMRELATIVEX>
<FROMRELATIVEY>5000</FROMRELATIVEY>
<TORELATIVEX>5000</TORELATIVEX>
<TORELATIVEY>5000</TORELATIVEY>
<POINTS>
<POINT>
<X>720</X>
<Y>296</Y>
</POINT>
<POINT>
<X>695</X>
<Y>296</Y>
</POINT>
<POINT>
<X>695</X>
<Y>296</Y>
</POINT>
<POINT>
<X>651</X>
<Y>296</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>181</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>4500</FROMRELATIVEX>
<FROMRELATIVEY>4912</FROMRELATIVEY>
<TORELATIVEX>5000</TORELATIVEX>
<TORELATIVEY>5000</TORELATIVEY>
<POINTS>
<POINT>
<X>507</X>
<Y>294</Y>
</POINT>
<POINT>
<X>476</X>
<Y>294</Y>
</POINT>
<POINT>
<X>476</X>
<Y>296</Y>
</POINT>
<POINT>
<X>464</X>
<Y>296</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>182</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>5000</FROMRELATIVEX>
<FROMRELATIVEY>5000</FROMRELATIVEY>
<TORELATIVEX>4500</TORELATIVEX>
<TORELATIVEY>4368</TORELATIVEY>
<POINTS>
<POINT>
<X>524</X>
<Y>665</Y>
</POINT>
<POINT>
<X>556</X>
<Y>665</Y>
</POINT>
<POINT>
<X>556</X>
<Y>665</Y>
</POINT>
<POINT>
<X>596</X>
<Y>665</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>183</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>5000</FROMRELATIVEX>
<FROMRELATIVEY>5000</FROMRELATIVEY>
<TORELATIVEX>5000</TORELATIVEX>
<TORELATIVEY>6609</TORELATIVEY>
<POINTS>
<POINT>
<X>694</X>
<Y>905</Y>
</POINT>
<POINT>
<X>694</X>
<Y>879</Y>
</POINT>
<POINT>
<X>695</X>
<Y>879</Y>
</POINT>
<POINT>
<X>695</X>
<Y>861</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>184</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>5500</FROMRELATIVEX>
<FROMRELATIVEY>5000</FROMRELATIVEY>
<TORELATIVEX>5000</TORELATIVEX>
<TORELATIVEY>5000</TORELATIVEY>
<POINTS>
<POINT>
<X>792</X>
<Y>687</Y>
</POINT>
<POINT>
<X>820</X>
<Y>687</Y>
</POINT>
<POINT>
<X>820</X>
<Y>686</Y>
</POINT>
<POINT>
<X>862</X>
<Y>686</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>185</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>5538</FROMRELATIVEX>
<FROMRELATIVEY>2126</FROMRELATIVEY>
<TORELATIVEX>5000</TORELATIVEX>
<TORELATIVEY>6954</TORELATIVEY>
<POINTS>
<POINT>
<X>705</X>
<Y>512</Y>
</POINT>
<POINT>
<X>705</X>
<Y>491</Y>
</POINT>
<POINT>
<X>810</X>
<Y>491</Y>
</POINT>
<POINT>
<X>810</X>
<Y>470</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>186</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>5000</FROMRELATIVEX>
<FROMRELATIVEY>5000</FROMRELATIVEY>
<TORELATIVEX>5000</TORELATIVEX>
<TORELATIVEY>833</TORELATIVEY>
<POINTS>
<POINT>
<X>810</X>
<Y>74</Y>
</POINT>
<POINT>
<X>810</X>
<Y>97</Y>
</POINT>
<POINT>
<X>810</X>
<Y>97</Y>
</POINT>
<POINT>
<X>810</X>
<Y>121</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>187</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>5000</FROMRELATIVEX>
<FROMRELATIVEY>5029</FROMRELATIVEY>
<TORELATIVEX>5000</TORELATIVEX>
<TORELATIVEY>5000</TORELATIVEY>
<POINTS>
<POINT>
<X>899</X>
<Y>297</Y>
</POINT>
<POINT>
<X>937</X>
<Y>297</Y>
</POINT>
<POINT>
<X>937</X>
<Y>297</Y>
</POINT>
<POINT>
<X>966</X>
<Y>297</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>188</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>0,1,4,0</PEN>
<FROMRELATIVEX>5000</FROMRELATIVEX>
<FROMRELATIVEY>5000</FROMRELATIVEY>
<TORELATIVEX>5000</TORELATIVEX>
<TORELATIVEY>5000</TORELATIVEY>
<POINTS>
<POINT>
<X>2360</X>
<Y>163</Y>
</POINT>
<POINT>
<X>2360</X>
<Y>221</Y>
</POINT>
<POINT>
<X>2360</X>
<Y>221</Y>
</POINT>
<POINT>
<X>2360</X>
<Y>258</Y>
</POINT>
</POINTS>
</RELC>
</RELATIONSHIPCONNECTORS>
<SUBCATEGORYCONNECTORS>
</SUBCATEGORYCONNECTORS>
</CONTROLS>
</DIAGRAMS>
</VERSION><VERSION>
<VERSIONINFO>
<VERSIONNUMBER>1</VERSIONNUMBER>
<VERSIONLABEL>Archived imported model 2019-08-14</VERSIONLABEL>
<VERSIONDATE>2019-08-14 10:22</VERSIONDATE>
<VERSIONCOMMENTS>This version has been archived automatically after importing from the database.</VERSIONCOMMENTS>
<VERSIONTYPE></VERSIONTYPE>
<VERSIONTYPEDESC>Diagrams and data dictionary</VERSIONTYPEDESC>
<VERSIONDBID>mssqlserver2008</VERSIONDBID>
</VERSIONINFO>
<PROJECTSETTINGS>
<COMMONSETTINGS>
<PROJECTFILENAME>C:\Users\lizet.silva\Documents\Project9.dez</PROJECTFILENAME>
<MODIFIED></MODIFIED>
<CREATED></CREATED>
<CREATED2></CREATED2>
<PROJECTNAME></PROJECTNAME>
<DESCRIPTION></DESCRIPTION>
<AUTHOR></AUTHOR>
<COPYRIGHT></COPYRIGHT>
<LASTGENERATEDFILES></LASTGENERATEDFILES>
<PRINTORIENTATION>PORTRAIT</PRINTORIENTATION>
<PRINTPAGETYPE>A4</PRINTPAGETYPE>
<DEFTABLEOPTIONS></DEFTABLEOPTIONS>
<DEFINDEXOPTIONS></DEFINDEXOPTIONS>
<AUTOCREATEINDEXESONKEYS>0</AUTOCREATEINDEXESONKEYS>
<BEGINDATABASESCRIPT></BEGINDATABASESCRIPT>
<ENDDATABASESCRIPT></ENDDATABASESCRIPT>
<BEGINALTERDATABASESCRIPT></BEGINALTERDATABASESCRIPT>
<ENDALTERDATABASESCRIPT></ENDALTERDATABASESCRIPT>
<BEGINDROPDATABASESCRIPT></BEGINDROPDATABASESCRIPT>
<ENDDROPDATABASESCRIPT></ENDDROPDATABASESCRIPT>
</COMMONSETTINGS>
<NAMETEMPLATES>
<PKCONNAMETEMPLATE>PK_%table%</PKCONNAMETEMPLATE>
<FKCONNAMETEMPLATE>%relname%</FKCONNAMETEMPLATE>
<CCONNAMETEMPLATE>CC_%table%_%column%</CCONNAMETEMPLATE>
<NOTNULLCONNAMETEMPLATE>NN_%table%_%column%</NOTNULLCONNAMETEMPLATE>
<DEFAULTCONNAMETEMPLATE>DEF_%table%_%column%</DEFAULTCONNAMETEMPLATE>
<TUCONNAMETEMPLATE>TUC_%table%_%counter%</TUCONNAMETEMPLATE>
<TCCONNAMETEMPLATE>TCC_%table%_%counter%</TCCONNAMETEMPLATE>
<RELNAMETEMPLATE>%parent%_%child%</RELNAMETEMPLATE>
<INDEXNAMETEMPLATE>IDX_%table%_%counter%</INDEXNAMETEMPLATE>
<DEFAULTSCHEMANAME></DEFAULTSCHEMANAME>
<PKINDEXNAMETEMPLATE>IDX_%table%_PK</PKINDEXNAMETEMPLATE>
<FKINDEXNAMETEMPLATE>IDX_%table%_%counter%_FK</FKINDEXNAMETEMPLATE>
<AKINDEXNAMETEMPLATE>IDX_%table%_%counter%_AK</AKINDEXNAMETEMPLATE>
</NAMETEMPLATES>
<COMPARESETTINGS>
</COMPARESETTINGS>
<ImpDB_DBParams>
</ImpDB_DBParams>
<ImpDB_Options>
</ImpDB_Options>
<GenDB_DBParams>
</GenDB_DBParams>
<GenDB_Options>
</GenDB_Options>
<AltDB_DBParams>
<SERVERNAME>172.17.0.59</SERVERNAME>
<DATABASENAME>dbSujetosObligados</DATABASENAME>
<USENTLOGIN>0</USENTLOGIN>
<USERNAME>sa</USERNAME>
<SCHEMANAME>dbo</SCHEMANAME>
</AltDB_DBParams>
<AltDB_Options>
</AltDB_Options>
<UpdModel_DBParams>
<SERVERNAME>172.17.0.59</SERVERNAME>
<DATABASENAME>dbSujetosObligados</DATABASENAME>
<USENTLOGIN>0</USENTLOGIN>
<USERNAME>sa</USERNAME>
<SCHEMANAME>dbo</SCHEMANAME>
</UpdModel_DBParams>
<UpdModel_Options>
</UpdModel_Options>
<UpdDB_DBParams>
<SERVERNAME>172.17.0.59</SERVERNAME>
<DATABASENAME>dbSujetosObligados</DATABASENAME>
<USENTLOGIN>0</USENTLOGIN>
<USERNAME>sa</USERNAME>
<SCHEMANAME>dbo</SCHEMANAME>
</UpdDB_DBParams>
<UpdDB_Options>
</UpdDB_Options>
<CompVer_DBParams>
</CompVer_DBParams>
<CompVer_Options>
</CompVer_Options>
<Merge_Settings>
</Merge_Settings>
<Rep_Settings>
</Rep_Settings>
<CONGENDIRECTIVES></CONGENDIRECTIVES>
</PROJECTSETTINGS>
<DATADICT>
<DBID>mssqlserver2008</DBID>
<LASTID>188</LASTID>
<DOMAINS>
</DOMAINS>
<ENTITIES>
<ENT>
<NAME>CasosRenovacionDocumentos</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>3</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_CasosRenovacionDocumentos</NAME>
<NAMETEMPLATE>PK_CasosRenovacionDocumentos</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>id_caso</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>descripcion</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>VARCHAR</DTLISTNAME>
<LE>40</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>certimpre</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>9</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<ATTRIBUTES>
<ATTR>
<NAME>idCertificadoImpresion</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>imagen</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>IMAGE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>seq_Func</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>tipo</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>Dominio</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>5</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<ATTRIBUTES>
<ATTR>
<NAME>Dominio</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Codigo</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>VARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Descripcion</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Estado</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>LOG_REGISTRO_REQUISITO</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>9</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_LOG_REGISTRO_REQUISITO</NAME>
<NAMETEMPLATE>PK_LOG_REGISTRO_REQUISITO</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idLogRegistro_Requisito</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idRegistro_Requisito</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>nusuario</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>25</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Fecha</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Operacion</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Observacion</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Proveido</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Estado</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>LogsTrans</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>6</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_LogsTrans</NAME>
<NAMETEMPLATE>PK_LogsTrans</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>nUsuario</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>25</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Fecha</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Transaccion</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>30</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Estado</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>NotarioBak</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>19</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<ATTRIBUTES>
<ATTR>
<NAME>Nombres</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Ap_Paterno</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Ap_Materno</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Ap_De_Casada</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Nro_Cedula</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Nro_Notario</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>FLOAT</DTLISTNAME>
<LE>8</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Departamento</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Provincia</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Localidad</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Tipo_Localidad</NAME>
<ID>11</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Circunscripcion</NAME>
<ID>12</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Direccion</NAME>
<ID>13</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Zona</NAME>
<ID>14</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Tipo_Notario</NAME>
<ID>15</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Fecha_de_Nombramiento</NAME>
<ID>16</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Correo_electrónico</NAME>
<ID>17</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Nro_Celular</NAME>
<ID>18</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Telefono</NAME>
<ID>19</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>255</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>Observacion_Tramite_Sistemas</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>13</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_Observacion_Tramite_Terminado</NAME>
<NAMETEMPLATE>PK_Observacion_Tramite_Terminado</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idObservacion_Terminado</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Usuario_Creado</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Fecha_Aprobacion</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Fecha_Correccion</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Usuario_siso</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Usuario_sadi</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Nro_Informe</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idFuncionarioLegalAnalista</NAME>
<ID>11</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idFuncionarioLegalJefe</NAME>
<ID>12</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>13</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>obstramitearchivo</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>8</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<ATTRIBUTES>
<ATTR>
<NAME>idObservacionTramite</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Observacion</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Fecha_Archivado</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Fecha_correccion</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Secuencia</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>PARAM_REQUISITOS_SO</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>5</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_PARAM_REQUISITOS_SO</NAME>
<NAMETEMPLATE>PK_PARAM_REQUISITOS_SO</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idParam</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>COD_PARAM</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>DESCRIPCION</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>150</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>ESTADO</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>Registro_casoRenovacion</NAME>
<ID>11</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>5</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_Registro_casoRenovacion</NAME>
<NAMETEMPLATE>PK_Registro_casoRenovacion</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>id_RrCrenv</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>1</SD>
<INC>1</INC>
<AN>1</AN>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idParam</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>3</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>VARCHAR</DTLISTNAME>
<LE>40</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>id_caso</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>5</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>REGISTRO_REQUISITO</NAME>
<ID>12</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>14</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_REGISTRO_REQUISITO</NAME>
<NAMETEMPLATE>PK_REGISTRO_REQUISITO</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idRegistro_Requisito</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idParam</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idFuncionario</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>fecha_registro</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>ESTADO</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>nro_documento</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>fecha_documento</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>imagen</NAME>
<ID>11</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>IMAGE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Secuencia</NAME>
<ID>12</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Estado_DU</NAME>
<ID>13</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>estado_renovacion</NAME>
<ID>14</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>BIT</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>14</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
<DEFCON>
<NAME>DF__REGISTRO___estad__30242045</NAME>
<NAMETEMPLATE>DF__REGISTRO___estad__30242045</NAMETEMPLATE>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>0</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>6</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>14</ATTRIBUTEID>
</ATTRIBUTEIDS>
</DEFCON>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>REGISTRO_REQUISITOHistRenovados</NAME>
<ID>13</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>15</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_idRegistro_ReqHist</NAME>
<NAMETEMPLATE>PK_idRegistro_ReqHist</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idRegistro_Requisito_hist</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>1</SD>
<INC>1</INC>
<AN>1</AN>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idRegistro_Requisito</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>3</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idParam</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idFuncionario</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>fecha_registro</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>ESTADO</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>nro_documento</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>fecha_documento</NAME>
<ID>11</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>imagen</NAME>
<ID>12</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>IMAGE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Secuencia</NAME>
<ID>13</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Estado_DU</NAME>
<ID>14</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>fechaRenovado</NAME>
<ID>15</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>ReporteSujetoObligado</NAME>
<ID>14</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>12</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<ATTRIBUTES>
<ATTR>
<NAME>SUJETO_OBLIGADO</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>TIPO_EMPRESA</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>NIT</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>30</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>nombre</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>NOMBRE_REPRESENTANTE</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Descripcion</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_CIUDAD_LOCALIDAD</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>200</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_ZONA</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_DIRECCION</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>250</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_TELEFONO</NAME>
<ID>11</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CORREO_ELECTRONICO</NAME>
<ID>12</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tabla_auxiliar_eli_tCertificacionImpresion</NAME>
<ID>15</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>9</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<ATTRIBUTES>
<ATTR>
<NAME>idCertificadoImpresion</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>imagen</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>IMAGE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>seq_Func</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>tipo</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tabla_auxiliar_eli_tObservacionTramite_archivo</NAME>
<ID>16</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>8</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<ATTRIBUTES>
<ATTR>
<NAME>idObservacionTramite</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Observacion</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Fecha_Archivado</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Fecha_correccion</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Secuencia</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tActividadEconomica</NAME>
<ID>17</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>3</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tActividadEconomica</NAME>
<NAMETEMPLATE>PK_tActividadEconomica</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idActividadEconomica</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>nombre</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tBajaFuncionario</NAME>
<ID>18</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>13</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tBajaFuncionario</NAME>
<NAMETEMPLATE>PK_tBajaFuncionario</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idBajaFuncionario</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idFuncionarioNuevo</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idFuncionarioAnterior</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idTramiteAnterior</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idTramiteNuevo</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>fecha_registro</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>fecha_aprobacion_juridica</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>fecha_archivado</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>TipoBaja</NAME>
<ID>11</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>12</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Estado</NAME>
<ID>13</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>10</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tBajaSujetoObligado</NAME>
<ID>19</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>5</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tBajaSujetoObligado</NAME>
<NAMETEMPLATE>PK_tBajaSujetoObligado</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idBajaSujetoObligado</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Estado</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tCertificadoImpresion</NAME>
<ID>20</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>9</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tCertificadoImpresion</NAME>
<NAMETEMPLATE>PK_tCertificadoImpresion</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idCertificadoImpresion</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>imagen</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>IMAGE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>seq_Func</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>tipo</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tCiudad</NAME>
<ID>21</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>3</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tCiudad</NAME>
<NAMETEMPLATE>PK_tCiudad</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idCiudad</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>Descripcion</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tComplemento</NAME>
<ID>22</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>7</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tComplemento</NAME>
<NAMETEMPLATE>PK_tComplemento</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idComplemento</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>descripción</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>nombre_formulario</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>secuencia</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>grupo</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tComunicacionCambioFR</NAME>
<ID>23</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>10</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tComunicacionCambioFR</NAME>
<NAMETEMPLATE>PK_tComunicacionCambioFR</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idComunicacionCambioFR</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idFuncionario</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>motivo</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>1000</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>fecha_notificacion</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>fecha_desvinculacion</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tCorreo</NAME>
<ID>24</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>6</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tCorreo</NAME>
<NAMETEMPLATE>PK_tCorreo</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idCorreo</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>asunto</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>250</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>cuerpo</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>1000</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Estado</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tDetalleCorreo</NAME>
<ID>25</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>6</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tDetalleCorreo</NAME>
<NAMETEMPLATE>PK_tDetalleCorreo</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idDetalleCorreo</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idCorreo</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Estado</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tEntidad</NAME>
<ID>26</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>22</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tEntidad</NAME>
<NAMETEMPLATE>PK_tEntidad</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idEntidad</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>SUJETO_OBLIGADO</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>TIPO_EMPRESA</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OTRO_TIPO_EMPRESA</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>NIT</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>30</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CLAVE_TIPO_SUJETO_OBLIGADO</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OTRO_TIPO_SO</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>NOMBRE_REPRESENTANTE</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_DEPARTAMENTO</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>20</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_CIUDAD_LOCALIDAD</NAME>
<ID>11</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>200</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_ZONA</NAME>
<ID>12</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_DIRECCION</NAME>
<ID>13</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>250</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_TELEFONO</NAME>
<ID>14</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CORREO_ELECTRONICO</NAME>
<ID>15</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OBSERVACIONES</NAME>
<ID>16</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>250</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idActividadEconomica</NAME>
<ID>17</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idCiudad</NAME>
<ID>18</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>CODIGO_VERIFICADOR</NAME>
<ID>19</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>ESTADO_IMPRESION</NAME>
<ID>20</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>ESTADO</NAME>
<ID>21</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>nusuario</NAME>
<ID>22</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>25</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tEntidadHistRenovados</NAME>
<ID>27</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>24</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tEntidad2</NAME>
<NAMETEMPLATE>PK_tEntidad2</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idEntidad_hist</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>1</SD>
<INC>1</INC>
<AN>1</AN>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>3</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>SUJETO_OBLIGADO</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>TIPO_EMPRESA</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OTRO_TIPO_EMPRESA</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>NIT</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>30</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CLAVE_TIPO_SUJETO_OBLIGADO</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OTRO_TIPO_SO</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>NOMBRE_REPRESENTANTE</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_DEPARTAMENTO</NAME>
<ID>11</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>20</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_CIUDAD_LOCALIDAD</NAME>
<ID>12</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>200</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_ZONA</NAME>
<ID>13</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_DIRECCION</NAME>
<ID>14</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>250</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OFCEN_TELEFONO</NAME>
<ID>15</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CORREO_ELECTRONICO</NAME>
<ID>16</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OBSERVACIONES</NAME>
<ID>17</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>250</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idActividadEconomica</NAME>
<ID>18</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idCiudad</NAME>
<ID>19</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>CODIGO_VERIFICADOR</NAME>
<ID>20</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>ESTADO_IMPRESION</NAME>
<ID>21</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>ESTADO</NAME>
<ID>22</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>nusuario</NAME>
<ID>23</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>25</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>fecha_renovacion</NAME>
<ID>24</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tEstado</NAME>
<ID>28</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>3</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tEstado</NAME>
<NAMETEMPLATE>PK_tEstado</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>Estado_Tramite</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>Descripcion</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tFormulario</NAME>
<ID>29</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>6</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tFormulario</NAME>
<NAMETEMPLATE>PK_tFormulario</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idFormulario</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>Descripcion</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2000</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tFuncionario</NAME>
<ID>30</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>22</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tAnalistaCumplimiento</NAME>
<NAMETEMPLATE>PK_tAnalistaCumplimiento</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idFuncionario</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>PN_NOMBRE</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_PATERNO</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_MATERNO</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_CASADA</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_DOCUMENTO</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>30</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_TAB_CIUDAD</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>8</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_TAB_PAIS_NACIONALIDAD</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>8</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_FECHA_NACIMIENTO</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>PN_CARGO</NAME>
<ID>11</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CM_DIRECCION</NAME>
<ID>12</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>250</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CM_TELEFONO</NAME>
<ID>13</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CM_INTERNO</NAME>
<ID>14</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>20</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CM_CELULAR</NAME>
<ID>15</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CORREO_ELECTRONICO</NAME>
<ID>16</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OBSERVACIONES</NAME>
<ID>17</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>200</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>18</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idPais</NAME>
<ID>19</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>TIPO_FUNCIONARIO</NAME>
<ID>20</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Observacion_subsanada</NAME>
<ID>21</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>10</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Motivo_o_Causal</NAME>
<ID>22</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tFuncionarioHistRenovados</NAME>
<ID>31</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>24</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tFuncionarioHistRenov</NAME>
<NAMETEMPLATE>PK_tFuncionarioHistRenov</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idFuncionario_hist</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>BIGINT</DTLISTNAME>
<SD>1</SD>
<INC>1</INC>
<AN>1</AN>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idFuncionario</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>3</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>PN_NOMBRE</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_PATERNO</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_MATERNO</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_CASADA</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_DOCUMENTO</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>30</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_TAB_CIUDAD</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>8</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_TAB_PAIS_NACIONALIDAD</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>8</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>PN_FECHA_NACIMIENTO</NAME>
<ID>11</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>PN_CARGO</NAME>
<ID>12</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CM_DIRECCION</NAME>
<ID>13</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>250</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CM_TELEFONO</NAME>
<ID>14</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CM_INTERNO</NAME>
<ID>15</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>20</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CM_CELULAR</NAME>
<ID>16</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>CORREO_ELECTRONICO</NAME>
<ID>17</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>OBSERVACIONES</NAME>
<ID>18</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>200</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>19</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idPais</NAME>
<ID>20</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>TIPO_FUNCIONARIO</NAME>
<ID>21</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Observacion_subsanada</NAME>
<ID>22</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>10</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Motivo_o_Causal</NAME>
<ID>23</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>fecha_renovacion</NAME>
<ID>24</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>24</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
<DEFCON>
<NAME>DF_tFuncionarioHistRenovados_fecha_renovacion</NAME>
<NAMETEMPLATE>DF_tFuncionarioHistRenovados_fecha_renovacion</NAMETEMPLATE>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>(1990)-(1))-(1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>6</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>24</ATTRIBUTEID>
</ATTRIBUTEIDS>
</DEFCON>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tFuncionarioLegal</NAME>
<ID>32</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>5</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tFuncionarioLegal</NAME>
<NAMETEMPLATE>PK_tFuncionarioLegal</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idFuncionarioLegal</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>item</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>nombre</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tImprimirReporte</NAME>
<ID>33</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>6</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tImprimirReporte</NAME>
<NAMETEMPLATE>PK_tImprimirReporte</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idImprimir_Reporte</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>formulario</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>nro_reporte</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tObservacionMesa_Entrada</NAME>
<ID>34</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>7</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tObservacionMesa_Entrada</NAME>
<NAMETEMPLATE>PK_tObservacionMesa_Entrada</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idObservacionMEntrada</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>fecha_recepcion</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Estado</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>10</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tObservacionRegistro_Requisito</NAME>
<ID>35</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>4</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<ATTRIBUTES>
<ATTR>
<NAME>idObservacionTramite</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Observacion</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tObservacionTramite_Archivo</NAME>
<ID>36</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>8</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tObservacionTramite_Archivo</NAME>
<NAMETEMPLATE>PK_tObservacionTramite_Archivo</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idObservacionTramite</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Observacion</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Fecha_Archivado</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Fecha_correccion</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Secuencia</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tPais</NAME>
<ID>37</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>3</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tPais</NAME>
<NAMETEMPLATE>PK_tPais</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idPais</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>nombre</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tReemplazoTemporal</NAME>
<ID>38</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>9</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tReemplazoTemporal</NAME>
<NAMETEMPLATE>PK_tReemplazoTemporal</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idTemporal</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idFuncionarioFR</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idFuncionarioAC</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>FechaInicio</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>FechaFin</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATE</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>motivo</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>500</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tReportes</NAME>
<ID>39</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>7</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tReportes</NAME>
<NAMETEMPLATE>PK_tReportes</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idReportes</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>descripción</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>nombre_reporte</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>secuencia</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>grupo</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tTramite</NAME>
<ID>40</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>8</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tTramite</NAME>
<NAMETEMPLATE>PK_tTramite</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idTramite_Secuencia</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idEntidad</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Estado_Tramite</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>50</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Observacion_subsanada</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>10</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Secuencia</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>Estado_DU</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>2</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tTramiteClasificacion</NAME>
<ID>41</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>9</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK__tTramite__15E4D34ACA22ADCC</NAME>
<NAMETEMPLATE>PK__tTramite__15E4D34ACA22ADCC</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idTramite_Secuencia</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>Tipo_Funcionario</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>VARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Tipo_Tramite</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>VARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Requisitos</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>BIT</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>EstadoImpresion</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>usuarioRegistro</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>VARCHAR</DTLISTNAME>
<LE>200</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>fechaRegistro</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>DATETIME</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idTramite</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tUsuarioComplemento</NAME>
<ID>42</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>6</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tUsuarioComplemento</NAME>
<NAMETEMPLATE>PK_tUsuarioComplemento</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idUsuarioComplemento</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>nusuario</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NCHAR</DTLISTNAME>
<LE>25</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idComplemento</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>habilita</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>BIT</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>tUsuarioReportes</NAME>
<ID>43</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>6</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_tUsuarioReportes</NAME>
<NAMETEMPLATE>PK_tUsuarioReportes</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>idUsuarioReportes</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>nusuario</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>VARCHAR</DTLISTNAME>
<LE>25</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>idReportes</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>habilita</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>BIT</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
<ATTR>
<NAME>idLogTrans</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>INTEGER</DTLISTNAME>
<SD>0</SD>
<INC>1</INC>
</DT>
</ATTR>
</ATTRIBUTES>
</ENT>
<ENT>
<NAME>Users</NAME>
<ID>44</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<ATTRLASTID>10</ATTRLASTID>
<IDXLASTID>1</IDXLASTID>
<TRGLASTID>1</TRGLASTID>
<CONLASTID>1</CONLASTID>
<PKCON>
<NAME>PK_Users</NAME>
<NAMETEMPLATE>PK_Users</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>3</CONTYPE>
<PKCONCLUSTERING>CLUSTERED</PKCONCLUSTERING>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</PKCON>
<ATTRIBUTES>
<ATTR>
<NAME>nusuario</NAME>
<ID>2</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>VARCHAR</DTLISTNAME>
<LE>25</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
<NNCON>
<NAME></NAME>
<NAMETEMPLATE></NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<VALUE>1</VALUE>
<CONLEVEL>1</CONLEVEL>
<CONTYPE>5</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</NNCON>
</ATTR>
<ATTR>
<NAME>idfuncionario</NAME>
<ID>3</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>VARCHAR</DTLISTNAME>
<LE>25</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>Pwd</NAME>
<ID>4</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>VARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>usuarioRol</NAME>
<ID>5</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>nombres</NAME>
<ID>6</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>apellido_paterno</NAME>
<ID>7</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>apellido_materno</NAME>
<ID>8</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>correo</NAME>
<ID>9</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>100</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
<ATTR>
<NAME>estado</NAME>
<ID>10</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<DOMAINID>-1</DOMAINID>
<DT>
<DTLISTNAME>NVARCHAR</DTLISTNAME>
<LE>3</LE>
<SD>0</SD>
<INC>1</INC>
</DT>
<COLLATE>Modern_Spanish_CI_AS</COLLATE>
</ATTR>
</ATTRIBUTES>
</ENT>
</ENTITIES>
<SUBCATEGORIES>
</SUBCATEGORIES>
<TEXTAREAS>
</TEXTAREAS>
<GROUPBOXES>
</GROUPBOXES>
<STAMPS>
</STAMPS>
<SEQUENCES>
</SEQUENCES>
<PROCEDURES>
<PROCEDURE>
<NAME>sp_alterdiagram</NAME>
<ID>45</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE PROCEDURE %procname%
	(
		@diagramname 	sysname,
		@owner_id	int	= null,
		@version 	int,
		@definition 	varbinary(max)
	)
	WITH EXECUTE AS 'dbo'
	AS
	BEGIN
		set nocount on

		declare @theId 			int
		declare @retval 		int
		declare @IsDbo 			int

		declare @UIDFound 		int
		declare @DiagId			int
		declare @ShouldChangeUID	int

		if(@diagramname is null)
		begin
			RAISERROR ('Invalid ARG', 16, 1)
			return -1
		end

		execute as caller;
		select @theId = DATABASE_PRINCIPAL_ID();
		select @IsDbo = IS_MEMBER(N'db_owner');
		if(@owner_id is null)
			select @owner_id = @theId;
		revert;

		select @ShouldChangeUID = 0
		select @DiagId = diagram_id, @UIDFound = principal_id from dbo.sysdiagrams where principal_id = @owner_id and name = @diagramname

		if(@DiagId IS NULL or (@IsDbo = 0 and @theId &lt;&gt; @UIDFound))
		begin
			RAISERROR ('Diagram does not exist or you do not have permission.', 16, 1);
			return -3
		end

		if(@IsDbo &lt;&gt; 0)
		begin
			if(@UIDFound is null or USER_NAME(@UIDFound) is null) -- invalid principal_id
			begin
				select @ShouldChangeUID = 1 ;
			end
		end

		-- update dds data
		update dbo.sysdiagrams set definition = @definition where diagram_id = @DiagId ;

		-- change owner
		if(@ShouldChangeUID = 1)
			update dbo.sysdiagrams set principal_id = @theId where diagram_id = @DiagId ;

		-- update dds version
		if(@version is not null)
			update dbo.sysdiagrams set version = @version where diagram_id = @DiagId ;

		return 0
	END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>sp_dropdiagram</NAME>
<ID>46</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE PROCEDURE %procname%
	(
		@diagramname 	sysname,
		@owner_id	int	= null
	)
	WITH EXECUTE AS 'dbo'
	AS
	BEGIN
		set nocount on
		declare @theId 			int
		declare @IsDbo 			int

		declare @UIDFound 		int
		declare @DiagId			int

		if(@diagramname is null)
		begin
			RAISERROR ('Invalid value', 16, 1);
			return -1
		end

		EXECUTE AS CALLER;
		select @theId = DATABASE_PRINCIPAL_ID();
		select @IsDbo = IS_MEMBER(N'db_owner');
		if(@owner_id is null)
			select @owner_id = @theId;
		REVERT;

		select @DiagId = diagram_id, @UIDFound = principal_id from dbo.sysdiagrams where principal_id = @owner_id and name = @diagramname
		if(@DiagId IS NULL or (@IsDbo = 0 and @UIDFound &lt;&gt; @theId))
		begin
			RAISERROR ('Diagram does not exist or you do not have permission.', 16, 1)
			return -3
		end

		delete from dbo.sysdiagrams where diagram_id = @DiagId;

		return 0;
	END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>fn_diagramobjects</NAME>
<ID>47</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE FUNCTION %procname%()
	RETURNS int
	WITH EXECUTE AS N'dbo'
	AS
	BEGIN
		declare @id_upgraddiagrams		int
		declare @id_sysdiagrams			int
		declare @id_helpdiagrams		int
		declare @id_helpdiagramdefinition	int
		declare @id_creatediagram	int
		declare @id_renamediagram	int
		declare @id_alterdiagram 	int
		declare @id_dropdiagram		int
		declare @InstalledObjects	int

		select @InstalledObjects = 0

		select 	@id_upgraddiagrams = object_id(N'dbo.sp_upgraddiagrams'),
			@id_sysdiagrams = object_id(N'dbo.sysdiagrams'),
			@id_helpdiagrams = object_id(N'dbo.sp_helpdiagrams'),
			@id_helpdiagramdefinition = object_id(N'dbo.sp_helpdiagramdefinition'),
			@id_creatediagram = object_id(N'dbo.sp_creatediagram'),
			@id_renamediagram = object_id(N'dbo.sp_renamediagram'),
			@id_alterdiagram = object_id(N'dbo.sp_alterdiagram'),
			@id_dropdiagram = object_id(N'dbo.sp_dropdiagram')

		if @id_upgraddiagrams is not null
			select @InstalledObjects = @InstalledObjects + 1
		if @id_sysdiagrams is not null
			select @InstalledObjects = @InstalledObjects + 2
		if @id_helpdiagrams is not null
			select @InstalledObjects = @InstalledObjects + 4
		if @id_helpdiagramdefinition is not null
			select @InstalledObjects = @InstalledObjects + 8
		if @id_creatediagram is not null
			select @InstalledObjects = @InstalledObjects + 16
		if @id_renamediagram is not null
			select @InstalledObjects = @InstalledObjects + 32
		if @id_alterdiagram  is not null
			select @InstalledObjects = @InstalledObjects + 64
		if @id_dropdiagram is not null
			select @InstalledObjects = @InstalledObjects + 128

		return @InstalledObjects
	END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>ps_obtenerEntidadesBaja</NAME>
<ID>48</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>-- ===============================================================
-- Author:		lizet.silva
-- Create date: 20180429
-- Description:	Procedimiento que obtiene los trámites que esten
--				a punto de vencerse transcurrido x años y z meses con un
--				intervalo de n días para enviar un aviso oportuno
--				al sujeto obligado.
--				Nota los SO que hayan iniciado la renovación no reciben correo
-- ===============================================================
CREATE PROCEDURE %procname%
	-- Add the parameters for the stored procedure here
	@nroAnios int,
	@nroMeses int,
	@nroDias int
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	--SET NOCOUNT ON;
SELECT DISTINCT ent.idEntidad,
		ent.SUJETO_OBLIGADO AS sujetoObligado,
		ent.CORREO_ELECTRONICO AS correoSujetoObligado,
		ent.ESTADO AS estadoEntidad,
		tra.Estado_Tramite AS estadoTramite,
		logt.Fecha AS fechaImpresion,
		cer.idTramite,
		cer.idLogTrans
FROM dbo.tEntidad ent
INNER JOIN dbo.tCertificadoImpresion cer ON ent.idEntidad = cer.idEntidad
INNER JOIN dbo.tTramite tra ON tra.idTramite = cer.idTramite
INNER JOIN dbo.LogsTrans logt ON logt.idLogTrans = cer.idLogTrans
LEFT JOIN tTramiteClasificacion tc on tra.idTramite=tc.idTramite
WHERE EXISTS(SELECT c.idEntidad, MAX(l.Fecha) FROM dbo.LogsTrans l
             INNER JOIN dbo.tCertificadoImpresion c ON c.idLogTrans = l.idLogTrans  and c.tipo = 'SO'
			 LEFT JOIN tTramiteClasificacion tc on tra.idTramite=tc.idTramite
		     GROUP BY c.idEntidad  HAVING c.idEntidad = ent.idEntidad AND MAX(l.Fecha) = logt.Fecha)
	         AND ent.idEntidad NOT IN(SELECT tra.idEntidad
									  FROM tTramiteClasificacion t
									  LEFT JOIN tTramite tra on tra.idTramite = t.idTramite)
			--AND ent.ESTADO ='AC'
	        AND ent.ESTADO !='AN' and ent.estado !='BA' and cer.tipo = 'SO' and tra.Estado_Tramite = 'TE'
			--AND (SELECT DATEADD(month, 0, (DATEADD(year, 2, logt.Fecha)))) &lt;= (SELECT DATEADD(day, 0, GETDATE()))
			AND (SELECT DATEADD(month, @nroMeses, (DATEADD(year, @nroAnios, logt.Fecha)))) &lt;= (SELECT DATEADD(day, @nroDias, GETDATE()))
ORDER BY logt.Fecha ASC
END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>ps_verificarEntidadesRenovadas</NAME>
<ID>49</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>-- ===============================================================
-- Author:		lizet.silva
-- Create date: 20170928
-- Description:	Procedimiento que verifica si la entidad realizó
--				una renovación y no la terminó
-- ===============================================================
CREATE PROCEDURE %procname%
	-- Add the parameters for the stored procedure here
	@idEntidad int
AS
BEGIN
	SELECT DISTINCT
       req.[idEntidad]
      ,tra.[idTramite]
      ,req.[fecha_registro]
      ,req.[ESTADO]
      ,req.[Estado_DU]
      ,req.[estado_renovacion]
	  ,req.[Secuencia]
	FROM [dbSujetosObligados].[dbo].[REGISTRO_REQUISITO] req
	INNER JOIN dbo.tTramite tra ON req.idTramite = tra.idTramite
	where ESTADO IN ('AJ', 'AP') AND estado_renovacion = 1 AND req.idEntidad = @idEntidad
END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>ps_obtenerNombreSujetoObligado</NAME>
<ID>50</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE procedure %procname%

@sujeto_obligado nvarchar(200)

as


begin
select [idEntidad]
      ,[SUJETO_OBLIGADO]
      ,[TIPO_EMPRESA]
      ,[OTRO_TIPO_EMPRESA]
      ,[NIT]
      ,[CLAVE_TIPO_SUJETO_OBLIGADO]
      ,[OTRO_TIPO_SO]
      ,[NOMBRE_REPRESENTANTE]
      ,[OFCEN_DEPARTAMENTO]
      ,[OFCEN_CIUDAD_LOCALIDAD]
      ,[OFCEN_ZONA]
      ,[OFCEN_DIRECCION]
      ,[OFCEN_TELEFONO]
      ,[CORREO_ELECTRONICO]
      ,[OBSERVACIONES]
      ,[idActividadEconomica]
      ,[idCiudad]
      ,[CODIGO_VERIFICADOR]
      ,[ESTADO_IMPRESION]
      ,[ESTADO]
      ,[nusuario]
  FROM [dbSujetosObligados].[dbo].[tEntidad]

  where [SUJETO_OBLIGADO] LIKE '%'+@sujeto_obligado+'%' and estado &lt;&gt; 'AN'

  end</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>ps_ActualizarRepresentanteLegalEntidad</NAME>
<ID>51</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE PROCEDURE %procname%
---EMEM---------

    @idEntidad AS BIGINT,
    @NombreRepresentanteLegal AS NVARCHAR(100)

AS
BEGIN
DECLARE @mensaje AS VARCHAR(100);
    SET NOCOUNT ON;
    Begin Tran Tadd

    Begin Try

	UPDATE tEntidad
    set NOMBRE_REPRESENTANTE=@NombreRepresentanteLegal

     where idEntidad=@idEntidad

     SET @mensaje = 'Se realizo correctamente la actualización del representante legal'

	 print  @mensaje
        COMMIT TRAN Tadd



    End try
    Begin Catch

        SET @mensaje = 'Ocurrio un Error: ' + ERROR_MESSAGE() + ' en la línea ' + CONVERT(NVARCHAR(255), ERROR_LINE() ) + '.'
		print  @mensaje
        Rollback TRAN Tadd

    End Catch

END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>ps_ActualizarCorreoElectronicoEntidad</NAME>
<ID>52</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE PROCEDURE %procname%
---EMEM---------

    @idEntidad AS BIGINT,
    @Correo AS NVARCHAR(100)

AS
BEGIN
DECLARE @mensaje AS VARCHAR(100);
    SET NOCOUNT ON;
    Begin Tran Tadd

    Begin Try

	UPDATE tEntidad
    set CORREO_ELECTRONICO=@Correo

     where idEntidad=@idEntidad

     SET @mensaje = 'Se realizo correctamente la actualización del correo electronico'

	 print  @mensaje
        COMMIT TRAN Tadd



    End try
    Begin Catch

        SET @mensaje = 'Ocurrio un Error: ' + ERROR_MESSAGE() + ' en la línea ' + CONVERT(NVARCHAR(255), ERROR_LINE() ) + '.'
		print  @mensaje
        Rollback TRAN Tadd

    End Catch

END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>ps_obtenerFuncionarioRegistroCertificadoTramiteBajaFuncionario</NAME>
<ID>53</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE PROCEDURE %procname%

  ---*******************EMAM*****************
  @idEntidad int
  as

  begin
  print 'Datos de Sujeto Obligado';
  select 'Entidad' as tablaEntidad, [idEntidad]
      ,[SUJETO_OBLIGADO]
      ,[TIPO_EMPRESA]
      ,[OTRO_TIPO_EMPRESA]
      ,[NIT]
      ,[CLAVE_TIPO_SUJETO_OBLIGADO]
      ,[OTRO_TIPO_SO]
      ,[NOMBRE_REPRESENTANTE]
      ,[OFCEN_DEPARTAMENTO]
      ,[OFCEN_CIUDAD_LOCALIDAD]
      ,[OFCEN_ZONA]
      ,[OFCEN_DIRECCION]
      ,[OFCEN_TELEFONO]
      ,[CORREO_ELECTRONICO]
      ,[OBSERVACIONES]
      ,[idActividadEconomica]
      ,[idCiudad]
      ,[CODIGO_VERIFICADOR]
      ,[ESTADO_IMPRESION]
      ,[ESTADO]
      ,[nusuario]
  FROM [tEntidad]

  where idEntidad =@idEntidad;
  print 'Datos de los funcionarios'
  SELECT 'Funcionario' as tablaFuncionario, [idFuncionario]
      ,[PN_NOMBRE]
      ,[PN_PATERNO]
      ,[PN_MATERNO]
      ,[PN_CASADA]
      ,[PN_DOCUMENTO]
      ,[PN_TAB_CIUDAD]
      ,[PN_TAB_PAIS_NACIONALIDAD]
      ,[PN_FECHA_NACIMIENTO]
      ,[PN_CARGO]
      ,[CM_DIRECCION]
      ,[CM_TELEFONO]
      ,[CM_INTERNO]
      ,[CM_CELULAR]
      ,[CORREO_ELECTRONICO]
      ,[OBSERVACIONES]
      ,[idEntidad]
      ,[idPais]
      ,[TIPO_FUNCIONARIO]
      ,[Observacion_subsanada]
      ,[Motivo_o_Causal]
  FROM [tFuncionario]

  where idEntidad=@idEntidad;
  print 'Datos del registro requisito';
  SELECT 'Registro_Requisito' as tablaRegistroRequisito, [idRegistro_Requisito]
      ,[idEntidad]
      ,[idParam]
      ,[idFuncionario]
      ,[idTramite]
      ,[fecha_registro]
      ,[ESTADO]
      ,[nro_documento]
      ,[fecha_documento]
      ,[imagen]
      ,[Secuencia]
      ,[Estado_DU]
  FROM [REGISTRO_REQUISITO]

  where idEntidad=@idEntidad;

  print 'Datos del tramite por entidad';
  SELECT 'Tramite' as tablaTramite,[idTramite_Secuencia]
      ,[idTramite]
      ,[idEntidad]
      ,[Estado_Tramite]
      ,[Observacion_subsanada]
      ,[Secuencia]
      ,[Estado_DU]
  FROM [tTramite]
  where idEntidad=@idEntidad;

  print 'Datos del certificado de impresion por entidad';
  SELECT 'CertificadoImpresion' as tablaCertificadoImpresion,[idCertificadoImpresion]
      ,[idEntidad]
      ,[idTramite]
      ,[imagen]
      ,[seq_Func]
      ,[tipo]
      ,[idLogTrans]
      ,[estado]
  FROM [tCertificadoImpresion]
  where idEntidad=@idEntidad;


  print 'Datos del reemplazo temporal por Entidad';
  SELECT 'ReemplazoTemporalFuncionario' as tablaReemplazoTemporal, [idTemporal]
      ,[idEntidad]
      ,[idFuncionarioFR]
      ,[idFuncionarioAC]
      ,[FechaInicio]
      ,[FechaFin]
      ,[idLogTrans]
  FROM [tReemplazoTemporal]

  where idEntidad=@idEntidad;

  print 'BajaFuncionario';
  SELECT 'BajaFuncionario' as tablaBajaFuncionario,[idBajaFuncionario]
      ,[idFuncionarioNuevo]
      ,[idFuncionarioAnterior]
      ,[idEntidad]
      ,[idTramiteAnterior]
      ,[idTramiteNuevo]
      ,[fecha_registro]
      ,[fecha_aprobacion_juridica]
      ,[fecha_archivado]
      ,[TipoBaja]
      ,[idLogTrans]
      ,[Estado]
  FROM [tBajaFuncionario]

  where idEntidad=@idEntidad

  end</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>ps_ActualizarNombreSujetoObligado</NAME>
<ID>54</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE PROCEDURE %procname%
---EMEM---------

    @idEntidad AS BIGINT,
    @SujetoObligado AS NVARCHAR(100)

AS
BEGIN
DECLARE @mensaje AS VARCHAR(100);
    SET NOCOUNT ON;
    Begin Tran Tadd

    Begin Try

	UPDATE tEntidad
    set SUJETO_OBLIGADO=@SujetoObligado

     where idEntidad=@idEntidad

     SET @mensaje = 'Se realizo correctamente la actualización del nombre del sujeto obligado'

	 print  @mensaje
        COMMIT TRAN Tadd



    End try
    Begin Catch

        SET @mensaje = 'Ocurrio un Error: ' + ERROR_MESSAGE() + ' en la línea ' + CONVERT(NVARCHAR(255), ERROR_LINE() ) + '.'
		print  @mensaje
        Rollback TRAN Tadd

    End Catch

END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>ver_analista_cumplimiento</NAME>
<ID>55</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create procedure %procname%
@Unidad int
as
begin
select f.PN_NOMBRE,f.PN_PATERNO,f.PN_MATERNO,f.PN_CASADA,f.PN_DOCUMENTO,c.Descripcion CIUDAD,
P.nombre NACIONALIDAD, F.PN_FECHA_NACIMIENTO,F.PN_CARGO,F.CM_TELEFONO,f.CM_INTERNO,f.CM_CELULAR,f.OBSERVACIONES
from tFuncionario f,tCiudad c,tPais P
where f.TIPO_FUNCIONARIO='AC' and f.idEntidad=@Unidad
and f.PN_TAB_CIUDAD=c.idCiudad
AND F.idPais=P.idPais
end</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>ver_entidad</NAME>
<ID>56</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE procedure %procname%
@Unidad int
as
begin
select e.SUJETO_OBLIGADO,e.NIT,ae.nombre TIPO_SUJETO_OBLIGADO,e.OTRO_TIPO_SO,e.NOMBRE_REPRESENTANTE,c.Descripcion CIUDAD,
E.OFCEN_ZONA,e.OFCEN_DIRECCION,e.OFCEN_TELEFONO,e.OBSERVACIONES,e.CODIGO_VERIFICADOR
from tEntidad e, tActividadEconomica ae,tCiudad c
where e.idActividadEconomica=ae.idActividadEconomica
and e.idCiudad=c.idCiudad
and e.idEntidad= @unidad
end</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>ver_funcionario_responsable</NAME>
<ID>57</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create procedure %procname%
@Unidad int
as
begin
select f.PN_NOMBRE,f.PN_PATERNO,f.PN_MATERNO,f.PN_CASADA,f.PN_DOCUMENTO,c.Descripcion CIUDAD,
P.nombre NACIONALIDAD, F.PN_FECHA_NACIMIENTO,F.PN_CARGO,F.CM_TELEFONO,f.CM_INTERNO,f.CM_CELULAR,f.OBSERVACIONES
from tFuncionario f,tCiudad c,tPais P
where f.TIPO_FUNCIONARIO='FR' and f.idEntidad=@Unidad
and f.PN_TAB_CIUDAD=c.idCiudad
AND F.idPais=P.idPais
end</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>sp_upgraddiagrams</NAME>
<ID>58</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE PROCEDURE %procname%
	AS
	BEGIN
		IF OBJECT_ID(N'dbo.sysdiagrams') IS NOT NULL
			return 0;

		CREATE TABLE dbo.sysdiagrams
		(
			name sysname NOT NULL,
			principal_id int NOT NULL,	-- we may change it to varbinary(85)
			diagram_id int PRIMARY KEY IDENTITY,
			version int,

			definition varbinary(max)
			CONSTRAINT UK_principal_name UNIQUE
			(
				principal_id,
				name
			)
		);


		/* Add this if we need to have some form of extended properties for diagrams */
		/*
		IF OBJECT_ID(N'dbo.sysdiagram_properties') IS NULL
		BEGIN
			CREATE TABLE dbo.sysdiagram_properties
			(
				diagram_id int,
				name sysname,
				value varbinary(max) NOT NULL
			)
		END
		*/

		IF OBJECT_ID(N'dbo.dtproperties') IS NOT NULL
		begin
			insert into dbo.sysdiagrams
			(
				[name],
				[principal_id],
				[version],
				[definition]
			)
			select
				convert(sysname, dgnm.[uvalue]),
				DATABASE_PRINCIPAL_ID(N'dbo'),			-- will change to the sid of sa
				0,							-- zero for old format, dgdef.[version],
				dgdef.[lvalue]
			from dbo.[dtproperties] dgnm
				inner join dbo.[dtproperties] dggd on dggd.[property] = 'DtgSchemaGUID' and dggd.[objectid] = dgnm.[objectid]
				inner join dbo.[dtproperties] dgdef on dgdef.[property] = 'DtgSchemaDATA' and dgdef.[objectid] = dgnm.[objectid]

			where dgnm.[property] = 'DtgSchemaNAME' and dggd.[uvalue] like N'_EA3E6268-D998-11CE-9454-00AA00A3F36E_'
			return 2;
		end
		return 1;
	END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>sp_helpdiagrams</NAME>
<ID>59</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE PROCEDURE %procname%
	(
		@diagramname sysname = NULL,
		@owner_id int = NULL
	)
	WITH EXECUTE AS N'dbo'
	AS
	BEGIN
		DECLARE @user sysname
		DECLARE @dboLogin bit
		EXECUTE AS CALLER;
			SET @user = USER_NAME();
			SET @dboLogin = CONVERT(bit,IS_MEMBER('db_owner'));
		REVERT;
		SELECT
			[Database] = DB_NAME(),
			[Name] = name,
			[ID] = diagram_id,
			[Owner] = USER_NAME(principal_id),
			[OwnerID] = principal_id
		FROM
			sysdiagrams
		WHERE
			(@dboLogin = 1 OR USER_NAME(principal_id) = @user) AND
			(@diagramname IS NULL OR name = @diagramname) AND
			(@owner_id IS NULL OR principal_id = @owner_id)
		ORDER BY
			4, 5, 1
	END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>sp_helpdiagramdefinition</NAME>
<ID>60</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE PROCEDURE %procname%
	(
		@diagramname 	sysname,
		@owner_id	int	= null
	)
	WITH EXECUTE AS N'dbo'
	AS
	BEGIN
		set nocount on

		declare @theId 		int
		declare @IsDbo 		int
		declare @DiagId		int
		declare @UIDFound	int

		if(@diagramname is null)
		begin
			RAISERROR (N'E_INVALIDARG', 16, 1);
			return -1
		end

		execute as caller;
		select @theId = DATABASE_PRINCIPAL_ID();
		select @IsDbo = IS_MEMBER(N'db_owner');
		if(@owner_id is null)
			select @owner_id = @theId;
		revert;

		select @DiagId = diagram_id, @UIDFound = principal_id from dbo.sysdiagrams where principal_id = @owner_id and name = @diagramname;
		if(@DiagId IS NULL or (@IsDbo = 0 and @UIDFound &lt;&gt; @theId ))
		begin
			RAISERROR ('Diagram does not exist or you do not have permission.', 16, 1);
			return -3
		end

		select version, definition FROM dbo.sysdiagrams where diagram_id = @DiagId ;
		return 0
	END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>sp_creatediagram</NAME>
<ID>61</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE PROCEDURE %procname%
	(
		@diagramname 	sysname,
		@owner_id		int	= null,
		@version 		int,
		@definition 	varbinary(max)
	)
	WITH EXECUTE AS 'dbo'
	AS
	BEGIN
		set nocount on

		declare @theId int
		declare @retval int
		declare @IsDbo	int
		declare @userName sysname
		if(@version is null or @diagramname is null)
		begin
			RAISERROR (N'E_INVALIDARG', 16, 1);
			return -1
		end

		execute as caller;
		select @theId = DATABASE_PRINCIPAL_ID();
		select @IsDbo = IS_MEMBER(N'db_owner');
		revert;

		if @owner_id is null
		begin
			select @owner_id = @theId;
		end
		else
		begin
			if @theId &lt;&gt; @owner_id
			begin
				if @IsDbo = 0
				begin
					RAISERROR (N'E_INVALIDARG', 16, 1);
					return -1
				end
				select @theId = @owner_id
			end
		end
		-- next 2 line only for test, will be removed after define name unique
		if EXISTS(select diagram_id from dbo.sysdiagrams where principal_id = @theId and name = @diagramname)
		begin
			RAISERROR ('The name is already used.', 16, 1);
			return -2
		end

		insert into dbo.sysdiagrams(name, principal_id , version, definition)
				VALUES(@diagramname, @theId, @version, @definition) ;

		select @retval = @@IDENTITY
		return @retval
	END</CODE>
</PROCEDURE>
<PROCEDURE>
<NAME>sp_renamediagram</NAME>
<ID>62</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE PROCEDURE %procname%
	(
		@diagramname 		sysname,
		@owner_id		int	= null,
		@new_diagramname	sysname

	)
	WITH EXECUTE AS 'dbo'
	AS
	BEGIN
		set nocount on
		declare @theId 			int
		declare @IsDbo 			int

		declare @UIDFound 		int
		declare @DiagId			int
		declare @DiagIdTarg		int
		declare @u_name			sysname
		if((@diagramname is null) or (@new_diagramname is null))
		begin
			RAISERROR ('Invalid value', 16, 1);
			return -1
		end

		EXECUTE AS CALLER;
		select @theId = DATABASE_PRINCIPAL_ID();
		select @IsDbo = IS_MEMBER(N'db_owner');
		if(@owner_id is null)
			select @owner_id = @theId;
		REVERT;

		select @u_name = USER_NAME(@owner_id)

		select @DiagId = diagram_id, @UIDFound = principal_id from dbo.sysdiagrams where principal_id = @owner_id and name = @diagramname
		if(@DiagId IS NULL or (@IsDbo = 0 and @UIDFound &lt;&gt; @theId))
		begin
			RAISERROR ('Diagram does not exist or you do not have permission.', 16, 1)
			return -3
		end

		-- if((@u_name is not null) and (@new_diagramname = @diagramname))	-- nothing will change
		--	return 0;

		if(@u_name is null)
			select @DiagIdTarg = diagram_id from dbo.sysdiagrams where principal_id = @theId and name = @new_diagramname
		else
			select @DiagIdTarg = diagram_id from dbo.sysdiagrams where principal_id = @owner_id and name = @new_diagramname

		if((@DiagIdTarg is not null) and  @DiagId &lt;&gt; @DiagIdTarg)
		begin
			RAISERROR ('The name is already used.', 16, 1);
			return -2
		end

		if(@u_name is null)
			update dbo.sysdiagrams set [name] = @new_diagramname, principal_id = @theId where diagram_id = @DiagId
		else
			update dbo.sysdiagrams set [name] = @new_diagramname where diagram_id = @DiagId
		return 0
	END</CODE>
</PROCEDURE>
</PROCEDURES>
<VIEWS>
<VIEW>
<NAME>v_tramiteRegistroCertificadoSoloArchivo</NAME>
<ID>63</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname%
as(
select a.idObservacionTramite,a.idTramite,a.Observacion,a.Fecha_Archivado,a.idLogTrans, t.idEntidad,t.Estado_Tramite
 from tObservacionTramite_Archivo a
 inner join tTramite t
 on a.idTramite=t.idTramite

where a.idtramite in (
1420,
1538,
1550,
1592,
1679,
1899)

and  t.Estado_Tramite='TE')</CODE>
</VIEW>
<VIEW>
<NAME>view_listar_tramitesANTERIOR</NAME>
<ID>64</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW [dbo].[view_listar_tramites]
AS
SELECT DISTINCT
                      tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'EN MESA DE ENTRADA' estado,
                      CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          (SELECT     max(u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                            FROM          Users u
                            WHERE      u.usuarioRol = 'MesaEntrada' AND estado = 'AC') AS usuario
FROM         tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND NOT EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.idTramite = rr.idTramite AND
                      rr.Secuencia = tr.Secuencia
UNION
SELECT DISTINCT
                      tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'OBSERVADO' estado,
                      CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                       ' ' AS usuario
FROM         tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr
                            WHERE      rr.idTramite = tr.idTramite AND rr.ESTADO = 'OB') AND tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia
UNION
SELECT DISTINCT
                      tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,
                      ae.nombre, 'OBSERVADO' estado, CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                       ' ' AS usuario
FROM         tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'OB' AND TR.Estado_DU = 'D' AND
                      EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr
                            WHERE      rr.idTramite = tr.idTramite AND rr.ESTADO = 'OB') AND tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia
UNION
SELECT DISTINCT
                      tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'EN LEGAL' estado,
                      CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          (SELECT     (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno) AS usuario
                            FROM          Users u
                            WHERE      u.usuarioRol = 'legal' AND estado = 'AC' AND EXISTS
                                                       (SELECT DISTINCT lrr.nusuario
                                                         FROM          dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                           dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                                                         WHERE      (rr1.idTramite = rr.idTramite) AND (lrr.Operacion = 'OB'))) AS usuario
FROM         tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AJ' AND
                      NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr
                            WHERE      rr.idTramite = tr.idTramite AND rr.ESTADO IN ('OB')) AND tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia
UNION
SELECT DISTINCT
                      tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,
                      ae.nombre, 'EN LEGAL' estado, CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          (SELECT     (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                            FROM          Users u
                            WHERE      u.usuarioRol = 'legal' AND estado = 'AC' AND EXISTS
                                                       (SELECT DISTINCT lrr.nusuario
                                                         FROM          dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                                                dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                                                         WHERE      (rr1.idTramite = rr.idTramite) AND (lrr.Operacion = 'OB'))) AS usuario
FROM         tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'OB' AND
                      NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr
                            WHERE      rr.idTramite = tr.idTramite AND rr.ESTADO IN ('OB')) AND tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia
UNION
SELECT DISTINCT
                      tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'EN SISTEMAS' estado,
                      CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          (SELECT     (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                            FROM          Users u
                            WHERE      u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM         tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AP' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia
UNION
SELECT DISTINCT
                      tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,
                      ae.nombre, 'EN SISTEMAS' estado, CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          (SELECT     (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                            FROM          Users u
                            WHERE      u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM         tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'AP' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia
UNION
SELECT DISTINCT
                      tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'EN ARCHIVOS' estado,
                      CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          (SELECT     (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                            FROM          Users u
                            WHERE      u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM         tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AR' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia
UNION
SELECT DISTINCT
                      tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,
                      ae.nombre, 'EN ARCHIVOS' estado, CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          (SELECT     (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                            FROM          Users u
                            WHERE      u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM         tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'AR' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia
UNION
SELECT DISTINCT
                      tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'TERMINADO' estado,
                      CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                       ' ' AS usuario
FROM         tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'TE' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia
UNION
SELECT DISTINCT
                      tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,
                      ae.nombre, 'TERMINADO' estado, CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                       ' ' AS usuario
FROM         tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'TE' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia</CODE>
</VIEW>
<VIEW>
<NAME>view_listar_tramites</NAME>
<ID>65</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
(
SELECT DISTINCT
                 tr.idTramite_Secuencia,CONVERT(nvarchar, tr.idTramite) nro_tramite,rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,  ae.nombre,    'EN MESA DE ENTRADA' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END
																THEN
							                                    CASE WHEN
																-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
                                                                  WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
																  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE

											  , cast('' as varchar(302)) as usuario
FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia

WHERE  (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'AJ') AND EXISTS
                      (SELECT 1 AS Expr1
                       FROM      dbo.tTramite AS t
                       WHERE   (idEntidad = e.idEntidad)) AND (NOT EXISTS
                      (SELECT 1 AS sExpr1
                       FROM      dbo.tObservacionMesa_Entrada
                       WHERE   (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite)))
--						order by rr.idTramite desc


union

SELECT DISTINCT
                tr.idTramite_Secuencia,CONVERT(nvarchar, tr.idTramite) nro_tramite,rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,  ae.nombre,    'OBSERVADO' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END
																THEN
							                                    CASE WHEN
																-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
                                                                  WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
																  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE

											  , cast('' as varchar(302)) as usuario


FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr
                            WHERE      rr.idTramite = tr.idTramite AND rr.ESTADO = 'OB') AND tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia



union

SELECT DISTINCT
                tr.idTramite_Secuencia,CONVERT(nvarchar, tr.idTramite) nro_tramite,rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,  ae.nombre,    'OBSERVADO' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END
																THEN
							                                    CASE WHEN
																-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
                                                                  WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
																  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE

											   , cast('' as varchar(302)) as usuario


FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'OB' AND TR.Estado_DU = 'D' AND
                      EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr
                            WHERE      rr.idTramite = tr.idTramite AND rr.ESTADO = 'OB') AND tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia


union
SELECT DISTINCT
                tr.idTramite_Secuencia,CONVERT(nvarchar, tr.idTramite) nro_tramite,rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,  ae.nombre,    'EN LEGAL' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END
																THEN
							                                    CASE WHEN
																-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
                                                                  WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
																  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                          WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE
	   , cast('' as varchar(302)) as usuario
FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AJ' AND
                      NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr
                            WHERE      rr.idTramite = tr.idTramite AND rr.ESTADO IN ('OB')) AND tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia


union


SELECT DISTINCT
                tr.idTramite_Secuencia,CONVERT(nvarchar, tr.idTramite) nro_tramite,rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,  ae.nombre,    'EN LEGAL' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END
																THEN
							                                    CASE WHEN
																-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
                                                                  WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
																  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE
	  , cast('' as varchar(302)) as usuario
FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'OB' AND
                      NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr
                            WHERE      rr.idTramite = tr.idTramite AND rr.ESTADO IN ('OB')) AND tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia

union

SELECT DISTINCT
              tr.idTramite_Secuencia,CONVERT(nvarchar, tr.idTramite) nro_tramite,rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,  ae.nombre,     'EN SISTEMAS' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END
																THEN
							                                    CASE WHEN
																-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
                                                                  WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
																  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE
	   , cast('' as varchar(302)) as usuario
FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia

WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM         tObservacionMesa_Entrada  te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AP' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia

union

SELECT DISTINCT
                 tr.idTramite_Secuencia,CONVERT(nvarchar, tr.idTramite) nro_tramite,rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,  ae.nombre,    'EN SISTEMAS' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END
																THEN
							                                    CASE WHEN
																-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
                                                                  WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
																  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE
	  , cast('' as varchar(302)) as usuario
FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada  te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'AP' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia

UNION
SELECT DISTINCT
                tr.idTramite_Secuencia,CONVERT(nvarchar, tr.idTramite) nro_tramite,rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,  ae.nombre,     'EN ARCHIVO' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END
																THEN
							                                    CASE WHEN
																-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
                                                                  WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE
  , cast('' as varchar(302)) as usuario

FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AR' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia

UNION
SELECT DISTINCT
                 tr.idTramite_Secuencia,CONVERT(nvarchar, tr.idTramite) nro_tramite,rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,  ae.nombre,    'EN ARCHIVO' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END
																THEN
							                                    CASE WHEN
																-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
                                                                WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
																  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE
	  , cast('' as varchar(302)) as usuario

FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'AR' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia
UNION

SELECT DISTINCT
              tr.idTramite_Secuencia,CONVERT(nvarchar, tr.idTramite) nro_tramite,rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,  ae.nombre,    'TERMINADO' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END
																THEN
							                                    CASE WHEN
									-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
                                                                  WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
																  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE
	  , cast('' as varchar(302)) as usuario
FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'TE' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia
UNION
SELECT DISTINCT
                tr.idTramite_Secuencia,CONVERT(nvarchar, tr.idTramite) nro_tramite,rr.fecha_registro, e.SUJETO_OBLIGADO, e.NIT,  ae.nombre,     'TERMINADO' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
												and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END
																THEN
							                                    CASE WHEN
																-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
                                                                  WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
																  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE
	  , cast('' as varchar(302)) as usuario
FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE     e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada te
                            WHERE      te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'TE' AND
                      tr.idTramite = rr.idTramite AND rr.Secuencia = tr.Secuencia



)</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito</NAME>
<ID>66</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname%
as
SELECT DISTINCT
                  tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO,
                  e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, rr.fecha_registro, e.nusuario, 'PENDIENTE' AS ESTADO,
                      (SELECT DISTINCT lrr.nusuario
                       FROM      dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                 dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                       WHERE   (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
				CASE WHEN
                      (SELECT MAX(idParam)
                       FROM      REGISTRO_REQUISITO rr1
                       WHERE   rr1.idTramite = rr.idTramite
					   AND (rr1.Secuencia = rr.Secuencia)) = CASE WHEN
																	/*(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END --9*/
																	--se aumentó para notarios
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0 THEN 11
																	--ELSE
																	WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'NOTARIOS' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0 THEN 15
																	ELSE 9 END
					   THEN CASE WHEN
                                  (SELECT rr1.idParam
                                   FROM      REGISTRO_REQUISITO rr1
                                   WHERE   rr1.idTramite = rr.idTramite
					               --AND rr1.idParam = 5
					               --AND (rr1.Secuencia = rr.Secuencia)) = 5
								   AND rr1.idParam = 4
					               AND (rr1.Secuencia = rr.Secuencia)) = 4
					               THEN 'REGISTRO DE SUJETO OBLIGADO Y FR'
					               ELSE
					                 CASE WHEN
                                        (SELECT DISTINCT (1)
                                         FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                         WHERE   rr1.idTramite = rr.idTramite
					                     AND rr1.idFuncionario = t1.idFuncionario
					                     AND t1.TIPO_FUNCIONARIO = 'FR'
					                     AND (rr1.Secuencia = rr.Secuencia)) = 1 THEN
					                      CASE WHEN TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
				-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END
				   end   ELSE CASE WHEN
                               (SELECT COUNT(te.idEntidad)
                                FROM      tEntidad AS te
                                 WHERE   te.idEntidad IN
                                               (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'
											  ELSE
											  'REGISTRO DE SUJETO OBLIGADO' END
					 END AS TIPO_TRAMITE
FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
				  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia



WHERE  (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'AJ') AND (tr.Estado_Tramite &lt;&gt; 'AP') AND (tr.Estado_Tramite &lt;&gt; 'TE') AND (tr.Estado_Tramite &lt;&gt; 'AR') AND (tr.Estado_Tramite &lt;&gt; 'AH') AND
                  EXISTS
                      (SELECT 1 AS Expr1
                       FROM      dbo.tTramite AS t
                       WHERE   (idEntidad = e.idEntidad)) AND EXISTS
                      (SELECT 1 AS Expr1
                       FROM      dbo.tObservacionMesa_Entrada
                       WHERE   (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisitoME</NAME>
<ID>67</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                  e.idEntidad, ae.idActividadEconomica, ae.nombre, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA,
                  e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, rr.fecha_registro, e.nusuario, 'PENDIENTE' AS ESTADO,
				  CASE WHEN
                           (SELECT MAX(idParam)
                            FROM      REGISTRO_REQUISITO rr1
                            WHERE   rr1.idTramite = rr.idTramite) = CASE WHEN
																	/*(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END*/
																	--se aumentó para notarios
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0 THEN 11
																	--ELSE
																	WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'NOTARIOS' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0 THEN 15
																	ELSE 9 END
																THEN
							                                    CASE WHEN
																-- SI TIENTE EL 9 u 11
                                                                 (SELECT rr1.idParam
                                                                  FROM      REGISTRO_REQUISITO rr1
																  WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 4) = 4 THEN
																  -- Y ADEMAS TIENE EL 4  ENTONCES ES REGISTRO DE SO Y FR  todos los casos tienen NIT
                                                                  --WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN
																  -- Y ADEMAS TIENE EL 5  ENTONCES ES REGISTRO DE SO Y FR
																  'REGISTRO DE SUJETO OBLIGADO Y FR'
															     ELSE
																 CASE WHEN
																  -- SI ES FUNCIONARIO RESPONSABLE
                                                                  (SELECT DISTINCT (1)
                                                                   FROM      REGISTRO_REQUISITO rr1, tFuncionario t1
                                                                    WHERE   rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario
																	AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN
																	 CASE WHEN   TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
				    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

                           END ELSE
						   -- ENTONCES NO TIENE 9 ni 11(casa de juegos) ni 25(notarios)
						   CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE
FROM     dbo.tEntidad AS e INNER JOIN
                  dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                  dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                  dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                  dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
  LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia

WHERE  (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'AJ') AND EXISTS
                      (SELECT 1 AS Expr1
                       FROM      dbo.tTramite AS t
                       WHERE   (idEntidad = e.idEntidad)) AND (NOT EXISTS
                      (SELECT 1 AS sExpr1
                       FROM      dbo.tObservacionMesa_Entrada
                       WHERE   (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite)))
--						order by rr.idTramite desc</CODE>
</VIEW>
<VIEW>
<NAME>v_TipoSujetosObligadosCertificado</NAME>
<ID>68</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
(
SELECT        e.idEntidad, e.idActividadEconomica, ac.nombre, CAST(MAX(l.Fecha) AS date) AS Fecha
FROM            dbo.tEntidad AS e INNER JOIN
                dbo.tActividadEconomica AS ac ON e.idActividadEconomica = ac.idActividadEconomica INNER JOIN
                dbo.tTramite AS t ON e.idEntidad = t.idEntidad INNER JOIN
                dbo.tCertificadoImpresion AS c ON t.idTramite = c.idTramite INNER JOIN
                dbo.LogsTrans AS l ON c.idLogTrans = l.idLogTrans
WHERE        (c.tipo = 'SO' and t.Estado_Tramite='TE')
GROUP BY e.idEntidad, e.idActividadEconomica, ac.nombre

except

SELECT        e.idEntidad, e.idActividadEconomica, ac.nombre, CAST(MAX(l.Fecha) AS date) AS Fecha
FROM            dbo.tEntidad AS e INNER JOIN
                dbo.tActividadEconomica AS ac ON e.idActividadEconomica = ac.idActividadEconomica
				INNER JOIN
                dbo.tTramite AS t ON e.idEntidad = t.idEntidad
				INNER JOIN
                dbo.tCertificadoImpresion AS c ON t.idTramite = c.idTramite
				INNER JOIN
                dbo.LogsTrans AS l ON c.idLogTrans = l.idLogTrans
				inner join tTramiteClasificacion tc
				on tc.idTramite=c.idTramite
WHERE        (c.tipo = 'SO' and t.Estado_Tramite='TE')
GROUP BY e.idEntidad, e.idActividadEconomica, ac.nombre


)</CODE>
</VIEW>
<VIEW>
<NAME>v_NombreSujetos_ObligadosConCertificado</NAME>
<ID>69</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname%
as

select distinct c.nombre as tipoSujeto,a.SUJETO_OBLIGADO,

 tc.tipo,max(lt.Fecha) as fecha

from tentidad a
inner join tTramite t
on a.idEntidad=t.idEntidad
inner join tCertificadoImpresion tc
on tc.idEntidad=a.idEntidad
and tc.idTramite=t.idTramite

inner join LogsTrans lt
on lt.idLogTrans=tc.idLogTrans

--inner join REGISTRO_REQUISITO r
--on  a.idEntidad=r.idEntidad
--and r.idTramite=t.idTramite
--inner join tFuncionario b
--on a.idEntidad=b.idEntidad

inner join tActividadEconomica c
on a.idActividadEconomica=c.idActividadEconomica

where a.ESTADO='AC'
and tc.tipo='SO'
--and b.TIPO_FUNCIONARIO not in ('BC','BA')
--and r.idFuncionario is null
group by c.nombre, tc.tipo,a.SUJETO_OBLIGADO</CODE>
</VIEW>
<VIEW>
<NAME>v_sujetosObligadosFuncionariosResponsablesContramiteTerminado</NAME>
<ID>70</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
select distinct  c.nombre as tipoActividadSujetoObligado,a.SUJETO_OBLIGADO as nombreSujetoObligado,
a.TIPO_EMPRESA as tipoEmpresa, a.nit as Nit, a.NOMBRE_REPRESENTANTE as RepresentanteLegal, a.OFCEN_CIUDAD_LOCALIDAD as oficinaLocalidad,a.OFCEN_ZONA as Zona,a.OFCEN_DIRECCION as Direccion,
a.OFCEN_TELEFONO as oficinaTelefono, ci.Descripcion as ciudadSujetoObligado,
a.CORREO_ELECTRONICO  as correo_sujeto_obligado,
a.ofcen_telefono as telefonoSujetoObligado, b.PN_NOMBRE as nombreFuncionario, b.PN_PATERNO as PrimerApellido, b.PN_MATERNO as SegundoApellido,
--(b.PN_NOMBRE + ' ' +b.PN_PATERNO+' ' + b.PN_MATERNO) as nombre_completoFuncionario ,
b.TIPO_FUNCIONARIO as tipoFuncionario,
b.PN_DOCUMENTO as numeroDocumento,cii.Descripcion as CiudadFuncionario,p.nombre as Nacionalidad,b.PN_FECHA_NACIMIENTO as fechaNacimiento,b.PN_CARGO as Cargo,b.CM_DIRECCION as DireccionFuncionario,
b.CORREO_ELECTRONICO as correo_electronico_funcionarios
,b.CM_CELULAR as celularFuncionario,b.CM_TELEFONO as telefonoFuncionario,b.CM_INTERNO as internoFuncionario,
p.nombre as Pais
from tentidad a
inner join tFuncionario b
on a.idEntidad=b.idEntidad

inner join tActividadEconomica c
on a.idActividadEconomica=c.idActividadEconomica

inner join tCiudad ci
on ci.idCiudad=a.idCiudad
inner join tCiudad cii
on cii.idCiudad=b.PN_TAB_CIUDAD
inner join tPais p
on p.idPais=b.PN_TAB_PAIS_NACIONALIDAD
and p.idPais=b.idPais

inner join tTramite t
on t.idEntidad = a.idEntidad
where a.ESTADO='AC'
and b.TIPO_FUNCIONARIO  in ('FR')
and t.Estado_Tramite='TE'
--order by c.nombre</CODE>
</VIEW>
<VIEW>
<NAME>vw_dias_tramites</NAME>
<ID>71</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
select e.idEntidad, te.nombre,  e.SUJETO_OBLIGADO,max(l.fecha) as fecha, DATEDIFF(DD,max(l.fecha),'2018-06-05 00:00:00.000')   as dias_pasaron,  c.tipo, max(t.idTramite ) as idTrammite from tEntidad e
inner join tTramite t
on e.idEntidad=t.idEntidad
inner join tActividadEconomica te
on te.idActividadEconomica=e.idActividadEconomica
inner join tCertificadoImpresion c
on c.idTramite=t.idTramite
and c.idEntidad=t.idEntidad
inner join LogsTrans l
on l.idLogTrans=c.idLogTrans
where e.ESTADO='AC'
group by e.idEntidad, te.nombre,  e.SUJETO_OBLIGADO, c.tipo</CODE>
</VIEW>
<VIEW>
<NAME>vw_TrazaRenovado</NAME>
<ID>72</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
select t.idEntidad, t.Estado_Tramite, cc.Tipo_Funcionario,t.idTramite,l.Fecha as fechaCertificado, cc.fechaRegistro as fechaInicioRenovacion from
tTramite t inner join
[dbo].[tTramiteClasificacion] cc
on t.idTramite = cc.idTramite
inner join tEntidad e
on t.idEntidad=e.idEntidad
left join tCertificadoImpresion c
on c.idTramite=t.idTramite
and c.idEntidad=t.idEntidad
left  join LogsTrans l
on l.idLogTrans=c.idLogTrans
where e.ESTADO='AC'</CODE>
</VIEW>
<VIEW>
<NAME>vw_dias_tramitesEntidad</NAME>
<ID>73</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
select e.idEntidad, te.nombre, e.SUJETO_OBLIGADO,max(l.fecha) as fecha, DATEDIFF(DD,max(l.fecha),'2018-05-01 00:00:00.000')   as dias_pasaron,  c.tipo, t.idTramite  from tEntidad e
inner join tTramite t
on e.idEntidad=t.idEntidad
inner join tActividadEconomica te
on te.idActividadEconomica=e.idActividadEconomica
inner join tCertificadoImpresion c
on c.idTramite=t.idTramite
and c.idEntidad=t.idEntidad
inner join LogsTrans l
on l.idLogTrans=c.idLogTrans
where e.ESTADO='AC'
group by e.idEntidad,te.nombre,  e.SUJETO_OBLIGADO, c.tipo,t.idtramite</CODE>
</VIEW>
<VIEW>
<NAME>view_listar_documentos_pdf</NAME>
<ID>74</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
select r.idRegistro_Requisito,p.DESCRIPCION,r.idEntidad,r.idTramite,r.Secuencia,r.idParam from REGISTRO_REQUISITO r,PARAM_REQUISITOS_SO p
where r.idParam=p.idParam</CODE>
</VIEW>
<VIEW>
<NAME>view_listar_tiempos_registro</NAME>
<ID>75</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname% AS

SELECT  [idTramite_Secuencia]
      ,[idTramite]
      ,[Secuencia]
      ,[SUJETO_OBLIGADO]
      ,[NIT]
      ,[TIPO_SUJETO_OBLIGADO]
      ,[TIPO_TRAMITE]
      ,[fecha_registro]
      ,[fecha_recepcion]
	  ,DATEDIFF(dd,[fecha_registro],[fecha_recepcion]) AS tdias1
      ,[fecha_ultimaObservacion]
      ,[fecha_ultimaCorreccion]
	  ,  DATEDIFF(dd,[fecha_ultimaObservacion],[fecha_ultimaCorreccion])  AS tdias2
      ,[fecha_aprobacion_legal],
	  CASE
	       WHEN fecha_aprobacion_legal IS NOT NULL AND [fecha_ultimaCorreccion] IS NOT NULL
	       THEN DATEDIFF(dd,[fecha_ultimaCorreccion],[fecha_aprobacion_legal])
		   WHEN fecha_aprobacion_legal IS NOT NULL
		   THEN DATEDIFF(dd,fecha_recepcion,fecha_aprobacion_legal)
		   ELSE
		   NULL

	 END AS tdias3


      ,[fecha_aprobacion_sistemas],
	  DATEDIFF(dd,fecha_aprobacion_legal,fecha_aprobacion_sistemas) AS tdias4


      ,[fecha_archivado]

	  ,DATEDIFF(dd,fecha_aprobacion_sistemas,fecha_archivado) AS tdias5
      ,[ESTADO_TRAMITE]
FROM v_listar_tiempos_registro_sub</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_procesados_archivo</NAME>
<ID>76</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
SELECT distinct
v.idTramite_Secuencia,

CASE WHEN V.Estado_DU = 'D' THEN
(CONVERT(nvarchar, V.idTramite) + '-' + CONVERT(nvarchar, V.Secuencia))
ELSE
CONVERT(nvarchar, v.idTramite) END nro_tramite,

case when
(    (v.Estado_Tramite = 'TE' AND V.Estado_DU = 'U')
      or
     (v.Estado_Tramite = 'TE' AND V.Estado_DU = 'D' )
)
then (SELECT        max(Fecha_Archivado)
                               FROM            tObservacionTramite_Archivo ota
                               WHERE        ota.idTramite = v.idTramite)
else
NULL end AS fecha_aprobacion,
v.SUJETO_OBLIGADO,v.NIT,v.nombre,

CASE WHEN v.Estado_Tramite IN ('TE') THEN 'ARCHIVADO'
ELSE 'NO PROCESADO' END
AS estado,


v.tipoProceso +' '+ v.TIPO as TIPO_TRAMITE,
'' AS usuario  --TODO no se usa
FROM v_resumen_traza_requisitos v
left join tObservacionMesa_Entrada tbm on v.idTramite = tbm.idTramite
where
v.ESTADO_IMPRESION = 'SI' AND v.estadoEntidad = 'AC' AND tbm.idObservacionMEntrada IS NOT NULL
AND
(
(v.Estado_Tramite = 'AR' AND V.Estado_DU = 'U' )
OR
(v.Estado_Tramite = 'AR' AND V.Estado_DU = 'D' )
OR
( v.Estado_Tramite = 'TE' AND V.Estado_DU = 'U')
OR
(v.Estado_Tramite = 'TE' AND V.Estado_DU = 'D' )
)
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite
LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							   --AND e.idActividadEconomica = ae.idActividadEconomica
							   AND tr.Estado_Tramite = 'AR'
							   --AND tr.idTramite = c.idTramite

and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
--and estado='TE'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
--and estado='TE'
group by idEntidad)))

and rr.estado='AR'

UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'ARCHIVADO' estado,
                         'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
     'NO PROCESADO' estado, 'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, BF.fecha_archivado fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'ARCHIVADO' estado, 'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, 'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, BF.fecha_archivado fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'ARCHIVADO' estado, 'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_procesados_arealegal</NAME>
<ID>77</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname% AS
SELECT distinct
v.idTramite_Secuencia,

CASE WHEN V.Estado_DU = 'D' THEN
(CONVERT(nvarchar, V.idTramite) + '-' + CONVERT(nvarchar, V.Secuencia))
ELSE
CONVERT(nvarchar, v.idTramite) END nro_tramite,

case when
(
(v.Estado_Tramite = 'AP' AND V.Estado_DU = 'U')
or
(v.Estado_Tramite = 'AP' AND V.Estado_DU = 'D')
or
(v.Estado_Tramite = 'AR' AND V.Estado_DU = 'U' )
or
(v.Estado_Tramite = 'AR' AND V.Estado_DU = 'D' )
or
( v.Estado_Tramite = 'TE' AND V.Estado_DU = 'U')
or
(v.Estado_Tramite = 'TE' AND V.Estado_DU = 'D' )

)

then    (SELECT        max(CONVERT(date, o.fecha))
		 FROM            LOG_REGISTRO_REQUISITO o
		 WHERE        o.idRegistro_Requisito = v.idRegistro_Requisito AND Operacion = 'AP')

else
NULL end AS fecha_aprobacion,

v.SUJETO_OBLIGADO,v.NIT,v.nombre,

CASE WHEN v.Estado_Tramite IN ('AP','AR','TE') THEN 'PROCESADO'
ELSE 'NO PROCESADO' END
AS estado,



'' as usuariolegal, -- TODO:  no se usa
v.Observacion_subsanada,v.tipoProceso +' '+ v.TIPO as TIPO_TRAMITE,
'' AS usuario  --TODO no se usa
FROM v_resumen_traza_requisitos v
left join tObservacionMesa_Entrada tbm on v.idTramite = tbm.idTramite
where
v.ESTADO_IMPRESION = 'SI' AND v.estadoEntidad = 'AC' AND tbm.idObservacionMEntrada IS NOT NULL
AND
(
(v.Estado_Tramite = 'AJ' AND V.Estado_DU = 'U' AND v.ESTADO!='OB') --(estado de registro requisito)
OR
(v.Estado_Tramite = 'OB' AND V.Estado_DU = 'D' AND v.ESTADO!='OB')
OR
(v.Estado_Tramite = 'AP' AND V.Estado_DU = 'U')
OR
(v.Estado_Tramite = 'AP' AND V.Estado_DU = 'D')
OR
(v.Estado_Tramite = 'AR' AND V.Estado_DU = 'U' )
OR
(v.Estado_Tramite = 'AR' AND V.Estado_DU = 'D' )
OR
( v.Estado_Tramite = 'TE' AND V.Estado_DU = 'U')
OR
(v.Estado_Tramite = 'TE' AND V.Estado_DU = 'D' )
)
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'legal' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AJ' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AP' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada, 'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'legal' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AJ' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite,
                             (SELECT        bf.fecha_aprobacion_juridica
                               FROM            tBajaFuncionario bf
                               WHERE        bf.idTramiteNuevo = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, '' AS usuarioLegal,
                         '' AS Observacion_subsanada, 'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT  tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite,
(SELECT        bf.fecha_aprobacion_juridica
FROM            tBajaFuncionario bf
WHERE        bf.idTramiteNuevo = tr.idTramite) AS fecha_aprobacion,
e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, '' AS usuarioLegal,
'' AS Observacion_subsanada,
'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite,
' ' AS usuario
FROM   tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE  e.ESTADO_IMPRESION = 'SI'
AND e.ESTADO = 'AC'
AND e.idEntidad = tr.idEntidad
AND EXISTS (SELECT  1
            FROM  tObservacionMesa_Entrada te
             WHERE te.idTramite = tr.idTramite)
			 AND e.idActividadEconomica = ae.idActividadEconomica
			 AND tr.Estado_Tramite = 'TE'
			 AND TR.idTramite = BF.idTramiteNuevo
			 AND bf.idLogTrans = lt.idLogTrans
			 AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT  tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
'NO PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada,
'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite,
(SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
 FROM            Users u
WHERE        u.usuarioRol = 'legal' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AJ' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'
UNION
SELECT tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite,
                             (SELECT        bf.fecha_aprobacion_juridica
                               FROM            tBajaFuncionario bf
                               WHERE        bf.idTramiteNuevo = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, '' AS usuarioLegal,
                         '' AS Observacion_subsanada, 'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM   tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE  e.ESTADO_IMPRESION = 'SI'
AND e.ESTADO = 'AC'
AND e.idEntidad = tr.idEntidad
AND EXISTS (SELECT  1
            FROM  tObservacionMesa_Entrada te
            WHERE te.idTramite = tr.idTramite)
			AND e.idActividadEconomica = ae.idActividadEconomica
			AND tr.Estado_Tramite = 'AR'
			AND TR.idTramite = BF.idTramiteNuevo
			AND bf.idLogTrans = lt.idLogTrans
			AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'
UNION
SELECT tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite,
(SELECT  bf.fecha_aprobacion_juridica
FROM    tBajaFuncionario bf
WHERE  bf.idTramiteNuevo = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, '' AS usuarioLegal,
'' AS Observacion_subsanada, 'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite, ' ' AS usuario
FROM   tEntidad e,
tTramite tr,
tActividadEconomica ae,
tBajaFuncionario BF,
LogsTrans lt
WHERE  e.ESTADO_IMPRESION = 'SI'
AND e.ESTADO = 'AC'
AND e.idEntidad = tr.idEntidad
AND EXISTS (SELECT 1
FROM  tObservacionMesa_Entrada te
 WHERE  te.idTramite = tr.idTramite)
 AND e.idActividadEconomica = ae.idActividadEconomica
 AND tr.Estado_Tramite = 'TE'
 AND TR.idTramite = BF.idTramiteNuevo
 AND bf.idLogTrans = lt.idLogTrans
 AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_procesados_sistemas</NAME>
<ID>78</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname% AS
SELECT distinct
v.idTramite_Secuencia,

CASE WHEN V.Estado_DU = 'D' THEN
(CONVERT(nvarchar, V.idTramite) + '-' + CONVERT(nvarchar, V.Secuencia))
ELSE
CONVERT(nvarchar, v.idTramite) END nro_tramite,

case when
(
(v.Estado_Tramite = 'AR' AND V.Estado_DU = 'U' )
OR
(v.Estado_Tramite = 'AR' AND V.Estado_DU = 'D' )
or
( v.Estado_Tramite = 'TE' AND V.Estado_DU = 'U')
or
(v.Estado_Tramite = 'AR' AND V.Estado_DU = 'D' )
or
(v.Estado_Tramite = 'TE' AND V.Estado_DU = 'D' )
)
then  (SELECT        max(ots.Fecha_Aprobacion)
                               FROM            Observacion_Tramite_Sistemas ots
                               WHERE        ots.idTramite = v.idTramite)

else
NULL end AS fecha_aprobacion,



v.SUJETO_OBLIGADO,v.NIT,v.nombre,

CASE WHEN v.Estado_Tramite IN ('AR','TE') THEN 'PROCESADO'
ELSE 'NO PROCESADO' END
AS estado,


v.tipoProceso +' '+ v.TIPO as TIPO_TRAMITE,
'' AS usuario  --TODO no se usa
FROM v_resumen_traza_requisitos v
left join tObservacionMesa_Entrada tbm on v.idTramite = tbm.idTramite
where
v.ESTADO_IMPRESION = 'SI' AND v.estadoEntidad = 'AC' AND tbm.idObservacionMEntrada IS NOT NULL
AND
(
(v.Estado_Tramite = 'AP' AND V.Estado_DU = 'U')
OR
(v.Estado_Tramite = 'AP' AND V.Estado_DU = 'D')

OR
(v.Estado_Tramite = 'AR' AND V.Estado_DU = 'U' )
OR
(v.Estado_Tramite = 'AR' AND V.Estado_DU = 'D' )
OR
( v.Estado_Tramite = 'TE' AND V.Estado_DU = 'U')
OR
(v.Estado_Tramite = 'TE' AND V.Estado_DU = 'D' )
)
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AP' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado,
                         'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado,
                         'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae,tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND tr.idTramite = c.idTramite</CODE>
</VIEW>
<VIEW>
<NAME>listar_roles</NAME>
<ID>79</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT usuarioRol AS rol, usuarioRol AS rol1
FROM            dbo.Users
WHERE        (usuarioRol IN ('legal', 'estrategico', 'MesaEntrada', 'direccion', 'desarrollador', 'confirmarusuarios', 'archivar', 'admUIF'))</CODE>
</VIEW>
<VIEW>
<NAME>view_AC</NAME>
<ID>80</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                         P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                         f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION
FROM            dbo.tFuncionario AS f INNER JOIN
                         dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                         dbo.tPais AS P ON f.idPais = P.idPais
WHERE        (f.TIPO_FUNCIONARIO = 'AC')</CODE>
</VIEW>
<VIEW>
<NAME>view_FR</NAME>
<ID>81</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                         P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                         f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION
FROM            dbo.tFuncionario AS f INNER JOIN
                         dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                         dbo.tPais AS P ON f.idPais = P.idPais
WHERE        (f.TIPO_FUNCIONARIO = 'FR')</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivados</NAME>
<ID>82</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname%
as

SELECT        tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE,
                         c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
                         rr.fecha_registro, e.nusuario, 'APROBADO' AS ESTADO, '' AS Detalle, tta.Observacion,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) =
											CASE WHEN
											/*(SELECT count(act.nombre)
											FROM dbo.tEntidad ent
											INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
											INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
											INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
											WHERE ent.idEntidad = e.idEntidad
											and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
											THEN 11
											ELSE 9 END  --9 */
											(SELECT count(act.nombre)
											 FROM dbo.tEntidad ent
											 INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
											 INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
											 INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
											 WHERE ent.idEntidad = e.idEntidad
											 and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0 THEN 11
											 --ELSE
											 WHEN
											 (SELECT count(act.nombre)
											 FROM dbo.tEntidad ent
											 INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
											 INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
											 INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
											 WHERE ent.idEntidad = e.idEntidad
											 and act.nombre = 'NOTARIOS' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0 THEN 15
											 ELSE 9 END

							   THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               --WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia)) = 5
							   WHERE rr1.idTramite = rr.idTramite AND rr1.idParam = 4 AND (rr1.Secuencia = rr.Secuencia)) = 4
							   THEN 'REGISTRO DE SUJETO OBLIGADO Y FR'
							   ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN

						CASE WHEN TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END

								 END ELSE
								 --'REGISTRO SUJETO OBLIGADO'

						/*		 CASE WHEN
                         (SELECT COUNT(te.idEntidad)
                               FROM      tEntidad AS te
                            WHERE   te.idEntidad IN
                                             (SELECT teh.idEntidad
                                              FROM      tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad) &gt; 0
											  THEN 'RENOVACION DE SUJETO OBLIGADO'


											  ELSE 'REGISTRO DE SUJETO OBLIGADO' END*/
								 --
							 CASE WHEN	tc.idTramite_Secuencia is  null
                                                 THEN 'REGISTRO DE SUJETO OBLIGADO'
                                                 ELSE 'RENOVACION DE SUJETO OBLIGADO' end
						END AS TIPO_TRAMITE,
                          tta.Fecha_Archivado
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                         dbo.tObservacionTramite_Archivo AS tta ON rr.idTramite = tta.idTramite INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad AND tta.Secuencia = tr.Secuencia AND tr.idTramite = tta.idTramite AND rr.Secuencia = tr.Secuencia
						 LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'TE') AND (rr.idRegistro_Requisito =
                             (SELECT        MIN(idRegistro_Requisito) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr1
                               WHERE        (idEntidad = rr.idEntidad) AND (idTramite = rr.idTramite) AND (ESTADO = 'TE') AND (Secuencia = rr.Secuencia)))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_Aprobado</NAME>
<ID>83</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname%
as

SELECT DISTINCT
                         tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE,
                         c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
                         rr.fecha_registro, e.nusuario, 'APROBADO' AS ESTADO,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                        CASE WHEN
                                  (SELECT        MAX(idParam)
                                   FROM            REGISTRO_REQUISITO rr1
                                    WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) =
																	CASE WHEN
																	/*(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
																	THEN 11
																	ELSE 9 END--9 */
																	--se aumentó para notarios
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0 THEN 11
																	--ELSE
																	WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'NOTARIOS' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0 THEN 15
																	ELSE 9 END
									THEN CASE WHEN
                                         (SELECT        rr1.idParam
                                          FROM            REGISTRO_REQUISITO rr1
                                         --WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia)) = 5
										   WHERE   rr1.idTramite = rr.idTramite AND rr1.idParam = 4 AND (rr1.Secuencia = rr.Secuencia)) = 4
										   THEN 'REGISTRO DE SUJETO OBLIGADO Y FR'
										   ELSE CASE WHEN
                                               (SELECT DISTINCT (1)
                                                FROM REGISTRO_REQUISITO rr1, tFuncionario t1
                                                 WHERE rr1.idTramite = rr.idTramite
												 AND rr1.idFuncionario = t1.idFuncionario
												 AND t1.TIPO_FUNCIONARIO = 'FR'
												 AND (rr1.Secuencia = rr.Secuencia)) = 1
												THEN
												        CASE WHEN TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END
                                END
								ELSE
								CASE WHEN
                             (SELECT        COUNT(te.idEntidad)
                               FROM            tEntidad AS te
                               WHERE        te.idEntidad IN
                                                             (SELECT        teh.idEntidad
                                                               FROM            tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad)
                               &gt; 0 THEN 'RENOVACION DE SUJETO OBLIGADO'
						     ELSE 'REGISTRO DE SUJETO OBLIGADO' END

						END AS TIPO_TRAMITE
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia
						 LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'AP') AND (tr.Estado_Tramite = 'AP')</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_Aprobado_Archivo</NAME>
<ID>84</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname%
as

SELECT        tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE,
                         c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
                         rr.fecha_registro, e.nusuario, 'APROBADO' AS ESTADO, '' AS Detalle,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                             CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) =
							   CASE WHEN
							   /*(SELECT count(act.nombre)
								FROM dbo.tEntidad ent
								INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
								INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
								INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
								WHERE ent.idEntidad = e.idEntidad
								and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0
							   THEN 11
							   ELSE 9 END--9 */
							   --se aumentó para notarios
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'CASA DE JUEGO' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0 THEN 11
																	--ELSE
																	WHEN
																	(SELECT count(act.nombre)
																	FROM dbo.tEntidad ent
																	INNER JOIN dbo.tActividadEconomica AS act ON act.idActividadEconomica = ae.idActividadEconomica
																	INNER JOIN REGISTRO_REQUISITO rr1 on rr1.idTramite = rr.idTramite
																	INNER JOIN tFuncionario t1 ON rr1.idFuncionario = t1.idFuncionario
																	WHERE ent.idEntidad = e.idEntidad
																	and act.nombre = 'NOTARIOS' and t1.TIPO_FUNCIONARIO = 'FR') &gt; 0 THEN 15
																	ELSE 9 END
							   THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                             --WHERE rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia)) = 5
							   WHERE rr1.idTramite = rr.idTramite AND rr1.idParam = 4 AND (rr1.Secuencia = rr.Secuencia)) = 4
							 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR'
						     ELSE
							 CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN

						CASE WHEN TC.idTramite_Secuencia IS NULL THEN  'REGISTRO FUNCIONARIO RESPONSABLE'
																			   ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END
																-- NO ES FUNCIONARIO RESPONSABLE POR ENDE  ES ANALISTA

									                        ELSE
															    CASE WHEN TC.idTramite_Secuencia IS NULL THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
																ELSE 'RENOVACION DE  ANALISTA DE CUMPLIMIENTO' END
								 END
                          END ELSE CASE WHEN
                             (SELECT        COUNT(te.idEntidad)
                               FROM            tEntidad AS te
                               WHERE        te.idEntidad IN
                                                             (SELECT        teh.idEntidad
                                                               FROM            tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad)
                         &gt; 0
						 THEN 'RENOVACION DE SUJETO OBLIGADO'
						 ELSE 'REGISTRO DE SUJETO OBLIGADO'
						 END
						 END AS TIPO_TRAMITE
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia
LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia

WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'AR') AND (rr.idRegistro_Requisito =
                             (SELECT        MIN(idRegistro_Requisito) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr1
                               WHERE        (idEntidad = rr.idEntidad) AND (idTramite = rr.idTramite) AND (ESTADO = 'AR') AND (Secuencia = rr.Secuencia))) AND (tr.Estado_Tramite = 'AR') AND
                         EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.Observacion_Tramite_Sistemas
                               WHERE        (idTramite = rr.idTramite))</CODE>
</VIEW>
<VIEW>
<NAME>v_TipoSujetosObligadosCertificado2</NAME>
<ID>85</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
(

SELECT        e.idEntidad,e.SUJETO_OBLIGADO as sujeto_obligado, e.idActividadEconomica, ac.nombre, CAST(MAX(l.Fecha) AS date) AS Fecha
FROM            dbo.tEntidad AS e INNER JOIN
                dbo.tActividadEconomica AS ac ON e.idActividadEconomica = ac.idActividadEconomica INNER JOIN
                dbo.tTramite AS t ON e.idEntidad = t.idEntidad INNER JOIN
                dbo.tCertificadoImpresion AS c ON t.idTramite = c.idTramite INNER JOIN
                dbo.LogsTrans AS l ON c.idLogTrans = l.idLogTrans
WHERE        (c.tipo = 'SO' and t.Estado_Tramite='TE')
GROUP BY e.idEntidad, e.idActividadEconomica, ac.nombre, e.SUJETO_OBLIGADO

except

SELECT        e.idEntidad, e.SUJETO_OBLIGADO as sujetoobligado, e.idActividadEconomica, ac.nombre, CAST(MAX(l.Fecha) AS date) AS Fecha
FROM            dbo.tEntidad AS e INNER JOIN
                dbo.tActividadEconomica AS ac ON e.idActividadEconomica = ac.idActividadEconomica
				INNER JOIN
                dbo.tTramite AS t ON e.idEntidad = t.idEntidad
				INNER JOIN
                dbo.tCertificadoImpresion AS c ON t.idTramite = c.idTramite
				INNER JOIN
                dbo.LogsTrans AS l ON c.idLogTrans = l.idLogTrans
				inner join tTramiteClasificacion tc
				on tc.idTramite=c.idTramite
WHERE        (c.tipo = 'SO' and t.Estado_Tramite='TE')
GROUP BY e.idEntidad, e.idActividadEconomica, ac.nombre, e.SUJETO_OBLIGADO
)</CODE>
</VIEW>
<VIEW>
<NAME>view_registroCasoRenovacion</NAME>
<ID>86</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname% AS
SELECT   rcr.idParam,prs.DESCRIPCION,rcr.id_caso
  FROM [Registro_casoRenovacion] AS rcr
INNER JOIN PARAM_REQUISITOS_SO AS prs ON prs.idParam=rcr.idParam</CODE>
</VIEW>
<VIEW>
<NAME>view_tEntidadConRenovacionPendiente</NAME>
<ID>87</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT COUNT(*) AS cont,rr.idEntidad
FROM REGISTRO_REQUISITO AS rr

WHERE rr.ESTADO='AJ'
  AND rr.idParam in (1,2,3,4,5,6)
 GROUP BY rr.idEntidad
  HAVING count(*)&gt;0</CODE>
</VIEW>
<VIEW>
<NAME>listatotalSujetoObligadoConfechaREgistroImpresion</NAME>
<ID>88</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
  select a.* ,b.idCertificadoImpresion,b.idTramite,b.seq_Func,b.tipo,b.idLogTrans,b.Fecha,b.Transaccion
  from tEntidad a
  left join (

  select b.idCertificadoImpresion,b.idEntidad,b.idTramite,b.seq_Func,b.tipo, l.*
  from
  tCertificadoImpresion b
   inner join LogsTrans l
  on b.idLogTrans=l.idLogTrans
  where
 -- b.tipo='SO'
-- and
  b.idCertificadoImpresion in(

 select max(c.idCertificadoImpresion) from tEntidad e
 inner join tCertificadoImpresion c
 on e.idEntidad= c.idEntidad
  inner join LogsTrans l
  on c.idLogTrans=l.idLogTrans
 where c.tipo='SO'
 group by e.idEntidad)
 ) b
 on a.idEntidad = b.idEntidad</CODE>
</VIEW>
<VIEW>
<NAME>view_tEntidadFechaRenovacion</NAME>
<ID>89</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
   SELECT
	te.idEntidad,
	te.SUJETO_OBLIGADO
   ,SUBSTRING(te.CODIGO_VERIFICADOR, 1, 4) AS año
   ,SUBSTRING(te.CODIGO_VERIFICADOR, 5, 2) AS mes
   ,SUBSTRING(te.CODIGO_VERIFICADOR, 7, 2) AS dia


    ,CONVERT(DATE, (SUBSTRING(te.CODIGO_VERIFICADOR, 1, 4) +
	SUBSTRING(te.CODIGO_VERIFICADOR, 5, 2) +
	SUBSTRING(te.CODIGO_VERIFICADOR, 7, 2))) AS fechaIni

   ,DATEADD(dd, 722, CONVERT(DATE,
	CONVERT(DATE, (SUBSTRING(te.CODIGO_VERIFICADOR, 1, 4) +
	SUBSTRING(te.CODIGO_VERIFICADOR, 5, 2) +
	SUBSTRING(te.CODIGO_VERIFICADOR, 7, 2)))
	)) AS fechaDeRenovacion
   ,te.CODIGO_VERIFICADOR
FROM tEntidad AS te</CODE>
</VIEW>
<VIEW>
<NAME>view_ultIdEntidadhist</NAME>
<ID>90</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS

SELECT MAX(ehr1.idEntidad_hist) AS idEntidad_histULTIMO,ehr1.idEntidad
FROM tEntidadHistRenovados ehr1
GROUP BY ehr1.idEntidad</CODE>
</VIEW>
<VIEW>
<NAME>v_entidatotal</NAME>
<ID>91</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as (

SELECT        e.idEntidad, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, e.nusuario,e.ESTADO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad
WHERE        (e.ESTADO_IMPRESION = 'SI'))</CODE>
</VIEW>
<VIEW>
<NAME>v_entidadtotal_activos</NAME>
<ID>92</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as (
SELECT        e.idEntidad, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, e.nusuario,
                         e.ESTADO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad
WHERE        (e.ESTADO_IMPRESION = 'SI' ) and e.ESTADO='AC')</CODE>
</VIEW>
<VIEW>
<NAME>v_sujetos_obligados_consolidados_activos</NAME>
<ID>93</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as (
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE, lt.Fecha fecha_emision, 'SG' as ng
FROM            v_entidadtotal_activos e, REGISTRO_REQUISITO rr JOIN
                         tCertificadoImpresion ci ON rr.idTramite = ci.idTramite AND ci.tipo = 'SO' AND ci.idCertificadoImpresion =
                             (SELECT        max(ci1.idCertificadoImpresion)
                               FROM            tCertificadoImpresion ci1
                               WHERE        ci1.idTramite = ci.idTramite AND ci1.tipo = 'SO') JOIN
                         LogsTrans lt ON ci.idLogTrans = lt.idLogTrans
WHERE        EXISTS
                             (SELECT        1
                               FROM            REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                               WHERE        rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND EXISTS
                                                             (SELECT        1
                                                               FROM            tTramite t
                                                               WHERE        t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                         e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6 AND rr.fecha_registro =
                             (SELECT        max(rr1.fecha_registro)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idEntidad = e.idEntidad AND rr1.idParam &lt;= 6)
UNION ALL
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE, ota.Fecha_Archivado fecha_emision, 'NG' as ng
FROM            v_entidadtotal_activos e, REGISTRO_REQUISITO rr, tObservacionTramite_Archivo ota
WHERE        EXISTS
                             (SELECT        1
                               FROM            REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                               WHERE        rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND EXISTS
                                                             (SELECT        1
                                                               FROM            tTramite t
                                                               WHERE        t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                         e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6 AND rr.fecha_registro =
                             (SELECT        max(rr1.fecha_registro)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idEntidad = e.idEntidad AND rr1.idParam &lt;= 6) AND NOT EXISTS
                             (SELECT        1
                               FROM            tCertificadoImpresion ci
                               WHERE        rr.idTramite = ci.idTramite) AND rr.idTramite = ota.idTramite AND rr.Secuencia = ota.Secuencia
							   )</CODE>
</VIEW>
<VIEW>
<NAME>v_imprimeconstancia</NAME>
<ID>94</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname%
as
select r.estado_renovacion,r.idTramite,r.idFuncionario,r.idEntidad, r.ESTADO,r.Estado_DU,r.fecha_documento,r.fecha_registro,
r.idRegistro_Requisito,r.idParam,r.nro_documento,r.Secuencia,tc.EstadoImpresion,tc.fechaRegistro,tc.idTramite as idTramiteClasifica,tc.idTramite_Secuencia,tc.Requisitos,
tc.Tipo_Funcionario,tc.Tipo_Tramite,tc.usuarioRegistro
from REGISTRO_REQUISITO r
inner join tTramite t
on r.idEntidad=t.idEntidad
and r.idTramite=t.idTramite
inner join tTramiteClasificacion tc
on t.idTramite_Secuencia=tc.idTramite_Secuencia

where r.ESTADO='AJ'</CODE>
</VIEW>
<VIEW>
<NAME>view_listar_AC_tramiteANTERIOR</NAME>
<ID>95</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                         P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                         f.OBSERVACIONES, f.idEntidad, tr.idTramite, f.Observacion_subsanada, (CASE WHEN EXISTS
                             (SELECT        *
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idFuncionario = rr.idFuncionario AND rr1.ESTADO = 'OB') THEN 'OBSERVADO' WHEN EXISTS
                             (SELECT        *
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idFuncionario = rr.idFuncionario AND rr1.ESTADO = 'AP') THEN 'APROBADO' ELSE 'PENDIENTE' END) AS ESTADO
FROM            dbo.tFuncionario AS f INNER JOIN
                         dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                         dbo.tPais AS P ON f.idPais = P.idPais INNER JOIN
                         dbo.tTramite AS tr ON f.idEntidad = tr.idEntidad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON tr.idTramite = rr.idTramite AND f.idFuncionario = rr.idFuncionario INNER JOIN
                         dbo.tEstado AS est ON rr.ESTADO = est.Estado_Tramite
WHERE        (f.TIPO_FUNCIONARIO = 'AC') AND (rr.idRegistro_Requisito =
                             (SELECT        MIN(idRegistro_Requisito) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO
                               WHERE        (idFuncionario = rr.idFuncionario))) AND (tr.Estado_Tramite &lt;&gt; 'AP') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr
                               WHERE        (idTramite = tr.idTramite) AND (idFuncionario = f.idFuncionario))</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivados_ConNombres</NAME>
<ID>96</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create VIEW %viewname% as
SELECT distinct
      --case when tipo='DE SUJETO OBLIGADO Y FR'
	  --then null else vt.[idFuncionario] end as idFuncionario
	  vt.[idFuncionario]
      ,vt.[idEntidad]
      ,vt.[idTramite_Secuencia]
      ,vt.[idTramite]
      ,vt.[SUJETO_OBLIGADO]
      ,vt.[NIT]
      ,vt.[TIPO_SUJETO_OBLIGADO]
      ,vt.[OTRO_TIPO_SO]
      ,vt.[NOMBRE_REPRESENTANTE]
      ,vt.[CIUDAD]
      ,vt.[CORREO_ELECTRONICO]
      ,vt.[OFCEN_ZONA]
      ,vt.[OFCEN_DIRECCION]
      ,vt.[OFCEN_TELEFONO]
      ,vt.[OBSERVACIONES]
      ,vt.[CODIGO_VERIFICADOR]
      ,vt.[nusuario]
      ,vt.[estadoEntidad]
      ,vt.[fecha_registro]
      ,vt.[ESTADO]
	 ,'' AS Detalle
	 ,
	 '' as usuarioLegal
	 ,'' as Observacion_subsanada
      ,vt.[Secuencia]
      ,vt.[Estado_DU]
      ,
	  --case when tipo='DE SUJETO OBLIGADO Y FR'
	  --then null else vt.[nombre_funcionario] end as nombre_funcionario
	  vt.[nombre_funcionario]
      ,vt.[tipoProceso]
      ,vt.[TIPO]
	  ,vt.tipoProceso + ' '+ TIPO as TIPO_TRAMITE
      ,tta.Observacion,
	  max(tta.Fecha_Archivado ) as FEcha_Archivo,
	  tta.Observacion AS nro_sicod,
	  vt.TIPO_FUNCIONARIO
FROM v_resumen_traza_requisitos vt
inner join dbo.tObservacionTramite_Archivo AS tta ON vt.idTramite = tta.idTramite
and tta.Secuencia = vt.Secuencia
where
vt.TIPO != 'DADO DE BAJA' AND
vt.estadoEntidad = 'AC' and vt.ESTADO_IMPRESION = 'SI' and vt.ESTADO = 'TE'
and idTramite_Secuencia
in
	(
		SELECT max(vt.idTramite_Secuencia) FROM v_resumen_traza_requisitos vt
		inner join dbo.tObservacionTramite_Archivo AS tta ON vt.idTramite = tta.idTramite
		where  vt.TIPO != 'DADO DE BAJA' AND vt.estadoEntidad = 'AC' and vt.ESTADO_IMPRESION = 'SI' and vt.ESTADO = 'TE'
		--	group by vt.idEntidad, case when vt.tipo='DE SUJETO OBLIGADO Y FR' then 'DE SUJETO OBLIGADO' else vt.tipo end
		and (vt.TIPO_FUNCIONARIO not in ('BA','BC') or vt.TIPO_FUNCIONARIO is null  )
		group by vt.idEntidad, vt.idFuncionario
	)
	--and (vt.TIPO_FUNCIONARIO not in ('BA') or vt.TIPO_FUNCIONARIO is null  )
	and (
	        --  (vt.TIPO='DE SUJETO OBLIGADO Y FR' and vt.[nombre_funcionario] is not null)
		    (vt.TIPO='DE SUJETO OBLIGADO Y FR' and vt.[nombre_funcionario] is  null)
		   or
		   (vt.TIPO!='DE SUJETO OBLIGADO Y FR')
		)

	--and vt.idEntidad=1033
	--and vt.idEntidad=1262
	--and vt.idEntidad=1011
	--and vt.idEntidad=1028
	--and vt.idEntidad=1140
	--and vt.idEntidad=1093
	--and vt.idEntidad=1128
	/*
	SELECT vt.idEntidad, case when vt.tipo='DE SUJETO OBLIGADO Y FR' then 'DE SUJETO OBLIGADO' else vt.tipo end ,
	 max(vt.idTramite_Secuencia) FROM v_resumen_traza_requisitos vt
		inner join dbo.tObservacionTramite_Archivo AS tta ON vt.idTramite = tta.idTramite
		where  vt.TIPO != 'DADO DE BAJA' AND vt.estadoEntidad = 'AC' and vt.ESTADO_IMPRESION = 'SI' and vt.ESTADO = 'TE'
		group by vt.idEntidad, case when vt.tipo='DE SUJETO OBLIGADO Y FR' then 'DE SUJETO OBLIGADO' else vt.tipo end
		having idEntidad=1262
		*/


group by  vt.[idFuncionario]
      ,vt.[idEntidad]
      ,vt.[idTramite_Secuencia]
      ,vt.[idTramite]
      ,vt.[SUJETO_OBLIGADO]
      ,vt.[NIT]
      ,vt.[TIPO_SUJETO_OBLIGADO]
      ,vt.[OTRO_TIPO_SO]
      ,vt.[NOMBRE_REPRESENTANTE]
      ,vt.[CIUDAD]
      ,vt.[CORREO_ELECTRONICO]
      ,vt.[OFCEN_ZONA]
      ,vt.[OFCEN_DIRECCION]
      ,vt.[OFCEN_TELEFONO]
      ,vt.[OBSERVACIONES]
      ,vt.[CODIGO_VERIFICADOR]
      ,vt.[nusuario]
      ,vt.[estadoEntidad]
      ,vt.[fecha_registro]
      ,vt.[ESTADO]


      ,vt.[Secuencia]
      ,vt.[Estado_DU]
      ,
	  --case when tipo='DE SUJETO OBLIGADO Y FR'
	  --then null else vt.[nombre_funcionario] end as nombre_funcionario
	  vt.[nombre_funcionario]
      ,vt.[tipoProceso]
      ,vt.[TIPO]
	  ,vt.tipoProceso + ' '+ TIPO
      ,tta.Observacion,

	  tta.Observacion ,
	  vt.TIPO_FUNCIONARIO</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivadosANTERIOR</NAME>
<ID>97</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE,
                         c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
                         rr.fecha_registro, e.nusuario, 'APROBADO' AS ESTADO, '' AS Detalle, tta.Observacion,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          tta.Fecha_Archivado
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                         dbo.tObservacionTramite_Archivo AS tta ON rr.idTramite = tta.idTramite INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad AND tta.Secuencia = tr.Secuencia AND tr.idTramite = tta.idTramite AND rr.Secuencia = tr.Secuencia
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'TE') AND (rr.idRegistro_Requisito =
                             (SELECT        MIN(idRegistro_Requisito) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr1
                               WHERE        (idEntidad = rr.idEntidad) AND (idTramite = rr.idTramite) AND (ESTADO = 'TE') AND (Secuencia = rr.Secuencia)))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_Aprobado_ArchivoANTERIOR</NAME>
<ID>98</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE,
                         c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
                         rr.fecha_registro, e.nusuario, 'APROBADO' AS ESTADO, '' AS Detalle,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN



						  CASE
															WHEN (SELECT count(f.idFuncionario)
																	FROM tFuncionario f
																	WHERE f.TIPO_FUNCIONARIO='FR' AND f.idFuncionario IN (SELECT fhr.idFuncionario
																											FROM tFuncionarioHistRenovados fhr
																											WHERE fhr.idFuncionario=f.idFuncionario AND fhr.idEntidad=e.idEntidad))
																&gt; 0 THEN 'RENOVACION FUNCIONARIO RESPONSABLE'
															ELSE 'REGISTRO FUNCIONARIO RESPONSABLE'
														END




						 ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END
						 ELSE
						    CASE WHEN (SELECT COUNT(te.idEntidad) FROM tEntidad as te
										  WHERE te.idEntidad IN (SELECT teh.idEntidad FROM tEntidadHistRenovados AS teh)
										AND te.idEntidad=e.idEntidad)&gt;0
										THEN 'RENOVACION DE SUJETO OBLIGADO'
										ELSE 'REGISTRO DE SUJETO OBLIGADO'
								END



						 END AS TIPO_TRAMITE
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'AR') AND (rr.idRegistro_Requisito =
                             (SELECT        MIN(idRegistro_Requisito) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr1
                               WHERE        (idEntidad = rr.idEntidad) AND (idTramite = rr.idTramite) AND (ESTADO = 'AR') AND (Secuencia = rr.Secuencia))) AND (tr.Estado_Tramite = 'AR') AND
                         EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.Observacion_Tramite_Sistemas
                               WHERE        (idTramite = rr.idTramite))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_AprobadoANTERIOR</NAME>
<ID>99</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE,
                         c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
                         rr.fecha_registro, e.nusuario, 'APROBADO' AS ESTADO,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN


						  CASE
															WHEN (SELECT count(f.idFuncionario)
																	FROM tFuncionario f
																	WHERE f.TIPO_FUNCIONARIO='FR' AND f.idFuncionario IN (SELECT fhr.idFuncionario
																											FROM tFuncionarioHistRenovados fhr
																											WHERE fhr.idFuncionario=f.idFuncionario AND fhr.idEntidad=e.idEntidad))
																&gt; 0 THEN 'RENOVACION FUNCIONARIO RESPONSABLE'
															ELSE 'REGISTRO FUNCIONARIO RESPONSABLE'
														END





						 ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END
						 END
						   ELSE
								CASE WHEN (SELECT COUNT(te.idEntidad) FROM tEntidad as te
										  WHERE te.idEntidad IN (SELECT teh.idEntidad FROM tEntidadHistRenovados AS teh)
										AND te.idEntidad=e.idEntidad)&gt;0
										THEN 'RENOVACION DE SUJETO OBLIGADO'
										ELSE 'REGISTRO DE SUJETO OBLIGADO'
								END

						 END AS TIPO_TRAMITE
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'AP') AND (tr.Estado_Tramite = 'AP')</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_tramiteRegistroTerminado</NAME>
<ID>100</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        e.idEntidad, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, e.nusuario,
                         e.TIPO_EMPRESA, e.CORREO_ELECTRONICO AS Expr1,
                             (SELECT        MIN(ot.Fecha_Archivado) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr INNER JOIN
                                                         dbo.tObservacionTramite_Archivo AS ot ON rr.idTramite = ot.idTramite
                               WHERE        (rr.idParam &lt;= 6) AND (rr.idEntidad = e.idEntidad)) AS fecha_archivado
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad
WHERE        (e.ESTADO_IMPRESION = 'SI') AND (e.ESTADO = 'AC') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tTramite AS t
                               WHERE        (Estado_Tramite = 'TE') AND (idEntidad = e.idEntidad) AND (idTramite =
                                                             (SELECT        MIN(idTramite) AS Expr1
                                                               FROM            dbo.tTramite AS tr
                                                               WHERE        (idEntidad = t.idEntidad))))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisitoANTERIOR</NAME>
<ID>101</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE,
                         c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
                         rr.fecha_registro, e.nusuario, 'PENDIENTE' AS ESTADO,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN


									 CASE
															WHEN (SELECT count(f.idFuncionario)
																	FROM tFuncionario f
																	WHERE f.TIPO_FUNCIONARIO='FR' AND f.idFuncionario IN (SELECT fhr.idFuncionario
																											FROM tFuncionarioHistRenovados fhr
																											WHERE fhr.idFuncionario=f.idFuncionario AND fhr.idEntidad=e.idEntidad))
																&gt; 0 THEN 'RENOVACION FUNCIONARIO RESPONSABLE'
															ELSE 'REGISTRO FUNCIONARIO RESPONSABLE'
														END




						 ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END
						 ELSE
						    CASE WHEN (SELECT COUNT(te.idEntidad) FROM tEntidad as te
										  WHERE te.idEntidad IN (SELECT teh.idEntidad FROM tEntidadHistRenovados AS teh)
										AND te.idEntidad=e.idEntidad)&gt;0
										THEN 'RENOVACION DE SUJETO OBLIGADO'
										ELSE 'REGISTRO DE SUJETO OBLIGADO'
								END


						 END AS TIPO_TRAMITE
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                         dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'AJ') AND (tr.Estado_Tramite &lt;&gt; 'AP') AND (tr.Estado_Tramite &lt;&gt; 'TE') AND
                         (tr.Estado_Tramite &lt;&gt; 'AR') AND (tr.Estado_Tramite &lt;&gt; 'AH') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tTramite AS t
                               WHERE        (idEntidad = e.idEntidad)) AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
      WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite))</CODE>
</VIEW>
<VIEW>
<NAME>view_estrategico</NAME>
<ID>102</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT     e.SUJETO_OBLIGADO, e.OFCEN_TELEFONO, e.CORREO_ELECTRONICO AS correo_electronico_institucion, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO,
                      vv.fecha_archivado, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS nombre, f.CM_TELEFONO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f1.PN_NOMBRE + ' ' + f1.PN_PATERNO + ' ' + f1.PN_MATERNO AS nombre_analista, f1.CM_TELEFONO AS telefono_analista, f1.CM_CELULAR AS celular_analista,
                      f1.CORREO_ELECTRONICO AS correo_analista, vv.CIUDAD
FROM         dbo.tEntidad AS e LEFT OUTER JOIN
                      dbo.tFuncionario AS f ON e.idEntidad = f.idEntidad AND f.TIPO_FUNCIONARIO = 'FR' INNER JOIN
                      dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                      dbo.view_ver_entidad_tramiteRegistroTerminado AS vv ON e.idEntidad = vv.idEntidad LEFT OUTER JOIN
                      dbo.tFuncionario AS f1 ON e.idEntidad = f1.idEntidad AND f1.TIPO_FUNCIONARIO = 'AC'
WHERE     (e.ESTADO_IMPRESION = 'SI') AND (e.ESTADO = 'AC')</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisitoME_ANTERIOR</NAME>
<ID>103</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname%
as

SELECT DISTINCT
                         rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, rr.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO, CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5) = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR') = 1 THEN CASE WHEN
                             (SELECT        COUNT(f.idFuncionario)
                               FROM            tFuncionario f
                               WHERE        f.TIPO_FUNCIONARIO = 'FR' AND f.idFuncionario =
                                                             (SELECT        fhr.idFuncionario
                                                               FROM            tFuncionarioHistRenovados fhr
                                                               WHERE        fhr.idFuncionario = f.idFuncionario)) &gt; 0 THEN CASE WHEN
                             (SELECT        COUNT(f.idFuncionario)
                               FROM            tFuncionario f
                               WHERE        f.TIPO_FUNCIONARIO = 'FR' AND f.idFuncionario IN
                                                             (SELECT        fhr.idFuncionario
                                                               FROM            tFuncionarioHistRenovados fhr
                                                               WHERE        fhr.idFuncionario = f.idFuncionario AND fhr.idEntidad = e.idEntidad))
                         &gt; 0 THEN 'RENOVACION FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO FUNCIONARIO RESPONSABLE' END ELSE 'REGISTRO FUNCIONARIO RESPONSABLE' END
                          ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE CASE WHEN
                             (SELECT        COUNT(te.idEntidad)
                               FROM            tEntidad AS te
                               WHERE        te.idEntidad IN
                                                             (SELECT        teh.idEntidad
                                                               FROM            tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad)
                         &gt; 0 THEN 'RENOVACION DE SUJETO OBLIGADO' ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                         dbo.tTramite AS tr ON rr.idTramite = tr.idTramite
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'AJ') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tTramite AS t
                               WHERE        (idEntidad = e.idEntidad)) AND (NOT EXISTS
                             (SELECT1 AS sExpr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite)))
							   --AND (rr.estado_renovacion = 0)</CODE>
</VIEW>
<VIEW>
<NAME>view_AC_observados</NAME>
<ID>104</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
select * from view_AC v
where exists (select 1 from REGISTRO_REQUISITO rr where rr.idFuncionario=v.idFuncionario and rr.ESTADO='OB')</CODE>
</VIEW>
<VIEW>
<NAME>v_TramiteParametrosMinimosMaximos</NAME>
<ID>105</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
select idTramite,Secuencia,min(idParam) as minimoParam,max(idParam) as maximoParam from REGISTRO_REQUISITO
group by idTramite,Secuencia</CODE>
</VIEW>
<VIEW>
<NAME>busqueda_por_FR</NAME>
<ID>106</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname% as
SELECT        e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.NOMBRE_REPRESENTANTE, e.OFCEN_DIRECCION,
                         fr.PN_NOMBRE + ' ' + fr.PN_PATERNO + ' ' + fr.PN_MATERNO AS NOMBRE_FR, e.idEntidad
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tFuncionario AS fr ON e.idEntidad = fr.idEntidad
WHERE        (fr.TIPO_FUNCIONARIO = 'FR') and e.ESTADO_IMPRESION='SI' and e.ESTADO='AC'</CODE>
</VIEW>
<VIEW>
<NAME>v_otros_tipos_tramite</NAME>
<ID>107</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT distinct       tr.idTramite ,'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' as tipo
FROM          tTramite tr, tComunicacionCambioFR c
WHERE         tr.idTramite = c.idTramite
--'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE'

union

--'BAJA FUNCIONARIO RESPONSABLE'
SELECT distinct       tr.idTramite , 'BAJA FUNCIONARIO RESPONSABLE' as tipo
FROM          tTramite tr,  tBajaFuncionario BF, LogsTrans lt
WHERE
              TR.idTramite = BF.idTramiteNuevo
			  AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
union

SELECT        tr.idTramite, 'BAJA ANALISTA DE CUMPLIMIENTO' as tipo
FROM            tTramite tr,  tBajaFuncionario BF, LogsTrans lt
WHERE           TR.idTramite = BF.idTramiteNuevo
               AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'</CODE>
</VIEW>
<VIEW>
<NAME>busqueda_por_FR_tramiteRegistroTerminado</NAME>
<ID>108</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT        e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.NOMBRE_REPRESENTANTE, e.OFCEN_DIRECCION,
                         fr.PN_NOMBRE + ' ' + fr.PN_PATERNO + ' ' + fr.PN_MATERNO AS NOMBRE_FR, e.idEntidad
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tFuncionario AS fr ON e.idEntidad = fr.idEntidad
WHERE        (fr.TIPO_FUNCIONARIO = 'FR') AND (e.ESTADO_IMPRESION = 'SI') AND (e.ESTADO = 'AC')
			 and exists (select 1 from tTramite t where t.Estado_Tramite='TE' and t.idEntidad=e.idEntidad
			 and t.idTramite=(select min(tr.idTramite) from tTramite tr where tr.idEntidad=t.idEntidad))</CODE>
</VIEW>
<VIEW>
<NAME>v_resumen_traza_requisitos</NAME>
<ID>109</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
--ALTER  view v_algo as
SELECT                   fun.idFuncionario,
                         e.idEntidad,
                         tr.idTramite_Secuencia, tr.idTramite,
						 rr.idParam,
						 rr.idRegistro_Requisito,
						 e.SUJETO_OBLIGADO,
						 e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO,
						 ae.nombre,
						 e.OTRO_TIPO_SO,
                         e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO,
						 e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO,
                         e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
						 e.nusuario,
						 --tta.Observacion,
                         --tta.Fecha_Archivado,
						 e.ESTADO as estadoEntidad,
						 e.ESTADO_IMPRESION,
						 rr.estado_renovacion,
						 rr.fecha_registro,
						 rr.ESTADO,
						 tr.Secuencia,
						 rr.Estado_DU,
						tr.Estado_Tramite,--nuevo
						 tr.Observacion_subsanada,

                         fun.PN_NOMBRE + ' ' + fun.PN_PATERNO + ' ' + fun.PN_MATERNO AS nombre_funcionario,
						 --tta.Observacion AS nro_sicod,
						 CASE WHEN  tc.idTramite_Secuencia IS NULL THEN 'REGISTRO' ELSE 'RENOVACION' END tipoProceso,
						 CASE WHEN   vp.minimoParam &lt;= 6 and (vp.maximoParam=9 or vp.maximoParam =11 or vp.maximoParam =15) then 'DE SUJETO OBLIGADO Y FR'
						 when  (vp.maximoParam&lt;=6 or vp.maximoParam = 10 or vp.maximoParam = 13) then 'DE SUJETO OBLIGADO'
						 when  vp.minimoParam=7  and (vp.maximoParam=9 or vp.maximoParam = 11 or vp.maximoParam =15) and fun.TIPO_FUNCIONARIO in ('FR','BA','BT')
						 then  'FUNCIONARIO RESPONSABLE'
						 --when  vp.minimoParam=7  and vp.maximoParam=9 and fun.TIPO_FUNCIONARIO='BA'
						 --then  'BAJA DE FUNCIONARIO RESPONSABLE'
						 --when  vp.minimoParam=7  and vp.maximoParam=9 and fun.TIPO_FUNCIONARIO='BT'
						 --then  'BAJA DE FUNCIONARIO RESPONSABLE'
						 when  vp.minimoParam=7  and (vp.maximoParam=9 or vp.maximoParam=11 or vp.maximoParam =15) and fun.TIPO_FUNCIONARIO in ('AC','BC')
						 then  'ANALISTA DE CUMPLIMIENTO'
						 --when  vp.minimoParam=7  and vp.maximoParam=9 and fun.TIPO_FUNCIONARIO='BC'
						 --then  'BAJA DE ANALISTA DE CUMPLIMIENTO'

						 when ott.idTramite is not null
						 then ott.tipo

						 ELSE
						 'DADO DE BAJA'
						 --+' min'+ isnull(cast(vp.minimoParam as varchar),'')
						 --+ 'max'+ isnull( cast(vp.maximoParam as varchar),'') +'  fun  '+ isnull( fun.TIPO_FUNCIONARIO,'nn')
						 END AS TIPO      ,c.Descripcion
						 ,fun.TIPO_FUNCIONARIO


FROM                     dbo.tEntidad AS e
                         INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica
						 INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad

						 INNER JOIN
                         tTramite  AS tr ON
						 tr.idEntidad = e.idEntidad

						 LEFT JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON tr.idTramite = rr.idTramite
						 and
						 tr.Secuencia = rr.Secuencia

						 LEFT  join
						  v_TramiteParametrosMinimosMaximos vp on vp.idTramite = rr.idTramite and vp.Secuencia = rr.Secuencia
						 LEFT OUTER JOIN
                         dbo.tFuncionario AS fun ON rr.idFuncionario = fun.idFuncionario
						 LEFT OUTER JOIN
                         dbo.tTramiteClasificacion AS tc ON tr.idTramite= tc.idTramite
						 left join
						 v_otros_tipos_tramite ott on tr.idTramite = ott.idTramite</CODE>
</VIEW>
<VIEW>
<NAME>lista_final_1</NAME>
<ID>110</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.NOMBRE_REPRESENTANTE, e.OFCEN_DIRECCION,
                         fr.PN_NOMBRE + ' ' + fr.PN_PATERNO + ' ' + fr.PN_MATERNO AS NOMBRE_FR, e.idEntidad
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tFuncionario AS fr ON e.idEntidad = fr.idEntidad
WHERE        (fr.TIPO_FUNCIONARIO = 'FR') AND (e.ESTADO_IMPRESION = 'SI') AND (e.ESTADO = 'AC')</CODE>
</VIEW>
<VIEW>
<NAME>v_listar_tiempos_registro_sub</NAME>
<ID>111</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT distinct
v.idTramite_Secuencia,
V.idTramite, V.Secuencia,
v.SUJETO_OBLIGADO,v.NIT,v.nombre AS TIPO_SUJETO_OBLIGADO,
v.tipoProceso +' '+ v.TIPO as TIPO_TRAMITE,
(SELECT        CONVERT(date, MAX(fecha_registro)) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr
                               WHERE        (idTramite = v.idTramite) AND (Secuencia = v.Secuencia)) AS fecha_registro,

 (SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN

                                                         dbo.REGISTRO_REQUISITO AS rr
														 ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'RC')
							   AND (rr.idTramite = v.idTramite) AND (rr.Secuencia = v.Secuencia))
							    AS fecha_recepcion ,

								(SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                         dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'OB') AND (rr.idTramite = v.idTramite) AND (rr.Secuencia = v.Secuencia)) AS fecha_ultimaObservacion,

							   (SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                         dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'CR') AND (rr.idTramite = v.idTramite) AND (rr.Secuencia = v.Secuencia)) AS fecha_ultimaCorreccion,

							   (SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                         dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'AP') AND (rr.idTramite = v.idTramite) AND (rr.Secuencia = v.Secuencia)) AS fecha_aprobacion_legal,

							    (SELECT        CONVERT(date, MAX(Fecha_Aprobacion)) AS Expr1
                               FROM            dbo.Observacion_Tramite_Sistemas AS l
                               WHERE        (idTramite = v.idTramite)) AS fecha_aprobacion_sistemas,

							          (SELECT        CONVERT(date, MAX(Fecha_Archivado)) AS Expr1
                               FROM            dbo.tObservacionTramite_Archivo AS l
                               WHERE        (idTramite = v.idTramite)) AS fecha_archivado,

							     CASE WHEN v.Estado_Tramite = 'AJ'
							   THEN
							   CASE WHEN  (SELECT DISTINCT 1
                                           FROM            LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                                           WHERE        l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'AP' AND rr.idTramite = v.idTramite AND rr.Secuencia = v.Secuencia)
                                           = 1
								THEN 'APROBADO SOLO SUJETO OBLIGADO ÁREA JURÍDICA'
						        ELSE 'TRAMITE PENDIENTE' END

						  ELSE CASE WHEN v.Estado_Tramite = 'AP' THEN 'APROBADO ÁREA JURÍDICA'
                          ELSE CASE WHEN v.Estado_tramite = 'AR' THEN 'APROBADO ÁREA SISTEMAS'
						  ELSE CASE WHEN v.Estado_tramite = 'AH' THEN 'TRÁMITE ARCHIVADO'
						  ELSE CASE WHEN v.Estado_Tramite = 'OB' THEN 'TRÁMITE OBSERVADO'
						  ELSE 'TRÁMITE TERMINADO' END END END END END AS ESTADO_TRAMITE
FROM v_resumen_traza_requisitos v
WHERE        (v.estadoEntidad = 'AC') AND (v.ESTADO_IMPRESION = 'SI')











--left join tObservacionMesa_Entrada tbm on v.idTramite = tbm.idTramite</CODE>
</VIEW>
<VIEW>
<NAME>lista_final_2</NAME>
<ID>112</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
select (PN_NOMBRE +' '+ PN_PATERNO +' '+ PN_MATERNO) NOMBRE_FR,idEntidad from tFuncionario
where TIPO_FUNCIONARIO='AC'</CODE>
</VIEW>
<VIEW>
<NAME>view_estado_sujetos_obligadosANTERIOR</NAME>
<ID>113</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE, lt.Fecha fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr JOIN
                      tCertificadoImpresion ci ON rr.idTramite = ci.idTramite and ci.tipo='SO' AND ci.idCertificadoImpresion =
                          (SELECT     max(ci1.idCertificadoImpresion)
                            FROM          tCertificadoImpresion ci1
                            WHERE      ci1.idTramite = ci.idTramite and ci1.tipo='SO') JOIN
                      LogsTrans lt ON ci.idLogTrans = lt.idLogTrans
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'

							 and rr.idTramite=rr2.idTramite
							 AND EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idParam &lt;= 6)
union all
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE, ota.Fecha_Archivado fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr,tObservacionTramite_Archivo ota
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
							and rr.idTramite=rr2.idTramite
							 AND EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idParam &lt;= 6)
					  and not exists (select  1 from  tCertificadoImpresion ci
						where rr.idTramite = ci.idTramite)
						and rr.idTramite=ota.idTramite
						and rr.Secuencia=ota.Secuencia
UNION ALL
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN ARCHIVOS' ESTADO_TRAMITE, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
							and  rr.idtramite=rr2.idTramite AND EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AR') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
UNION ALL
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN SISTEMAS' ESTADO_TRAMITE, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
							and rr.idTramite=rr2.idTramite
							AND EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AP') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
UNION ALL
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
							and rr2.idTramite=rr.idTramite
							AND EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AJ') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
UNION ALL
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' and rr2.idTramite=rr.idTramite) AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
UNION ALL
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN MESA DE ENTRADA' ESTADO_TRAMITE, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'

							and rr.idTramite=rr2.idTramite
							)
		AND NOT EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6</CODE>
</VIEW>
<VIEW>
<NAME>view_estado_sujetos_obligadosANTERIORJP</NAME>
<ID>114</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE, lt.Fecha fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr JOIN
                      tCertificadoImpresion ci ON rr.idTramite = ci.idTramite and ci.tipo='SO' AND ci.idCertificadoImpresion =
                          (SELECT     max(ci1.idCertificadoImpresion)
                            FROM          tCertificadoImpresion ci1
                            WHERE      ci1.idTramite = ci.idTramite and ci1.tipo='SO') JOIN
                      LogsTrans lt ON ci.idLogTrans = lt.idLogTrans
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idParam &lt;= 6)
union all
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE, ota.Fecha_Archivado fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr,tObservacionTramite_Archivo ota
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idParam &lt;= 6)
					  and not exists (select  1 from  tCertificadoImpresion ci
						where rr.idTramite = ci.idTramite)
						and rr.idTramite=ota.idTramite
						and rr.Secuencia=ota.Secuencia
UNION ALL
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN ARCHIVOS' ESTADO_TRAMITE, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AR') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
UNION ALL
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN SISTEMAS' ESTADO_TRAMITE, NULL fecha_emision
FROM     view_ver_entidad e, REGISTRO_REQUISITO rr
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AP') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
UNION ALL
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AJ') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
UNION ALL
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP') AND EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6
UNION ALL
SELECT DISTINCT e.*, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN MESA DE ENTRADA' ESTADO_TRAMITE, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idParam &lt;= 6 AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP') AND NOT EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idParam &lt;= 6</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivados_observados</NAME>
<ID>115</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
SELECT        tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE,
                         c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
                         rr.fecha_registro, e.nusuario, 'APROBADO' AS ESTADO, '' AS Detalle, tta.Observacion,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) in (9,15) THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 4 AND (rr1.Secuencia = rr.Secuencia))
                         = 4 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          tta.Fecha_Archivado
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad INNER JOIN
                         dbo.tObservacionTramite_Archivo AS tta ON rr.idTramite = tta.idTramite INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad AND tta.Secuencia = tr.Secuencia AND tr.idTramite = tta.idTramite AND rr.Secuencia = tr.Secuencia
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'TE') AND (rr.idRegistro_Requisito =
                             (SELECT        MIN(idRegistro_Requisito) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr1
                               WHERE        (idEntidad = rr.idEntidad) AND (idTramite = rr.idTramite) AND (ESTADO = 'TE') AND (Secuencia = rr.Secuencia)))
							   and exists (select 1 from LOG_REGISTRO_REQUISITO lrr1 where lrr1.idRegistro_Requisito=rr.idRegistro_Requisito and lrr1.Operacion='OB')</CODE>
</VIEW>
<VIEW>
<NAME>view_AC_recepcionados</NAME>
<ID>116</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT   distinct     f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                         P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                         f.OBSERVACIONES, f.idEntidad
FROM            dbo.tFuncionario AS f INNER JOIN
                         dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                         dbo.tPais AS P ON f.idPais = P.idPais inner join
						 dbo.REGISTRO_REQUISITO as rr on f.idFuncionario=rr.idFuncionario
WHERE        (f.TIPO_FUNCIONARIO = 'AC') and not exists (select 1 from tObservacionMesa_Entrada where
							   f.idEntidad=idEntidad and rr.idTramite=idTramite)</CODE>
</VIEW>
<VIEW>
<NAME>view_listar_tiempos_registroANTERIOR</NAME>
<ID>117</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname%
--Reporte por Tiempos y Etapas de Registro
--view_listar_tiempos_registro
as
SELECT DISTINCT tr.idTramite_Secuencia, tr.idTramite, tr.Secuencia, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = tr.idTramite AND rr1.Secuencia = tr.Secuencia) = 9
							THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = tr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = tr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = tr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = tr.Secuencia))
                         = 1

						-- THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO'

						 THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END

						 END AS TIPO_TRAMITE,
                             (SELECT        CONVERT(date, MAX(fecha_registro)) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr
                               WHERE        (idTramite = tr.idTramite) AND (Secuencia = tr.Secuencia)) AS fecha_registro,
                             (SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                         dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'RC') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)) AS fecha_recepcion, DATEDIFF(dd,
                             (SELECT        CONVERT(date, MAX(fecha_registro)) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr
                               WHERE        (idTramite = tr.idTramite) AND (Secuencia = tr.Secuencia)),
                             (SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                         dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'RC') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia))) AS tdias1,
                             (SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                         dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'OB') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)) AS fecha_ultimaObservacion,
                             (SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                         dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'CR') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)) AS fecha_ultimaCorreccion, DATEDIFF(dd,
                             (SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                         dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'OB') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)),
                             (SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                         dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'CR') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia))) AS tdias2,
                             (SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                         dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'AP') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)) AS fecha_aprobacion_legal, CASE WHEN
                             (SELECT        CONVERT(date, MAX(l.Fecha))
                               FROM            LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                               WHERE        l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'AP' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia)
                         != '' THEN CASE WHEN
                             (SELECT        CONVERT(date, MAX(l.Fecha))
                               FROM            LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                               WHERE        l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'CR' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia)
                         != '' THEN DATEDIFF(dd,
                             (SELECT        CONVERT(date, MAX(l.Fecha))
                         FROM            LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                               WHERE        l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'CR' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia),
                             (SELECT        CONVERT(date, MAX(l.Fecha))
                               FROM            LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                               WHERE        l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'AP' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia))
                         ELSE DATEDIFF(dd,
                             (SELECT        CONVERT(date, MAX(l.Fecha))
                               FROM            LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                               WHERE        l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'RC' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia),
                             (SELECT        CONVERT(date, MAX(l.Fecha))
                               FROM            LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                               WHERE        l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'AP' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia))
                         END ELSE NULL END AS tdias3,
                             (SELECT        CONVERT(date, MAX(Fecha_Aprobacion)) AS Expr1
                               FROM            dbo.Observacion_Tramite_Sistemas AS l
                               WHERE        (idTramite = tr.idTramite)) AS fecha_aprobacion_sistemas, DATEDIFF(dd,
                             (SELECT        CONVERT(date, MAX(l.Fecha)) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                         dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                               WHERE        (l.Operacion = 'AP') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)),
                             (SELECT        CONVERT(date, MAX(Fecha_Aprobacion)) AS Expr1
                               FROM            dbo.Observacion_Tramite_Sistemas AS l
                               WHERE        (idTramite = tr.idTramite))) AS tdias4,
                             (SELECT        CONVERT(date, MAX(Fecha_Archivado)) AS Expr1
                               FROM            dbo.tObservacionTramite_Archivo AS l
                               WHERE        (idTramite = tr.idTramite)) AS fecha_archivado, DATEDIFF(dd,
                             (SELECT        CONVERT(date, MAX(Fecha_Aprobacion)) AS Expr1
                               FROM            dbo.Observacion_Tramite_Sistemas AS l
                               WHERE        (idTramite = tr.idTramite)),
                             (SELECT        CONVERT(date, MAX(Fecha_Archivado)) AS Expr1
                               FROM            dbo.tObservacionTramite_Archivo AS l
                               WHERE        (idTramite = tr.idTramite))) AS tdias5, CASE WHEN tr.Estado_Tramite = 'AJ' THEN CASE WHEN
                             (SELECT DISTINCT 1
                               FROM            LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                               WHERE        l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'AP' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia)
                         = 1 THEN 'APROBADO SOLO SUJETO OBLIGADO ÁREA JURÍDICA' ELSE 'TRAMITE PENDIENTE' END ELSE CASE WHEN tr.Estado_Tramite = 'AP' THEN 'APROBADO ÁREA JURÍDICA'
                          ELSE CASE WHEN tr.Estado_tramite = 'AR' THEN 'APROBADO ÁREA SISTEMAS' ELSE CASE WHEN TR.Estado_tramite = 'AH' THEN 'TRÁMITE ARCHIVADO' ELSE CASE
                          WHEN tr.Estado_Tramite = 'OB' THEN 'TRÁMITE OBSERVADO' ELSE 'TRÁMITE TERMINADO' END END END END END AS ESTADO_TRAMITE
FROM            dbo.tTramite AS tr INNER JOIN
                         dbo.tEntidad AS e ON tr.idEntidad = e.idEntidad INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI')

and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
--where idtramite in (1362,9994)

where idfuncionario is not null
--and estado='TE'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
--where idtramite in (1362,9994)

where idfuncionario is  null
--and estado='TE'
group by idEntidad)))</CODE>
</VIEW>
<VIEW>
<NAME>view_documentos_observados_AC</NAME>
<ID>118</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT        r.idRegistro_Requisito, p.DESCRIPCION, r.nro_documento, r.fecha_documento, r.imagen, r.idEntidad, r.idFuncionario, l.Observacion AS observaciones,
                         r.idTramite
FROM            dbo.REGISTRO_REQUISITO AS r , dbo.PARAM_REQUISITOS_SO AS p ,LOG_REGISTRO_REQUISITO l
WHERE        (r.ESTADO = 'OB') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tFuncionario AS f
                               WHERE        (f.idFuncionario = r.idFuncionario) AND (f.TIPO_FUNCIONARIO = 'AC'))
							   and r.idParam = p.idParam
and r.idRegistro_Requisito=l.idRegistro_Requisito
and l.Operacion='OB'
and l.idLogRegistro_Requisito=(select max(l1.idLogRegistro_Requisito) from LOG_REGISTRO_REQUISITO l1 where r.idRegistro_Requisito=l1.idRegistro_Requisito and l1.Operacion='OB')</CODE>
</VIEW>
<VIEW>
<NAME>view_listar_tiempos_registroANTERIORJP</NAME>
<ID>119</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT tr.idTramite_Secuencia, tr.idTramite, tr.Secuencia, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, CASE WHEN
                          (SELECT     MAX(idParam)
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = tr.idTramite AND rr1.Secuencia = tr.Secuencia) = 9 THEN CASE WHEN
                          (SELECT     rr1.idParam
                            FROM          REGISTRO_REQUISITO rr1
                            WHERE      rr1.idTramite = tr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = tr.Secuencia))
                      = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                          (SELECT DISTINCT (1)
                            FROM          REGISTRO_REQUISITO rr1, tFuncionario t1
                            WHERE      rr1.idTramite = tr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = tr.Secuencia))
                      = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          (SELECT     CONVERT(date, MAX(fecha_registro)) AS Expr1
                            FROM          dbo.REGISTRO_REQUISITO AS rr
                            WHERE      (idTramite = tr.idTramite) AND (Secuencia = tr.Secuencia)) AS fecha_registro,
                          (SELECT     CONVERT(date, MAX(l.Fecha)) AS Expr1
                            FROM          dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                   dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                            WHERE      (l.Operacion = 'RC') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)) AS fecha_recepcion, DATEDIFF(dd,
                          (SELECT     CONVERT(date, MAX(fecha_registro)) AS Expr1
                            FROM          dbo.REGISTRO_REQUISITO AS rr
                            WHERE      (idTramite = tr.idTramite) AND (Secuencia = tr.Secuencia)),
                          (SELECT     CONVERT(date, MAX(l.Fecha)) AS Expr1
                            FROM          dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                   dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                            WHERE      (l.Operacion = 'RC') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia))) AS tdias1,
                          (SELECT     CONVERT(date, MAX(l.Fecha)) AS Expr1
                            FROM          dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                   dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                            WHERE      (l.Operacion = 'OB') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)) AS fecha_ultimaObservacion,
                          (SELECT     CONVERT(date, MAX(l.Fecha)) AS Expr1
                            FROM          dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                   dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                            WHERE      (l.Operacion = 'CR') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)) AS fecha_ultimaCorreccion, DATEDIFF(dd,
                          (SELECT     CONVERT(date, MAX(l.Fecha)) AS Expr1
                            FROM          dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                   dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                            WHERE      (l.Operacion = 'OB') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)),
                          (SELECT     CONVERT(date, MAX(l.Fecha)) AS Expr1
                            FROM          dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                   dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                            WHERE      (l.Operacion = 'CR') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia))) AS tdias2,
                          (SELECT     CONVERT(date, MAX(l.Fecha)) AS Expr1
                            FROM          dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                   dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                            WHERE      (l.Operacion = 'AP') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)) AS fecha_aprobacion_legal, CASE WHEN
                          (SELECT     CONVERT(date, MAX(l.Fecha))
                            FROM          LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                            WHERE      l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'AP' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia)
                      != '' THEN CASE WHEN
                          (SELECT     CONVERT(date, MAX(l.Fecha))
                            FROM          LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                            WHERE      l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'CR' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia)
                      != '' THEN DATEDIFF(dd,
                          (SELECT     CONVERT(date, MAX(l.Fecha))
                            FROM          LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                            WHERE      l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'CR' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia),
                          (SELECT     CONVERT(date, MAX(l.Fecha))
                            FROM          LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                            WHERE      l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'AP' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia))
                      ELSE DATEDIFF(dd,
                          (SELECT     CONVERT(date, MAX(l.Fecha))
                            FROM          LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                            WHERE      l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'RC' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia),
                          (SELECT     CONVERT(date, MAX(l.Fecha))
                            FROM          LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                            WHERE      l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'AP' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia)) END ELSE NULL
                       END AS tdias3,
                          (SELECT     CONVERT(date, MAX(Fecha_Aprobacion)) AS Expr1
                            FROM          dbo.Observacion_Tramite_Sistemas AS l
                            WHERE      (idTramite = tr.idTramite)) AS fecha_aprobacion_sistemas, DATEDIFF(dd,
                          (SELECT     CONVERT(date, MAX(l.Fecha)) AS Expr1
                            FROM          dbo.LOG_REGISTRO_REQUISITO AS l INNER JOIN
                                                   dbo.REGISTRO_REQUISITO AS rr ON l.idRegistro_Requisito = rr.idRegistro_Requisito
                            WHERE      (l.Operacion = 'AP') AND (rr.idTramite = tr.idTramite) AND (rr.Secuencia = tr.Secuencia)),
                          (SELECT     CONVERT(date, MAX(Fecha_Aprobacion)) AS Expr1
                            FROM          dbo.Observacion_Tramite_Sistemas AS l
            WHERE      (idTramite = tr.idTramite))) AS tdias4,
                          (SELECT     CONVERT(date, MAX(Fecha_Archivado)) AS Expr1
                            FROM          dbo.tObservacionTramite_Archivo AS l
                            WHERE      (idTramite = tr.idTramite)) AS fecha_archivado, DATEDIFF(dd,
                          (SELECT     CONVERT(date, MAX(Fecha_Aprobacion)) AS Expr1
                            FROM          dbo.Observacion_Tramite_Sistemas AS l
                            WHERE      (idTramite = tr.idTramite)),
                          (SELECT     CONVERT(date, MAX(Fecha_Archivado)) AS Expr1
                            FROM          dbo.tObservacionTramite_Archivo AS l
                            WHERE      (idTramite = tr.idTramite))) AS tdias5, CASE WHEN tr.Estado_Tramite = 'AJ' THEN CASE WHEN
                          (SELECT DISTINCT 1
                            FROM          LOG_REGISTRO_REQUISITO l, REGISTRO_REQUISITO rr
                            WHERE      l.idRegistro_Requisito = rr.idRegistro_Requisito AND l.Operacion = 'AP' AND rr.idTramite = tr.idTramite AND rr.Secuencia = tr.Secuencia)
                      = 1 THEN 'APROBADO SOLO SUJETO OBLIGADO ÁREA JURÍDICA' ELSE 'TRAMITE PENDIENTE' END ELSE CASE WHEN tr.Estado_Tramite = 'AP' THEN 'APROBADO ÁREA JURÍDICA'
                       ELSE CASE WHEN tr.Estado_tramite = 'AR' THEN 'APROBADO ÁREA SISTEMAS' ELSE CASE WHEN TR.Estado_tramite = 'AH' THEN 'TRÁMITE ARCHIVADO' ELSE CASE
                       WHEN tr.Estado_Tramite = 'OB' THEN 'TRÁMITE OBSERVADO' ELSE 'TRÁMITE TERMINADO' END END END END END AS ESTADO_TRAMITE
FROM         dbo.tTramite AS tr INNER JOIN
                      dbo.tEntidad AS e ON tr.idEntidad = e.idEntidad INNER JOIN
                      dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica
WHERE     (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI')</CODE>
</VIEW>
<VIEW>
<NAME>view_documentos_observados_FR</NAME>
<ID>120</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT        r.idRegistro_Requisito, p.DESCRIPCION, r.nro_documento, r.fecha_documento, r.imagen, r.idEntidad, r.idFuncionario, l.Observacion AS observaciones,
                         r.idTramite
FROM            dbo.REGISTRO_REQUISITO AS r , dbo.PARAM_REQUISITOS_SO AS p ,LOG_REGISTRO_REQUISITO l
WHERE        (r.ESTADO = 'OB') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tFuncionario AS f
                               WHERE        (f.idFuncionario = r.idFuncionario) AND (f.TIPO_FUNCIONARIO = 'FR'))
							   and r.idParam = p.idParam
and r.idRegistro_Requisito=l.idRegistro_Requisito
and l.Operacion='OB'
and l.idLogRegistro_Requisito=(select max(l1.idLogRegistro_Requisito) from LOG_REGISTRO_REQUISITO l1 where r.idRegistro_Requisito=l1.idRegistro_Requisito and l1.Operacion='OB')</CODE>
</VIEW>
<VIEW>
<NAME>view_documentos_observados_SO</NAME>
<ID>121</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
select
r.idRegistro_Requisito, p.DESCRIPCION, r.nro_documento, r.fecha_documento, r.imagen, r.idEntidad, r.idFuncionario, p.COD_PARAM, l.Observacion AS observaciones,
                         r.idTramite from
REGISTRO_REQUISITO r, PARAM_REQUISITOS_SO p,LOG_REGISTRO_REQUISITO l
where r.idParam = p.idParam
and  (r.ESTADO = 'OB') AND (p.COD_PARAM = 'SO')
and r.idRegistro_Requisito=l.idRegistro_Requisito
and l.Operacion='OB'
and l.idLogRegistro_Requisito=(select max(l1.idLogRegistro_Requisito) from LOG_REGISTRO_REQUISITO l1 where r.idRegistro_Requisito=l1.idRegistro_Requisito and l1.Operacion='OB')</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivados_ConNombresANTERIOR</NAME>
<ID>122</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT        fun.idFuncionario, tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO,
                         e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO,
                         e.OBSERVACIONES, e.CODIGO_VERIFICADOR, rr.fecha_registro, e.nusuario, 'APROBADO' AS ESTADO, '' AS Detalle, tta.Observacion,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN CASE WHEN TC.idTramite_Secuencia IS NULL
                         THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END ELSE CASE WHEN TC.idTramite_Secuencia IS NULL
                         THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO' ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO' END END END ELSE CASE WHEN
                             (SELECT        COUNT(te.idEntidad)
                               FROM            tEntidad AS te
                               WHERE        te.idEntidad IN
                                                             (SELECT        teh.idEntidad
                                                               FROM            tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad)
                         &gt; 0 THEN 'RENOVACION DE SUJETO OBLIGADO' ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE, tta.Fecha_Archivado,
                         fun.PN_NOMBRE + ' ' + fun.PN_PATERNO + ' ' + fun.PN_MATERNO AS nombre_funcionario, tta.Observacion AS nro_sicod
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad LEFT OUTER JOIN
                         dbo.tFuncionario AS fun ON rr.idFuncionario = fun.idFuncionario INNER JOIN
                         dbo.tObservacionTramite_Archivo AS tta ON rr.idTramite = tta.idTramite INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad AND tta.Secuencia = tr.Secuencia AND tr.idTramite = tta.idTramite AND rr.Secuencia = tr.Secuencia LEFT OUTER JOIN
                         dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'TE') AND (rr.idRegistro_Requisito =
                             (SELECT        MIN(idRegistro_Requisito) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr1
                               WHERE        (idEntidad = rr.idEntidad) AND (idTramite = rr.idTramite) AND (ESTADO = 'TE') AND (Secuencia = rr.Secuencia))) AND (tr.idTramite IN
                             (SELECT        MAX(idTramite) AS idtrammite
                               FROM            dbo.REGISTRO_REQUISITO
                               WHERE        (idFuncionario IS NOT NULL)
							  -- AND (ESTADO = 'TE'
							   --)
                               GROUP BY idFuncionario) OR
                         tr.idTramite IN
                             (SELECT        MAX(idTramite) AS idtrammite
                               FROM            dbo.REGISTRO_REQUISITO
                               WHERE        (idFuncionario IS NULL)
							  -- AND (ESTADO = 'TE'
							  -- )
                               GROUP BY idEntidad))

							and rr.ESTADO='TE'</CODE>
</VIEW>
<VIEW>
<NAME>view_entidad_all</NAME>
<ID>123</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT        e.idEntidad, e.SUJETO_OBLIGADO, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.TIPO_EMPRESA, e.NIT, e.CODIGO_VERIFICADOR, e.NOMBRE_REPRESENTANTE,
                         e.OFCEN_DEPARTAMENTO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.CORREO_ELECTRONICO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica
WHERE        (e.ESTADO_IMPRESION = 'SI') AND (e.ESTADO is null)</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivados_ConNombresANTERIORJP</NAME>
<ID>124</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
SELECT        tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE,
                         c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
                         rr.fecha_registro, e.nusuario, 'APROBADO' AS ESTADO, '' AS Detalle, tta.Observacion,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          tta.Fecha_Archivado,(fun.PN_NOMBRE+ ' '+fun.PN_PATERNO+' '+fun.PN_MATERNO) as nombre_funcionario,tta.Observacion nro_sicod
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad left outer JOIN
						 dbo.tFuncionario as fun on rr.idFuncionario=fun.idFuncionario inner join
                         dbo.tObservacionTramite_Archivo AS tta ON rr.idTramite = tta.idTramite INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad AND tta.Secuencia = tr.Secuencia AND tr.idTramite = tta.idTramite AND rr.Secuencia = tr.Secuencia
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'TE') AND (rr.idRegistro_Requisito =
                             (SELECT        MIN(idRegistro_Requisito) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr1
                               WHERE        (idEntidad = rr.idEntidad) AND (idTramite = rr.idTramite) AND (ESTADO = 'TE') AND (Secuencia = rr.Secuencia)))</CODE>
</VIEW>
<VIEW>
<NAME>view_entidad_detallado</NAME>
<ID>125</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        e.idEntidad, e.SUJETO_OBLIGADO, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.TIPO_EMPRESA, e.NIT, e.CODIGO_VERIFICADOR, e.NOMBRE_REPRESENTANTE,
                         e.OFCEN_DEPARTAMENTO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.CORREO_ELECTRONICO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica
WHERE        (e.ESTADO_IMPRESION = 'SI') AND (e.ESTADO = 'AC')</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivados_observados_ConNombresANTERIOR</NAME>
<ID>126</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as

SELECT        tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE,
                         c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
                         rr.fecha_registro, e.nusuario, 'APROBADO' AS ESTADO, '' AS Detalle, tta.Observacion,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1

						THEN CASE WHEN TC.idTramite_Secuencia IS NULL
                         THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'RENOVACION FUNCIONARIO RESPONSABLE' END ELSE CASE WHEN TC.idTramite_Secuencia IS NULL
                         THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO' ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO' END END END ELSE CASE WHEN
                             (SELECT        COUNT(te.idEntidad)
                               FROM            tEntidad AS te
                               WHERE        te.idEntidad IN
                                                             (SELECT        teh.idEntidad
                                                               FROM            tEntidadHistRenovados AS teh) AND te.idEntidad = e.idEntidad)
                         &gt; 0 THEN 'RENOVACION DE SUJETO OBLIGADO' ELSE 'REGISTRO DE SUJETO OBLIGADO' END END AS TIPO_TRAMITE,
                          tta.Fecha_Archivado,(fun.PN_NOMBRE+ ' '+fun.PN_PATERNO+' '+fun.PN_MATERNO) as nombre_funcionario,tta.Observacion nro_sicod
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad left outer JOIN
						 dbo.tFuncionario as fun on rr.idFuncionario=fun.idFuncionario inner join
                         dbo.tObservacionTramite_Archivo AS tta ON rr.idTramite = tta.idTramite INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad AND tta.Secuencia = tr.Secuencia AND tr.idTramite = tta.idTramite AND rr.Secuencia = tr.Secuencia

						 LEFT OUTER JOIN
                         dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'TE') AND (rr.idRegistro_Requisito =
                             (SELECT        MIN(idRegistro_Requisito) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr1
                               WHERE        (idEntidad = rr.idEntidad) AND (idTramite = rr.idTramite) AND (ESTADO = 'TE') AND (Secuencia = rr.Secuencia))) AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS lrr1
                               WHERE        (idRegistro_Requisito = rr.idRegistro_Requisito) AND (Operacion = 'OB'))
							   AND (tr.idTramite IN
                             (SELECT        MAX(idTramite) AS idtrammite
                               FROM            dbo.REGISTRO_REQUISITO
                               WHERE        (idFuncionario IS NOT NULL)
							  -- AND (ESTADO = 'TE'
							   --)
                               GROUP BY idFuncionario) OR
                         tr.idTramite IN
                             (SELECT        MAX(idTramite) AS idtrammite
                               FROM            dbo.REGISTRO_REQUISITO
                               WHERE        (idFuncionario IS NULL)
							  -- AND (ESTADO = 'TE'
							  -- )
                               GROUP BY idEntidad))

							and rr.ESTADO='TE'</CODE>
</VIEW>
<VIEW>
<NAME>view_entidad_detallado_baja</NAME>
<ID>127</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT        e.idEntidad, e.SUJETO_OBLIGADO, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.TIPO_EMPRESA, e.NIT, e.CODIGO_VERIFICADOR, e.NOMBRE_REPRESENTANTE,
                         e.OFCEN_DEPARTAMENTO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.CORREO_ELECTRONICO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica
WHERE        (e.ESTADO_IMPRESION = 'SI') AND (e.ESTADO = 'BA')</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivados_observados_ConNombresANTERIORJP</NAME>
<ID>128</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
SELECT        tr.idTramite_Secuencia, rr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE,
                         c.Descripcion AS CIUDAD, e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR,
                         rr.fecha_registro, e.nusuario, 'APROBADO' AS ESTADO, '' AS Detalle, tta.Observacion,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                          tta.Fecha_Archivado,(fun.PN_NOMBRE+ ' '+fun.PN_PATERNO+' '+fun.PN_MATERNO) as nombre_funcionario,tta.Observacion nro_sicod
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON e.idEntidad = rr.idEntidad left outer JOIN
						 dbo.tFuncionario as fun on rr.idFuncionario=fun.idFuncionario inner join
                         dbo.tObservacionTramite_Archivo AS tta ON rr.idTramite = tta.idTramite INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad AND tta.Secuencia = tr.Secuencia AND tr.idTramite = tta.idTramite AND rr.Secuencia = tr.Secuencia
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (rr.ESTADO = 'TE') AND (rr.idRegistro_Requisito =
                             (SELECT        MIN(idRegistro_Requisito) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO AS rr1
                               WHERE        (idEntidad = rr.idEntidad) AND (idTramite = rr.idTramite) AND (ESTADO = 'TE') AND (Secuencia = rr.Secuencia))) AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS lrr1
                               WHERE        (idRegistro_Requisito = rr.idRegistro_Requisito) AND (Operacion = 'OB'))</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_procesados_archivoANTERIOR</NAME>
<ID>129</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>--view_tramites_procesados_archivo

create view %viewname%
as
SELECT DISTINCT
                         tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'NO PROCESADO' estado,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1
						-- THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO'

						  THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END

						  END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario

from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite
LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia

--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI'
AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							   --AND e.idActividadEconomica = ae.idActividadEconomica
							   AND TR.Estado_DU = 'U'
							   AND tr.Estado_Tramite = 'AR'
							  -- AND tr.idTramite = rr.idTramite

							  and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
--and estado='AR'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
--and estado='AR'
group by idEntidad)))

and rr.estado='AR'
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO,
                         e.NIT, ae.nombre, 'NO PROCESADO' estado, CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1
						-- THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO'

						  THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END

						 END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite
LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							  -- AND e.idActividadEconomica = ae.idActividadEconomica
							   AND TR.Estado_DU = 'D'
							   AND tr.Estado_Tramite = 'AR'
							   --AND  tr.idTramite = rr.idTramite
						 AND tr.Secuencia = rr.Secuencia

						 and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
--and estado='AR'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
--and estado='AR'
group by idEntidad)))

and rr.estado='AR'
UNION
SELECT DISTINCT tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite,
                             (SELECT        max(Fecha_Archivado)
                               FROM            tObservacionTramite_Archivo ota
                               WHERE        ota.idTramite = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'ARCHIVADO' estado, CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1
						-- THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO'

						  THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END

						 END AS TIPO_TRAMITE,
                          ' ' AS usuario
from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite
LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
 --AND e.idEntidad = tr.idEntidad
 AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							  -- AND e.idActividadEconomica = ae.idActividadEconomica
							   AND TR.Estado_DU = 'U'
							   AND tr.Estado_Tramite = 'TE'
							   --AND tr.idTramite = rr.idTramite
							   and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
--and estado='TE'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
--and estado='TE'
group by idEntidad)))
and rr.estado='TE'
UNION
SELECT DISTINCT tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite,
                             (SELECT        max(Fecha_Archivado)
                               FROM            tObservacionTramite_Archivo ota
                               WHERE        ota.idTramite = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'ARCHIVADO' estado, CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1
						 --THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO'

						 THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END
						 END AS TIPO_TRAMITE,
                          ' ' AS usuario
from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite
LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							  -- AND e.idActividadEconomica = ae.idActividadEconomica
							   AND TR.Estado_DU = 'D'
							   AND tr.Estado_Tramite = 'TE'
							   --AND tr.idTramite = rr.idTramite
							   AND tr.Secuencia = rr.Secuencia

							   and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
--and estado='TE'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
--and estado='TE'
group by idEntidad)))

and rr.estado='TE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite
LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
--FROM          tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							   --AND e.idActividadEconomica = ae.idActividadEconomica
							   AND tr.Estado_Tramite = 'AR'
							   --AND tr.idTramite = c.idTramite

and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
--and estado='TE'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
--and estado='TE'
group by idEntidad)))

and rr.estado='AR'

UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'ARCHIVADO' estado,
                         'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, 'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, BF.fecha_archivado fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'ARCHIVADO' estado, 'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, 'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, BF.fecha_archivado fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'ARCHIVADO' estado, 'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'</CODE>
</VIEW>
<VIEW>
<NAME>view_listar_AC_tramite</NAME>
<ID>130</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as

SELECT DISTINCT
                         f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE,
						 f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                         P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO,
						  f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                         f.OBSERVACIONES, f.idEntidad, tr.idTramite, f.Observacion_subsanada,
						 (CASE WHEN EXISTS
                             (SELECT        *
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idFuncionario = rr.idFuncionario AND rr1.ESTADO = 'OB')
							   THEN 'OBSERVADO'
							   WHEN EXISTS
                             (SELECT        *
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idFuncionario = rr.idFuncionario AND rr1.ESTADO = 'AP')
							   THEN 'APROBADO' ELSE 'PENDIENTE' END) AS ESTADO
FROM            dbo.tFuncionario AS f INNER JOIN
                         dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                         dbo.tPais AS P ON f.idPais = P.idPais INNER JOIN
                         dbo.tTramite AS tr ON f.idEntidad = tr.idEntidad INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON tr.idTramite = rr.idTramite
						 AND f.idFuncionario = rr.idFuncionario INNER JOIN
                         dbo.tEstado AS est ON rr.ESTADO = est.Estado_Tramite
                         LEFT JOIN tTramiteClasificacion tc on tr.idTramite_Secuencia = tc.idTramite_Secuencia
WHERE        (f.TIPO_FUNCIONARIO = 'AC')

AND (rr.idRegistro_Requisito =
                             (SELECT        MIN(idRegistro_Requisito) AS Expr1
                               FROM            dbo.REGISTRO_REQUISITO
                               WHERE        (idFuncionario = rr.idFuncionario and idTramite = tr.idTramite )))
AND (tr.Estado_Tramite &lt;&gt; 'AP') AND EXISTS
   (SELECT        1 AS Expr1
    FROM            dbo.REGISTRO_REQUISITO AS rr
    WHERE        (idTramite = tr.idTramite) AND (idFuncionario = f.idFuncionario))

--and tr.idTramite=2532</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_procesados_archivoANTERIORJP</NAME>
<ID>131</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT DISTINCT
                         tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, null fecha_aprobacion , e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'NO PROCESADO' estado,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AR' AND
                         tr.idTramite = rr.idTramite
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, null fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT,
                         ae.nombre, 'NO PROCESADO' estado,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'AR' AND
                         tr.idTramite = rr.idTramite and tr.Secuencia=rr.Secuencia
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, (select max(Fecha_Archivado) from tObservacionTramite_Archivo ota where ota.idTramite=tr.idTramite) as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'ARCHIVADO' estado,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'TE' AND
                         tr.idTramite = rr.idTramite
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, (select max(Fecha_Archivado) from tObservacionTramite_Archivo ota where ota.idTramite=tr.idTramite) as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT,
                         ae.nombre, 'ARCHIVADO' estado,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE, ' ' AS usuario
FROM tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'TE' AND
                         tr.idTramite = rr.idTramite and tr.Secuencia=rr.Secuencia
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'ARCHIVADO' estado, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, 'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, BF.fecha_archivado fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'ARCHIVADO' estado, 'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, 'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, BF.fecha_archivado fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'ARCHIVADO' estado, 'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'</CODE>
</VIEW>
<VIEW>
<NAME>view_listar_observados_AC</NAME>
<ID>132</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        en.idFuncionario, en.idEntidad, rr.idTramite, en.PN_NOMBRE + ' ' + en.PN_PATERNO + ' ' + en.PN_MATERNO AS nombre, prs.DESCRIPCION,
                         lrr.Observacion AS observaciones
FROM            dbo.REGISTRO_REQUISITO AS rr INNER JOIN
                         dbo.tFuncionario AS en ON rr.idEntidad = en.idEntidad AND rr.idFuncionario = en.idFuncionario INNER JOIN
                         dbo.PARAM_REQUISITOS_SO AS prs ON rr.idParam = prs.idParam INNER JOIN
                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr.idRegistro_Requisito = lrr.idRegistro_Requisito
WHERE        (rr.ESTADO = 'OB') AND (en.TIPO_FUNCIONARIO = 'AC') AND (rr.idParam &gt;= 7) AND (lrr.Operacion = 'OB') AND (lrr.idLogRegistro_Requisito =
                             (SELECT        MAX(idLogRegistro_Requisito) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS lrr1
                               WHERE        (idRegistro_Requisito = lrr.idRegistro_Requisito) AND (Operacion = 'OB')))</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_procesados_arealegalANTERIOR</NAME>
<ID>133</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>-- select * FROM view_tramites_procesados_arealegal --- Reporte de Tramites Procesados por el Area Legal
--drop view view_tramites_procesados_arealegal
create view %viewname%
as
SELECT DISTINCT
tr.idTramite_Secuencia,
CONVERT(nvarchar, tr.idTramite) nro_tramite,
NULL AS fecha_aprobacion,
e.SUJETO_OBLIGADO,
e.NIT, ae.nombre,
'NO PROCESADO' estado,
 (SELECT DISTINCT lrr.nusuario
  FROM dbo.REGISTRO_REQUISITO AS rr1
  INNER JOIN dbo.LOG_REGISTRO_REQUISITO AS lrr
  ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
  WHERE        (rr1.idTramite = rr.idTramite)
  AND (rr1.Secuencia = rr.Secuencia)
  AND (lrr.Operacion = 'OB')) AS usuariolegal,
  tr.Observacion_subsanada,
  CASE WHEN (SELECT MAX(idParam)
             FROM  REGISTRO_REQUISITO rr1
             WHERE  rr1.idTramite = rr.idTramite
			 AND (rr1.Secuencia = rr.Secuencia)) = 9
			 THEN
			      CASE WHEN
                       (SELECT rr1.idParam
                        FROM REGISTRO_REQUISITO rr1
                        WHERE rr1.idTramite = rr.idTramite
						AND rr1.idParam = 5
						AND (rr1.Secuencia = rr.Secuencia)) = 5
						THEN 'REGISTRO DE SUJETO OBLIGADO Y FR'
						ELSE
						         CASE WHEN (SELECT DISTINCT (1)
                                   FROM REGISTRO_REQUISITO rr1, tFuncionario t1
                                   WHERE rr1.idTramite = rr.idTramite
								   AND rr1.idFuncionario = t1.idFuncionario
								   AND t1.TIPO_FUNCIONARIO = 'FR'
								   AND (rr1.Secuencia = rr.Secuencia)) = 1
								  THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END
	END AS TIPO_TRAMITE,
            (SELECT (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno) AS usuario
              FROM  Users u
               WHERE u.usuarioRol = 'legal'
			   AND estado = 'AC'
			   AND EXISTS (SELECT DISTINCT lrr.nusuario
                           FROM  dbo.REGISTRO_REQUISITO AS rr1
						   INNER JOIN dbo.LOG_REGISTRO_REQUISITO AS lrr
						   ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                            WHERE (rr1.idTramite = rr.idTramite)
							AND (lrr.Operacion= 'OB'))) AS usuario
--FROM   tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia

WHERE e.ESTADO_IMPRESION = 'SI'
AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS (SELECT  1
            FROM  tObservacionMesa_Entrada te
            WHERE  te.idTramite = tr.idTramite)
			--AND e.idActividadEconomica = ae.idActividadEconomica
			AND TR.Estado_DU = 'U'
			AND tr.Estado_Tramite = 'AJ'
			AND NOT EXISTS (SELECT  1
                            FROM  REGISTRO_REQUISITO rr
                            WHERE rr.idTramite = tr.idTramite
							AND rr.ESTADO IN ('OB'))
						--	AND tr.idTramite = rr.idTramite
and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='AJ'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='AJ'
group by idEntidad)))

UNION
SELECT DISTINCT tr.idTramite_Secuencia,
(CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite,
NULL AS fecha_aprobacion,
e.SUJETO_OBLIGADO,
e.NIT,
ae.nombre,
'NO PROCESADO' estado,
(SELECT DISTINCT lrr.nusuario
FROM dbo.REGISTRO_REQUISITO AS rr1
INNER JOIN dbo.LOG_REGISTRO_REQUISITO AS lrr
ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
WHERE (rr1.idTramite = rr.idTramite)
AND (rr1.Secuencia = rr.Secuencia)
AND (lrr.Operacion = 'OB')) AS usuariolegal,
tr.Observacion_subsanada,
CASE WHEN
  (SELECT   MAX(idParam)
   FROM   REGISTRO_REQUISITO rr1
   WHERE rr1.idTramite = rr.idTramite
   AND (rr1.Secuencia = rr.Secuencia)) = 9
   THEN
       CASE WHEN
             (SELECT rr1.idParam
              FROM  REGISTRO_REQUISITO rr1
               WHERE  rr1.idTramite = rr.idTramite AND rr1.idParam = 5
			           AND (rr1.Secuencia = rr.Secuencia)) = 5
		    THEN 'REGISTRO DE SUJETO OBLIGADO Y FR'
			ELSE
			    CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1
					/*THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
					 ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO'
				END
		END
	ELSE 'REGISTRO SUJETO OBLIGADO' */

	THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
      ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END


END AS TIPO_TRAMITE,
      (SELECT (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
        FROM   Users u
        WHERE  u.usuarioRol = 'legal'
		AND estado = 'AC'
		AND EXISTS (SELECT DISTINCT lrr.nusuario
                    FROM dbo.REGISTRO_REQUISITO AS rr1
					INNER JOIN dbo.LOG_REGISTRO_REQUISITO AS lrr
					ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                    WHERE  (rr1.idTramite = rr.idTramite) AND (lrr.Operacion = 'OB'))) AS usuario
from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
--FROM    tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI'
AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS (SELECT  1
            FROM  tObservacionMesa_Entrada te
            WHERE te.idTramite = tr.idTramite)
			--AND e.idActividadEconomica = ae.idActividadEconomica
			AND TR.Estado_DU = 'D'
			AND tr.Estado_Tramite = 'OB'
			AND NOT EXISTS
            (SELECT  1
             FROM REGISTRO_REQUISITO rr
             WHere rr.idTramite = tr.idTramite
			 AND rr.ESTADO IN ('OB'))
			 --AND tr.idTramite = rr.idTramite
			 AND tr.Secuencia = rr.Secuencia

and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='OB'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='OB'
group by idEntidad)))



UNION
SELECT DISTINCT tr.idTramite_Secuencia,
CONVERT(nvarchar, tr.idTramite) nro_tramite,
 (SELECT        max(CONVERT(date, o.fecha))
   FROM            LOG_REGISTRO_REQUISITO o
   WHERE        o.idRegistro_Requisito = rr.idRegistro_Requisito AND Operacion = 'AP') AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
'PROCESADO' estado,
 (SELECT DISTINCT lrr.nusuario
   FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                             dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
   WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
    CASE WHEN
         (SELECT        MAX(idParam)
           FROM            REGISTRO_REQUISITO rr1
           WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9
		 THEN CASE WHEN
                  (SELECT        rr1.idParam
                    FROM            REGISTRO_REQUISITO rr1
                    WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))  = 5
		       THEN 'REGISTRO DE SUJETO OBLIGADO Y FR'
			   ELSE
			       CASE WHEN
                        (SELECT DISTINCT (1)
                          FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                          WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia)) = 1
			        /*THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
					ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO'
					END
				END
		  ELSE 'REGISTRO SUJETO OBLIGADO' */
		  THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END
	END AS TIPO_TRAMITE,
(SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
FROM            Users u
WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario

from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia


--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI'
AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS (SELECT  1
           FROM   tObservacionMesa_Entrada te
            WHERE   te.idTramite = tr.idTramite)
			--AND e.idActividadEconomica = ae.idActividadEconomica
			AND TR.Estado_DU = 'U'
			AND tr.Estado_Tramite = 'AP'
			--AND  tr.idTramite = rr.idTramite

			and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='AP'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='AP'
group by idEntidad)))

UNION
SELECT DISTINCT tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite,
(SELECT        max(CONVERT(date, o.fecha))
  FROM            LOG_REGISTRO_REQUISITO o
  WHERE        o.idRegistro_Requisito = rr.idRegistro_Requisito AND Operacion = 'AP') AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
'PROCESADO' estado,
    (SELECT DISTINCT lrr.nusuario
      FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
      WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
  CASE WHEN
      (SELECT        MAX(idParam)
        FROM            REGISTRO_REQUISITO rr1
        WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9
	THEN
	   CASE WHEN
         (SELECT        rr1.idParam
           FROM            REGISTRO_REQUISITO rr1
          WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))  = 5
	   THEN 'REGISTRO DE SUJETO OBLIGADO Y FR'
	   ELSE
	      CASE WHEN
            (SELECT DISTINCT (1)
             FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
             WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))  = 1
		 /* THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
		  ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO'
		  END
		END
    ELSE 'REGISTRO SUJETO OBLIGADO' */
	THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END
END AS TIPO_TRAMITE,
       (SELECT  (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
        FROM    Users u
        WHERE  u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario

from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
--FROM    tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE   e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
          (SELECT        1
            FROM            tObservacionMesa_Entrada te
            WHERE        te.idTramite = tr.idTramite)
			--AND e.idActividadEconomica = ae.idActividadEconomica
			AND TR.Estado_DU = 'D'
			AND tr.Estado_Tramite = 'AP'
			--AND tr.idTramite = rr.idTramite
			AND tr.Secuencia = rr.Secuencia

and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='AP'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='AP'
group by idEntidad)))
UNION
SELECT DISTINCT tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite,
(SELECT        max(CONVERT(date, o.fecha))
  FROM            LOG_REGISTRO_REQUISITO o
  WHERE        o.idRegistro_Requisito = rr.idRegistro_Requisito AND Operacion = 'AP') AS fecha_aprobacion,
 e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
'PROCESADO' estado,
    (SELECT DISTINCT lrr.nusuario
      FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
      WHERE  (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal,
 tr.Observacion_subsanada,
   CASE WHEN
       (SELECT        MAX(idParam)
         FROM            REGISTRO_REQUISITO rr1
         WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9
   THEN
      CASE WHEN
       (SELECT        rr1.idParam
         FROM            REGISTRO_REQUISITO rr1
         WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))  = 5
	  THEN 'REGISTRO DE SUJETO OBLIGADO Y FR'
	  ELSE
	     CASE WHEN
       (SELECT DISTINCT (1)
         FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
         WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))  = 1
		/* THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO'
		 END
	   END
	ELSE 'REGISTRO SUJETO OBLIGADO' */
	THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END
	END AS TIPO_TRAMITE,
       (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
         FROM            Users u
         WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario

		 from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia

		-- FROM   tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE  e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad
AND EXISTS
           (SELECT        1
             FROM            tObservacionMesa_Entrada te
             WHERE        te.idTramite = tr.idTramite)
			-- AND e.idActividadEconomica = ae.idActividadEconomica
			 AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AR'
			 --AND
            -- tr.idTramite = rr.idTramite

			and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='AR'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='AR'
group by idEntidad)))
UNION
SELECT DISTINCT tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite,
                             (SELECT        max(CONVERT(date, o.fecha))
                               FROM            LOG_REGISTRO_REQUISITO o
                               WHERE        o.idRegistro_Requisito = rr.idRegistro_Requisito AND Operacion = 'AP') AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1
						/* THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
						 ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO'
						 END
						 END
						 ELSE 'REGISTRO SUJETO OBLIGADO' */

						 THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                              THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END

						 END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario

from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia

--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT  1
                               FROM   tObservacionMesa_Entrada te
                               WHERE  te.idTramite = tr.idTramite)
							  -- AND e.idActividadEconomica = ae.idActividadEconomica
							    AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'AR'
								-- AND
                        -- tr.idTramite = rr.idTramite
						 AND tr.Secuencia = rr.Secuencia
and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='AR'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='AR'
group by idEntidad)))

UNION
SELECT DISTINCT tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite,
                             (SELECT        max(CONVERT(date, o.fecha))
                               FROM            LOG_REGISTRO_REQUISITO o
                               WHERE        o.idRegistro_Requisito = rr.idRegistro_Requisito AND Operacion = 'AP') AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT   rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1
						/* THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
						 ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO'
						 END END ELSE 'REGISTRO SUJETO OBLIGADO' */
						 THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END

						 END AS TIPO_TRAMITE,
                          ' ' AS usuario

from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia

--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
 AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							 --  AND e.idActividadEconomica = ae.idActividadEconomica
							    AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'TE'
								--AND  tr.idTramite = rr.idTramite

and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='TE'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='TE'
group by idEntidad)))
UNION
SELECT DISTINCT tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite,
                             (SELECT        max(CONVERT(date, o.fecha))
                               FROM            LOG_REGISTRO_REQUISITO o
                               WHERE        o.idRegistro_Requisito = rr.idRegistro_Requisito AND Operacion = 'AP') AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado,
                             (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1
						 /*THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
						 ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO'
						 END
						 END
						 ELSE 'REGISTRO SUJETO OBLIGADO' */
						 THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END

						 END AS TIPO_TRAMITE,
             ' ' AS usuario

from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							   --AND e.idActividadEconomica = ae.idActividadEconomica
							   AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'TE'
							  -- AND tr.idTramite = rr.idTramite
						 AND tr.Secuencia = rr.Secuencia

and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='TE'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='TE'
group by idEntidad)))
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'legal' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AJ' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AP' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada, 'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'legal' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AJ' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite,
                             (SELECT        bf.fecha_aprobacion_juridica
                               FROM            tBajaFuncionario bf
                               WHERE        bf.idTramiteNuevo = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, '' AS usuarioLegal,
                         '' AS Observacion_subsanada, 'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT  tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite,
(SELECT        bf.fecha_aprobacion_juridica
FROM            tBajaFuncionario bf
WHERE        bf.idTramiteNuevo = tr.idTramite) AS fecha_aprobacion,
e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, '' AS usuarioLegal,
'' AS Observacion_subsanada,
'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite,
' ' AS usuario
FROM   tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE  e.ESTADO_IMPRESION = 'SI'
AND e.ESTADO = 'AC'
AND e.idEntidad = tr.idEntidad
AND EXISTS (SELECT  1
            FROM  tObservacionMesa_Entrada te
             WHERE te.idTramite = tr.idTramite)
			 AND e.idActividadEconomica = ae.idActividadEconomica
			 AND tr.Estado_Tramite = 'TE'
			 AND TR.idTramite = BF.idTramiteNuevo
			 AND bf.idLogTrans = lt.idLogTrans
			 AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT  tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
'NO PROCESADO' estado, '' AS usuarioLegal, '' AS Observacion_subsanada,
'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite,
(SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
 FROM            Users u
WHERE        u.usuarioRol = 'legal' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AJ' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'
UNION
SELECT tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite,
                             (SELECT        bf.fecha_aprobacion_juridica
                               FROM            tBajaFuncionario bf
                               WHERE        bf.idTramiteNuevo = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, '' AS usuarioLegal,
                         '' AS Observacion_subsanada, 'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM   tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE  e.ESTADO_IMPRESION = 'SI'
AND e.ESTADO = 'AC'
AND e.idEntidad = tr.idEntidad
AND EXISTS (SELECT  1
            FROM  tObservacionMesa_Entrada te
            WHERE te.idTramite = tr.idTramite)
			AND e.idActividadEconomica = ae.idActividadEconomica
			AND tr.Estado_Tramite = 'AR'
			AND TR.idTramite = BF.idTramiteNuevo
			AND bf.idLogTrans = lt.idLogTrans
			AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'
UNION
SELECT tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite,
(SELECT  bf.fecha_aprobacion_juridica
FROM    tBajaFuncionario bf
WHERE  bf.idTramiteNuevo = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, '' AS usuarioLegal,
'' AS Observacion_subsanada, 'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite, ' ' AS usuario
FROM   tEntidad e,
tTramite tr,
tActividadEconomica ae,
tBajaFuncionario BF,
LogsTrans lt
WHERE  e.ESTADO_IMPRESION = 'SI'
AND e.ESTADO = 'AC'
AND e.idEntidad = tr.idEntidad
AND EXISTS (SELECT 1
FROM  tObservacionMesa_Entrada te
 WHERE  te.idTramite = tr.idTramite)
 AND e.idActividadEconomica = ae.idActividadEconomica
 AND tr.Estado_Tramite = 'TE'
 AND TR.idTramite = BF.idTramiteNuevo
 AND bf.idLogTrans = lt.idLogTrans
 AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'</CODE>
</VIEW>
<VIEW>
<NAME>view_listar_observados_FR</NAME>
<ID>134</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        en.idEntidad, rr.idTramite, en.PN_NOMBRE + ' ' + en.PN_PATERNO + ' ' + en.PN_MATERNO AS nombre, prs.DESCRIPCION, lrr.Observacion AS observaciones
FROM            dbo.REGISTRO_REQUISITO AS rr INNER JOIN
                         dbo.tFuncionario AS en ON rr.idEntidad = en.idEntidad AND rr.idFuncionario = en.idFuncionario INNER JOIN
                         dbo.PARAM_REQUISITOS_SO AS prs ON rr.idParam = prs.idParam INNER JOIN
                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr.idRegistro_Requisito = lrr.idRegistro_Requisito
--WHERE        (rr.ESTADO = 'OB') AND (en.TIPO_FUNCIONARIO = 'FR') AND (rr.idParam &gt;= 7) AND (lrr.Operacion = 'OB') AND (lrr.idLogRegistro_Requisito =
WHERE        (rr.ESTADO = 'OB') AND (en.TIPO_FUNCIONARIO = 'FR') AND (rr.idParam &gt;= 7 AND rr.idParam != 10 AND rr.idParam != 12 AND rr.idParam != 13) AND (lrr.Operacion = 'OB') AND (lrr.idLogRegistro_Requisito =
                             (SELECT        MAX(idLogRegistro_Requisito) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS lrr1
                               WHERE        (idRegistro_Requisito = lrr.idRegistro_Requisito) AND (Operacion = 'OB')))</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_procesados_arealegalANTERIORJP</NAME>
<ID>135</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT DISTINCT
                         tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, null as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'NO PROCESADO' estado,
                         (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno) AS usuario
                               FROM            Users u
                               WHERE        u.usuarioRol = 'legal' AND estado = 'AC' AND EXISTS
                                                             (SELECT DISTINCT lrr.nusuario
                                                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                                                               WHERE        (rr1.idTramite = rr.idTramite) AND (lrr.Operacion = 'OB'))) AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AJ' AND
                         NOT EXISTS
                             (SELECT        1
                               FROM            REGISTRO_REQUISITO rr
                               WHERE        rr.idTramite = tr.idTramite AND rr.ESTADO IN ('OB')) AND tr.idTramite = rr.idTramite
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, null as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT,
                         ae.nombre, 'NO PROCESADO' estado, (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'legal' AND estado = 'AC' AND EXISTS
                                                             (SELECT DISTINCT lrr.nusuario
                                                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                                                               WHERE        (rr1.idTramite = rr.idTramite) AND (lrr.Operacion = 'OB'))) AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'OB' AND
                         NOT EXISTS
                             (SELECT        1
                               FROM            REGISTRO_REQUISITO rr
                               WHERE        rr.idTramite = tr.idTramite AND rr.ESTADO IN ('OB')) AND tr.idTramite = rr.idTramite and tr.Secuencia=rr.Secuencia
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, (select max(CONVERT(date,o.fecha)) from LOG_REGISTRO_REQUISITO o where o.idRegistro_Requisito=rr.idRegistro_Requisito and Operacion='AP') as fecha_aprobacion
						 , e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado,
                         (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AP' AND
                         tr.idTramite = rr.idTramite
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, (select max(CONVERT(date,o.fecha)) from LOG_REGISTRO_REQUISITO o where o.idRegistro_Requisito=rr.idRegistro_Requisito and Operacion='AP') as fecha_aprobacion
						 , e.SUJETO_OBLIGADO, e.NIT,
                         ae.nombre, 'PROCESADO' estado, (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'AP' AND
                         tr.idTramite = rr.idTramite and tr.Secuencia=rr.Secuencia
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, (select max(CONVERT(date,o.fecha)) from LOG_REGISTRO_REQUISITO o where o.idRegistro_Requisito=rr.idRegistro_Requisito and Operacion='AP') as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado,
                         (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AR' AND
                         tr.idTramite = rr.idTramite
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, (select max(CONVERT(date,o.fecha)) from LOG_REGISTRO_REQUISITO o where o.idRegistro_Requisito=rr.idRegistro_Requisito and Operacion='AP') as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT,
                         ae.nombre, 'PROCESADO' estado, (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'AR' AND
                         tr.idTramite = rr.idTramite and tr.Secuencia=rr.Secuencia
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, (select max(CONVERT(date,o.fecha)) from LOG_REGISTRO_REQUISITO o where o.idRegistro_Requisito=rr.idRegistro_Requisito and Operacion='AP') as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado,
                         (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTROFUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'TE' AND
                         tr.idTramite = rr.idTramite
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, (select max(CONVERT(date,o.fecha)) from LOG_REGISTRO_REQUISITO o where o.idRegistro_Requisito=rr.idRegistro_Requisito and Operacion='AP') as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT,
                         ae.nombre, 'PROCESADO' estado, (SELECT DISTINCT lrr.nusuario
                               FROM            dbo.REGISTRO_REQUISITO AS rr1 INNER JOIN
                                                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr1.idRegistro_Requisito = lrr.idRegistro_Requisito
                               WHERE        (rr1.idTramite = rr.idTramite) AND (rr1.Secuencia = rr.Secuencia) AND (lrr.Operacion = 'OB')) AS usuariolegal, tr.Observacion_subsanada,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'TE' AND
                         tr.idTramite = rr.idTramite and tr.Secuencia=rr.Secuencia
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado,'' as usuarioLegal,'' as Observacion_subsanada, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'legal' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO= 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AJ' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado,'' as usuarioLegal,'' as Observacion_subsanada,  'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AP' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado,'' as usuarioLegal,'' as Observacion_subsanada,  'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado, '' as usuarioLegal,'' as Observacion_subsanada, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado,'' as usuarioLegal,'' as Observacion_subsanada,  'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'legal' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AJ' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, (select bf.fecha_aprobacion_juridica from tBajaFuncionario bf where bf.idTramiteNuevo=tr.idTramite) as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado,'' as usuarioLegal,'' as Observacion_subsanada,  'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, (select bf.fecha_aprobacion_juridica from tBajaFuncionario bf where bf.idTramiteNuevo=tr.idTramite) as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado,'' as usuarioLegal,'' as Observacion_subsanada,  'BAJA FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado,'' as usuarioLegal,'' as Observacion_subsanada,  'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'legal' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AJ' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, (select bf.fecha_aprobacion_juridica from tBajaFuncionario bf where bf.idTramiteNuevo=tr.idTramite) as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado,'' as usuarioLegal,'' as Observacion_subsanada,  'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, (select bf.fecha_aprobacion_juridica from tBajaFuncionario bf where bf.idTramiteNuevo=tr.idTramite) as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado,'' as usuarioLegal,'' as Observacion_subsanada,  'BAJA ANALISTA DE CUMPLIMIENTO' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tBajaFuncionario BF, LogsTrans lt
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND
                         TR.idTramite = BF.idTramiteNuevo AND bf.idLogTrans = lt.idLogTrans AND lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO'</CODE>
</VIEW>
<VIEW>
<NAME>view_listar_observados_SO</NAME>
<ID>136</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        en.idEntidad, rr.idTramite, en.SUJETO_OBLIGADO, prs.DESCRIPCION, lrr.Observacion AS observaciones
FROM            dbo.REGISTRO_REQUISITO AS rr INNER JOIN
                         dbo.tEntidad AS en ON rr.idEntidad = en.idEntidad INNER JOIN
                         dbo.PARAM_REQUISITOS_SO AS prs ON rr.idParam = prs.idParam INNER JOIN
                         dbo.LOG_REGISTRO_REQUISITO AS lrr ON rr.idRegistro_Requisito = lrr.idRegistro_Requisito
--WHERE        (rr.ESTADO = 'OB') AND (rr.idParam &lt;= 6) AND (lrr.Operacion = 'OB') AND (lrr.idLogRegistro_Requisito =
WHERE        (rr.ESTADO = 'OB') AND (rr.idParam &lt;= 6 OR rr.idParam = 10 OR rr.idParam = 12 OR rr.idParam = 13) AND (lrr.Operacion = 'OB') AND (lrr.idLogRegistro_Requisito =
                             (SELECT        MAX(idLogRegistro_Requisito) AS Expr1
                               FROM            dbo.LOG_REGISTRO_REQUISITO AS lrr1
                               WHERE        (idRegistro_Requisito = lrr.idRegistro_Requisito) AND (Operacion = 'OB')))</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_procesados_sistemasANTERIOR</NAME>
<ID>137</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>--view_tramites_procesados_sistemas   Reporte de Tramites Procesados por el Area De Sistemas
create view %viewname%
as
SELECT DISTINCT
                         tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, NULL AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1
						-- THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO'
						 THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END
						 END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite
LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia
--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							 --  AND e.idActividadEconomica = ae.idActividadEconomica
							   AND TR.Estado_DU = 'U'
							   AND tr.Estado_Tramite = 'AP'
							   --AND
                        -- tr.idTramite = rr.idTramite
and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='AP'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='AP'
group by idEntidad)))


UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, NULL AS fecha_aprobacion,
                         e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'NO PROCESADO' estado, CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1

						-- THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO'
						 THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                             ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END
						 END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia


--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI'
AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							   --AND e.idActividadEconomica = ae.idActividadEconomica
							   AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'AP'
							  -- AND tr.idTramite = rr.idTramite
							   AND tr.Secuencia = rr.Secuencia
and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='AP'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='AP'
group by idEntidad)))
UNION
SELECT DISTINCT tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite,
                             (SELECT        max(ots.Fecha_Aprobacion)
                               FROM            Observacion_Tramite_Sistemas ots
                               WHERE        ots.idTramite = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1

						-- THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO'
						 THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END
						 END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario

from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia

--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							  -- AND e.idActividadEconomica = ae.idActividadEconomica
							   AND TR.Estado_DU = 'U'
							   AND tr.Estado_Tramite = 'AR'
							  -- AND tr.idTramite = rr.idTramite
and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='AR'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='AR'
group by idEntidad)))

UNION
SELECT DISTINCT tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite,
                             (SELECT        max(ots.Fecha_Aprobacion)
                               FROM            Observacion_Tramite_Sistemas ots
                               WHERE        ots.idTramite = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1

						 --THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO'

						 THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END

						 END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario

from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia


--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							   --AND e.idActividadEconomica = ae.idActividadEconomica
							   AND TR.Estado_DU = 'D'
							   AND tr.Estado_Tramite = 'AR'
							   --AND tr.idTramite = rr.idTramite
							   AND tr.Secuencia = rr.Secuencia
							   and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='AR'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='AR'
group by idEntidad)))
UNION
SELECT DISTINCT tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite,
                             (SELECT        max(ots.Fecha_Aprobacion)
                               FROM            Observacion_Tramite_Sistemas ots
                               WHERE        ots.idTramite = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, CASE WHEN
              (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1
						 --THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO'

						 THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END

						 END AS TIPO_TRAMITE,
                          ' ' AS usuario

						  from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia

--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							  -- AND e.idActividadEconomica = ae.idActividadEconomica
							   AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'TE'
							  -- AND tr.idTramite = rr.idTramite

							  and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='TE'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='TE'
group by idEntidad)))
UNION
SELECT DISTINCT tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite,
                             (SELECT        max(ots.Fecha_Aprobacion)
                               FROM            Observacion_Tramite_Sistemas ots
                               WHERE        ots.idTramite = tr.idTramite) AS fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado, CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1

						-- THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO'
						 THEN
                                                                               CASE  WHEN TC.idTramite_Secuencia IS NULL
                                                                                THEN 'REGISTRO FUNCIONARIO RESPONSABLE'
                                                                                        ELSE 'RENOVACION FUNCIONARIO RESPONSABLE'
                                                                               END
                                                                      ELSE
                                                                          CASE WHEN TC.idTramite_Secuencia IS NULL
                                                                                        THEN 'REGISTRO ANALISTA DE CUMPLIMIENTO'
                                                                                        ELSE 'RENOVACION DE ANALISTA DE CUMPLIMIENTO'
                                                                          END
                                                                  END
                                                   END
                                ELSE
                                      CASE WHEN
                             (SELECT COUNT(te.idEntidad)
                               FROM  tEntidad AS te
                               WHERE te.idEntidad IN (SELECT teh.idEntidad
                                                      FROM  tEntidadHistRenovados AS teh)
                                                                         AND te.idEntidad = e.idEntidad)  &gt; 0
                                                         THEN 'RENOVACION DE SUJETO OBLIGADO'
                                                         ELSE 'REGISTRO DE SUJETO OBLIGADO'
                                          END
						 END AS TIPO_TRAMITE,
                          ' ' AS usuario
from tEntidad e
inner join tTramite tr
on e.idEntidad = tr.idEntidad
inner join tActividadEconomica ae
on e.idActividadEconomica = ae.idActividadEconomica
inner join REGISTRO_REQUISITO rr
on tr.idTramite = rr.idTramite

LEFT OUTER JOIN dbo.tTramiteClasificacion AS tc ON tr.idTramite_Secuencia = tc.idTramite_Secuencia

--FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC'
--AND e.idEntidad = tr.idEntidad
AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite)
							   --AND e.idActividadEconomica = ae.idActividadEconomica
							   AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'TE'
							   --AND  tr.idTramite = rr.idTramite
						 AND tr.Secuencia = rr.Secuencia

						 and( (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is not null
and estado='TE'
group by idfuncionario)) or (tr.idtramite in  (select max(idtramite) as idtrammite
from registro_requisito
where idfuncionario is  null
and estado='TE'
group by idEntidad)))
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AP' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado,
                         'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, NULL fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado,
                         'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND tr.idTramite = c.idTramite</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivados_ConNombres1</NAME>
<ID>138</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW [dbo].[view_tramites_archivados_ConNombres] as
SELECT distinct
      --case when tipo='DE SUJETO OBLIGADO Y FR'
	  --then null else vt.[idFuncionario] end as idFuncionario
	  vt.[idFuncionario]
      ,vt.[idEntidad]
      ,vt.[idTramite_Secuencia]
      ,vt.[idTramite]
      ,vt.[SUJETO_OBLIGADO]
      ,vt.[NIT]
      ,vt.[TIPO_SUJETO_OBLIGADO]
      ,vt.[OTRO_TIPO_SO]
      ,vt.[NOMBRE_REPRESENTANTE]
      ,vt.[CIUDAD]
      ,vt.[CORREO_ELECTRONICO]
      ,vt.[OFCEN_ZONA]
      ,vt.[OFCEN_DIRECCION]
      ,vt.[OFCEN_TELEFONO]
      ,vt.[OBSERVACIONES]
      ,vt.[CODIGO_VERIFICADOR]
      ,vt.[nusuario]
      ,vt.[estadoEntidad]
      ,vt.[fecha_registro]
      ,vt.[ESTADO]
	 ,'' AS Detalle
	 ,
	 '' as usuarioLegal
	 ,'' as Observacion_subsanada
      ,vt.[Secuencia]
      ,vt.[Estado_DU]
      ,
	  --case when tipo='DE SUJETO OBLIGADO Y FR'
	  --then null else vt.[nombre_funcionario] end as nombre_funcionario
	  vt.[nombre_funcionario]
      ,vt.[tipoProceso]
      ,vt.[TIPO]
	  ,vt.tipoProceso + ' '+ TIPO as TIPO_TRAMITE
      ,tta.Observacion,tta.Fecha_Archivado ,
	  tta.Observacion AS nro_sicod,
	  vt.TIPO_FUNCIONARIO
FROM v_resumen_traza_requisitos vt
inner join dbo.tObservacionTramite_Archivo AS tta ON vt.idTramite = tta.idTramite
and tta.Secuencia = vt.Secuencia
where
vt.TIPO != 'DADO DE BAJA' AND
vt.estadoEntidad = 'AC' and vt.ESTADO_IMPRESION = 'SI' and vt.ESTADO = 'TE'
and idTramite_Secuencia
in
	(
		SELECT max(vt.idTramite_Secuencia) FROM v_resumen_traza_requisitos vt
		inner join dbo.tObservacionTramite_Archivo AS tta ON vt.idTramite = tta.idTramite
		where  vt.TIPO != 'DADO DE BAJA' AND vt.estadoEntidad = 'AC' and vt.ESTADO_IMPRESION = 'SI' and vt.ESTADO = 'TE'
		--	group by vt.idEntidad, case when vt.tipo='DE SUJETO OBLIGADO Y FR' then 'DE SUJETO OBLIGADO' else vt.tipo end
		and (vt.TIPO_FUNCIONARIO not in ('BA','BC') or vt.TIPO_FUNCIONARIO is null  )
		group by vt.idEntidad, vt.idFuncionario
	)
	--and (vt.TIPO_FUNCIONARIO not in ('BA') or vt.TIPO_FUNCIONARIO is null  )
	and (
	        --  (vt.TIPO='DE SUJETO OBLIGADO Y FR' and vt.[nombre_funcionario] is not null)
		    (vt.TIPO='DE SUJETO OBLIGADO Y FR' and vt.[nombre_funcionario] is  null)
		   or
		   (vt.TIPO!='DE SUJETO OBLIGADO Y FR')
		)
	--and vt.idEntidad=1262
	--and vt.idEntidad=1011
	--and vt.idEntidad=1028
	--and vt.idEntidad=1140
	--and vt.idEntidad=1093
	--and vt.idEntidad=1128
	/*
	SELECT vt.idEntidad, case when vt.tipo='DE SUJETO OBLIGADO Y FR' then 'DE SUJETO OBLIGADO' else vt.tipo end ,
	 max(vt.idTramite_Secuencia) FROM v_resumen_traza_requisitos vt
		inner join dbo.tObservacionTramite_Archivo AS tta ON vt.idTramite = tta.idTramite
		where  vt.TIPO != 'DADO DE BAJA' AND vt.estadoEntidad = 'AC' and vt.ESTADO_IMPRESION = 'SI' and vt.ESTADO = 'TE'
		group by vt.idEntidad, case when vt.tipo='DE SUJETO OBLIGADO Y FR' then 'DE SUJETO OBLIGADO' else vt.tipo end
		having idEntidad=1262
		*/</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_procesados_sistemasANTERIORJP</NAME>
<ID>139</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT DISTINCT
                         tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, null as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'NO PROCESADO' estado,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AP' AND
                         tr.idTramite = rr.idTramite
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, null as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT,
                         ae.nombre, 'NO PROCESADO' estado,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'AP' AND
                         tr.idTramite = rr.idTramite and tr.Secuencia=rr.Secuencia
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, (select max(ots.Fecha_Aprobacion) from Observacion_Tramite_Sistemas ots where ots.idTramite=tr.idTramite) as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'AR' AND
                         tr.idTramite = rr.idTramite
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, (select max(ots.Fecha_Aprobacion) from Observacion_Tramite_Sistemas ots where ots.idTramite=tr.idTramite) as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT,
                         ae.nombre, 'PROCESADO' estado,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'AR' AND
                         tr.idTramite = rr.idTramite and tr.Secuencia=rr.Secuencia
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) nro_tramite, (select max(ots.Fecha_Aprobacion) from Observacion_Tramite_Sistemas ots where ots.idTramite=tr.idTramite) as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre, 'PROCESADO' estado,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam = 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'U' AND tr.Estado_Tramite = 'TE' AND
                         tr.idTramite = rr.idTramite
UNION
SELECT DISTINCT
                         tr.idTramite_Secuencia, (CONVERT(nvarchar, tr.idTramite) + '-' + CONVERT(nvarchar, tr.Secuencia)) AS nro_tramite, (select max(ots.Fecha_Aprobacion) from Observacion_Tramite_Sistemas ots where ots.idTramite=tr.idTramite) as fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT,
                         ae.nombre, 'PROCESADO' estado,
                         CASE WHEN
                             (SELECT        MAX(idParam)
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND (rr1.Secuencia = rr.Secuencia)) = 9 THEN CASE WHEN
                             (SELECT        rr1.idParam
                               FROM            REGISTRO_REQUISITO rr1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idParam= 5 AND (rr1.Secuencia = rr.Secuencia))
                         = 5 THEN 'REGISTRO DE SUJETO OBLIGADO Y FR' ELSE CASE WHEN
                             (SELECT DISTINCT (1)
                               FROM            REGISTRO_REQUISITO rr1, tFuncionario t1
                               WHERE        rr1.idTramite = rr.idTramite AND rr1.idFuncionario = t1.idFuncionario AND t1.TIPO_FUNCIONARIO = 'FR' AND (rr1.Secuencia = rr.Secuencia))
                         = 1 THEN 'REGISTRO FUNCIONARIO RESPONSABLE' ELSE 'REGISTRO ANALISTA DE CUMPLIMIENTO' END END ELSE 'REGISTRO SUJETO OBLIGADO' END AS TIPO_TRAMITE, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, REGISTRO_REQUISITO rr
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND TR.Estado_DU = 'D' AND tr.Estado_Tramite = 'TE' AND
                         tr.idTramite = rr.idTramite and tr.Secuencia=rr.Secuencia
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'NO PROCESADO' estado, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'confirmarusuarios' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AP' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite,
                             (SELECT        (u.nombres + ' ' + u.apellido_paterno + ' ' + u.apellido_materno)
                               FROM            Users u
                               WHERE        u.usuarioRol = 'archivar' AND estado = 'AC') AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'AR' AND tr.idTramite = c.idTramite
UNION
SELECT        tr.idTramite_Secuencia, CONVERT(nvarchar, tr.idTramite) AS nro_tramite, null fecha_aprobacion, e.SUJETO_OBLIGADO, e.NIT, ae.nombre,
                         'PROCESADO' estado, 'COMUNICACIÓN CAMBIO FUNCIONARIO RESPONSABLE' tipo_tramite, ' ' AS usuario
FROM            tEntidad e, tTramite tr, tActividadEconomica ae, tComunicacionCambioFR c
WHERE        e.ESTADO_IMPRESION = 'SI' AND e.ESTADO = 'AC' AND e.idEntidad = tr.idEntidad AND EXISTS
                             (SELECT        1
                               FROM            tObservacionMesa_Entrada te
                               WHERE        te.idTramite = tr.idTramite) AND e.idActividadEconomica = ae.idActividadEconomica AND tr.Estado_Tramite = 'TE' AND tr.idTramite = c.idTramite</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivados_observados_ConNombres</NAME>
<ID>140</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE view %viewname% as
SELECT distinct
      case when tipo='DE SUJETO OBLIGADO Y FR'
	  then null else vt.[idFuncionario] end as idFuncionario
      ,vt.[idEntidad]
      ,vt.[idTramite_Secuencia]
      ,vt.[idTramite]
      ,vt.[SUJETO_OBLIGADO]
      ,vt.[NIT]
      ,vt.[TIPO_SUJETO_OBLIGADO]
      ,vt.[OTRO_TIPO_SO]
      ,vt.[NOMBRE_REPRESENTANTE]
      ,vt.[CIUDAD]
      ,vt.[CORREO_ELECTRONICO]
      ,vt.[OFCEN_ZONA]
      ,vt.[OFCEN_DIRECCION]
      ,vt.[OFCEN_TELEFONO]
      ,vt.[OBSERVACIONES]
      ,vt.[CODIGO_VERIFICADOR]
      ,vt.[nusuario]
      ,vt.[estadoEntidad]
      ,vt.[fecha_registro]
      ,vt.[ESTADO]
	  ,'' AS Detalle
	 ,
	 '' as usuarioLegal
	 ,'' as Observacion_subsanada
      ,vt.[Secuencia]
      ,vt.[Estado_DU]
      ,case when tipo='DE SUJETO OBLIGADO Y FR'
	  then null else vt.[nombre_funcionario] end as nombre_funcionario
      ,vt.[tipoProceso]
      ,vt.[TIPO]
	  ,vt.tipoProceso + ' '+ TIPO as TIPO_TRAMITE
      ,tta.Observacion,tta.Fecha_Archivado ,
	  tta.Observacion AS nro_sicod
FROM v_resumen_traza_requisitos vt
inner join dbo.tObservacionTramite_Archivo AS tta ON vt.idTramite = tta.idTramite
and tta.Secuencia = vt.Secuencia
where
vt.TIPO != 'DADO DE BAJA' AND
vt.estadoEntidad = 'AC' and vt.ESTADO_IMPRESION = 'SI' and vt.ESTADO = 'TE'
and idTramite_Secuencia
in
	(
		SELECT max(vt.idTramite_Secuencia) FROM v_resumen_traza_requisitos vt
		inner join dbo.tObservacionTramite_Archivo AS tta ON vt.idTramite = tta.idTramite
		inner join dbo.LOG_REGISTRO_REQUISITO lr on vt.idRegistro_Requisito = lr.idRegistro_Requisito and lr.Operacion='OB'
		where vt.TIPO != 'DADO DE BAJA' AND vt.estadoEntidad = 'AC' and vt.ESTADO_IMPRESION = 'SI' and vt.ESTADO = 'TE'
		group by vt.idEntidad, vt.idFuncionario
	)</CODE>
</VIEW>
<VIEW>
<NAME>view_SO</NAME>
<ID>141</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT        e.idEntidad, e.SUJETO_OBLIGADO, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.TIPO_EMPRESA, e.NIT, e.CODIGO_VERIFICADOR, e.NOMBRE_REPRESENTANTE,
                         e.OFCEN_DEPARTAMENTO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.CORREO_ELECTRONICO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica</CODE>
</VIEW>
<VIEW>
<NAME>view_estado_sujetos_obligados</NAME>
<ID>142</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname% AS

select distinct   --e.*,

e.idEntidad, e.SUJETO_OBLIGADO, e.NIT, v.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, v.CIUDAD as  CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, e.nusuario,
						 v.fecha_registro, v.idTramite, v.Secuencia, v.Estado_DU, 'EN MESA DE ENTRADA' ESTADO_TRAMITE,
NULL fecha_emision
	   from v_resumen_traza_requisitos  v
inner join tEntidad e on v.idEntidad = e.idEntidad
left join LOG_REGISTRO_REQUISITO lr on lr.idRegistro_Requisito = v.idRegistro_Requisito and  lr.Operacion = 'AP'
left join  tObservacionMesa_Entrada ome on ome.idTramite = v.idTramite
where v.ESTADO_IMPRESION = 'SI' AND v.estadoEntidad = 'AC'
and ome.idLogTrans is null
and lr.idRegistro_Requisito is null
and (v.idParam &lt;= 6  or v.idParam = 10 or v.idParam = 12 or v.idParam = 13)

union

select distinct  --e.*,
e.idEntidad, e.SUJETO_OBLIGADO, e.NIT, v.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, v.CIUDAD as  CIUDAD,
 e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, e.nusuario,
	   v.fecha_registro, v.idTramite, v.Secuencia, v.Estado_DU, 'EN LEGAL'  ESTADO_TRAMITE,
NULL fecha_emision
	   from v_resumen_traza_requisitos  v
inner join tEntidad e on v.idEntidad = e.idEntidad
left join LOG_REGISTRO_REQUISITO lr on lr.idRegistro_Requisito = v.idRegistro_Requisito and  lr.Operacion = 'AP'
left join  tObservacionMesa_Entrada ome on ome.idTramite = v.idTramite
where v.ESTADO_IMPRESION = 'SI' AND v.estadoEntidad = 'AC'
and (
		(lr.idRegistro_Requisito is not null  and v.Estado_Tramite='AJ')
		or
		(lr.idRegistro_Requisito is null and ome.idLogTrans is not null )
)
and (v.idParam &lt;= 6  or v.idParam = 10 or v.idParam = 12 or v.idParam = 13)

union

select distinct  --e.*,
e.idEntidad, e.SUJETO_OBLIGADO, e.NIT, v.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, v.CIUDAD as  CIUDAD,
 e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, e.nusuario,
	   v.fecha_registro, v.idTramite, v.Secuencia, v.Estado_DU, 'EN SISTEMAS'  ESTADO_TRAMITE,
NULL fecha_emision
	   from v_resumen_traza_requisitos  v
inner join tEntidad e on v.idEntidad = e.idEntidad
left join LOG_REGISTRO_REQUISITO lr on lr.idRegistro_Requisito = v.idRegistro_Requisito and  lr.Operacion = 'AP'
left join  tObservacionMesa_Entrada ome on ome.idTramite = v.idTramite
where v.ESTADO_IMPRESION = 'SI' AND v.estadoEntidad = 'AC'
and (
		(lr.idRegistro_Requisito is not null  and v.Estado_Tramite='AP')

)
and (v.idParam &lt;= 6  or v.idParam = 10 or v.idParam = 12 or v.idParam = 13)

union

select distinct  --e.*,
e.idEntidad, e.SUJETO_OBLIGADO, e.NIT, v.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, v.CIUDAD as  CIUDAD,
 e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, e.nusuario,
	   v.fecha_registro, v.idTramite, v.Secuencia, v.Estado_DU, 'EN ARCHIVOS' ESTADO_TRAMITE,
NULL fecha_emision
	   from v_resumen_traza_requisitos  v
inner join tEntidad e on v.idEntidad = e.idEntidad
left join LOG_REGISTRO_REQUISITO lr on lr.idRegistro_Requisito = v.idRegistro_Requisito and  lr.Operacion = 'AP'
left join  tObservacionMesa_Entrada ome on ome.idTramite = v.idTramite
where v.ESTADO_IMPRESION = 'SI' AND v.estadoEntidad = 'AC'
and (
		(lr.idRegistro_Requisito is not null    and v.Estado_Tramite='AR')

)
and (v.idParam &lt;= 6  or v.idParam = 10 or v.idParam = 12 or v.idParam = 13)

union

select distinct  --e.*,
e.idEntidad, e.SUJETO_OBLIGADO, e.NIT, v.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, v.CIUDAD as  CIUDAD,
 e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, e.nusuario,
v.fecha_registro, v.idTramite, v.Secuencia, v.Estado_DU, 'TERMINADO'  ESTADO_TRAMITE,
case when ci.idLogTrans is null then ota.Fecha_Archivado else
lt.Fecha end fecha_emision
	   from v_resumen_traza_requisitos  v
inner join tEntidad e on v.idEntidad = e.idEntidad
left join tObservacionTramite_Archivo ota on v.idTramite=ota.idTramite and v.Secuencia = ota.Secuencia
left join LOG_REGISTRO_REQUISITO lr on lr.idRegistro_Requisito = v.idRegistro_Requisito and  lr.Operacion = 'AP'
left join tCertificadoImpresion ci ON v.idTramite = ci.idTramite and ci.tipo='SO' AND ci.idCertificadoImpresion =
                          (SELECT     max(ci1.idCertificadoImpresion)
                            FROM          tCertificadoImpresion ci1
                            WHERE      ci1.idTramite = ci.idTramite and ci1.tipo='SO')
--left join  tObservacionMesa_Entrada ome on ome.idTramite = v.idTramite
left join LogsTrans lt ON ci.idLogTrans = lt.idLogTrans

where v.ESTADO_IMPRESION = 'SI' AND v.estadoEntidad = 'AC'
and v.Estado_Tramite='TE'
and (v.idParam &lt;= 6  or v.idParam = 10 or v.idParam = 12 or v.idParam = 13)
and v.fecha_registro=(select max(rr1.fecha_registro)
						from REGISTRO_REQUISITO rr1
						where rr1.idEntidad=v.idEntidad AND (rr1.idParam &lt;= 6  or rr1.idParam = 10 or v.idParam = 12 or v.idParam = 13))
and
(
  (lr.idRegistro_Requisito is not null and ci.idLogTrans is null) or
  (lt.idLogTrans is not null  )
)</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivados_baja_AC</NAME>
<ID>143</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT DISTINCT
                         tr.idTramite_Secuencia,tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO,'' AS Detalle,tta.Observacion
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tBajaFuncionario AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramiteNuevo INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionarioNuevo = f.idFuncionario INNER JOIN
                         dbo.LogsTrans AS lt ON bf.idLogTrans = lt.idLogTrans INNER JOIN
						 dbo.tObservacionTramite_Archivo AS tta ON tr.idTramite = tta.idTramite
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'TE') AND (bf.TipoBaja = 'BD') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite)) AND (lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO')</CODE>
</VIEW>
<VIEW>
<NAME>view_estado_funcionarios_responsablesANTERIOR</NAME>
<ID>144</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW dbo.view_estado_funcionarios_responsables
AS
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, lt.Fecha fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr JOIN
                      tCertificadoImpresion ci ON rr.idTramite = ci.idTramite and ci.tipo='FR' AND ci.idCertificadoImpresion =
                          (SELECT     max(ci1.idCertificadoImpresion)
                            FROM          tCertificadoImpresion ci1
                            WHERE      ci1.idTramite = ci.idTramite and ci1.tipo='FR') JOIN
                      LogsTrans lt ON ci.idLogTrans = lt.idLogTrans, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('FR', 'BA')
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idFuncionario=F.idFuncionario AND F.TIPO_FUNCIONARIO IN ('FR','BA'))
union all
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, OTA.Fecha_Archivado fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr,tObservacionTramite_Archivo ota , tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.SecuenciaAND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('FR', 'BA')
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idFuncionario=F.idFuncionario AND F.TIPO_FUNCIONARIO IN ('FR','BA'))
					  and not exists (select  1 from  tCertificadoImpresion ci
						where rr.idTramite = ci.idTramite)
						and rr.idTramite=ota.idTramite
						and rr.Secuencia=ota.Secuencia
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN ARCHIVOS' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AR') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('FR', 'BA')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN SISTEMAS' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AP') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('FR', 'BA')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, f.idFuncionario,
                      f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD, P.nombre AS NACIONALIDAD,
                      f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO, f.OBSERVACIONES, f.idEntidad,
                      f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AJ') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('FR', 'BA')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, f.idFuncionario,
                      f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD, P.nombre AS NACIONALIDAD,
                      f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO, f.OBSERVACIONES, f.idEntidad,
                      f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP') AND
                      EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND
                      f.TIPO_FUNCIONARIO IN ('FR', 'BA')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN MESA DE ENTRADA' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP') AND
                      NOT EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND
                      f.TIPO_FUNCIONARIO IN ('FR', 'BA')</CODE>
</VIEW>
<VIEW>
<NAME>view_tramites_archivados_baja_FR</NAME>
<ID>145</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT DISTINCT
                         tr.idTramite_Secuencia, tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO,'' AS Detalle,tta.Observacion
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tBajaFuncionario AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramiteNuevo INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionarioNuevo = f.idFuncionario INNER JOIN
                         dbo.LogsTrans AS lt ON bf.idLogTrans = lt.idLogTrans INNER JOIN
						 dbo.tObservacionTramite_Archivo AS tta ON tr.idTramite = tta.idTramite
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'TE') AND (bf.TipoBaja = 'BD') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite)) AND (lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE')</CODE>
</VIEW>
<VIEW>
<NAME>view_estado_analistasANTERIOR</NAME>
<ID>146</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW dbo.view_estado_analistas
AS
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, lt.Fecha fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr  JOIN
                      tCertificadoImpresion ci ON rr.idTramite = ci.idTramite and ci.tipo='AC' AND ci.idCertificadoImpresion =
                          (SELECT     max(ci1.idCertificadoImpresion)
                            FROM          tCertificadoImpresion ci1
                            WHERE      ci1.idTramite = ci.idTramite and ci1.tipo='AC') JOIN
                      LogsTrans lt ON ci.idLogTrans = lt.idLogTrans, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('AC', 'BC')
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idFuncionario=F.idFuncionario AND F.TIPO_FUNCIONARIO IN ('AC','BC'))
union all
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, ota.Fecha_Archivado fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr ,tObservacionTramite_Archivo ota , tFuncionario f JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('AC', 'BC')
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idFuncionario=F.idFuncionario AND F.TIPO_FUNCIONARIO IN ('AC','BC'))
					  and not exists (select  1 from  tCertificadoImpresion ci
						where rr.idTramite = ci.idTramite)
						and rr.idTramite=ota.idTramite
						and rr.Secuencia=ota.Secuencia
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN ARCHIVOS' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AR') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('AC', 'BC')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN SISTEMAS' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AP') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('AC', 'BC')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, f.idFuncionario,
                      f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP' AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AJ') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('AC', 'BC')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, f.idFuncionario,
                      f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP') AND
                      EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND
                      f.TIPO_FUNCIONARIO IN ('AC', 'BC')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN MESA DE ENTRADA' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP') AND
                      NOT EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND
                      f.TIPO_FUNCIONARIO IN ('AC', 'BC')</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad</NAME>
<ID>147</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        e.idEntidad, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, e.nusuario
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad
WHERE        (e.ESTADO_IMPRESION = 'SI') AND (e.ESTADO = 'AC')</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_registro</NAME>
<ID>148</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT        e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad</CODE>
</VIEW>
<VIEW>
<NAME>v_obtenerReporteTrimestral01_03_2017_legal</NAME>
<ID>149</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname%
 as
 (
 select distinct b.idEntidad,b.idfuncionario,b.idTramite,b.fecha_registro,
-- b.estado,
 a.COD_PARAM ,c.SUJETO_OBLIGADO, c.SUJETO_OBLIGADO as funcionario

 ,c.ESTADO as estado
 ,b.idRegistro_Requisito as id
 --,d.PN_NOMBRE,d.PN_PATERNO,d.PN_MATERNO, d.TIPO_FUNCIONARIO
  from REGISTRO_REQUISITO b
  inner join PARAM_REQUISITOS_SO a
  on b.idParam = a.idParam

  inner join tEntidad c
  on b.idEntidad=c.idEntidad

 -- inner join tFuncionario d
-- on b.idEntidad=d.idEntidad

  where
 COD_PARAM='SO'
 and

   idRegistro_Requisito  in
  (
1331,
1331,
1332,
1332,
1333,
1334,
1335,
1336,
2052,
2053,
2054,
2551,
2551,
2551,
2555,
2556,
4494,
4495,
4496,
4526,
4526,
4527,
4527,
4528,
4528,
4529,
4529,
4530,
4530,
4531,
4531,
4532,
4532,
4853,
4854,
4855,
4856,
4857,
4858,
4864,
4864,
4865,
4866,
4867,
4868,
4869,
4877,
4878,
4882,
4883,
4884,
4885,
4886,
4887,
4888,
4889,
4894,
4894,
4895,
4895,
4896,
4896,
4900,
4901,
4902,
4903,
4904,
4905,
4906,
4907,
4908,
4909,
4911,
4912,
4913,
4914,
4915,
4915,
4916,
4916,
4917,
4917,
4918,
4919,
4920,
4921,
4922,
4923,
4924,
4926,
4928,
4929,
4930,
4931,
4932,
4933,
4934,
4935,
4935,
4935,
4935,
4935,
4935,
4936,
4936,
4936,
4936,
4936,
4936,
4937,
4937,
4937,
4937,
4937,
4937,
4938,
4938,
4938,
4938,
4938,
4938,
4939,
4939,
4939,
4939,
4939,
4939,
4940,
4940,
4940,
4940,
4940,
4940,
4941,
4942,
4943,
4946,
4947,
4948,
4951,
4951,
4952,
4953,
4954,
4954,
4954,
4955,
4955,
4955,
4956,
4956,
4956,
4958,
4959,
4960,
4966,
4968,
4969,
4970,
4970,
4970,
4970,
4971,
4971,
4972,
4973,
4974,
4975,
4976,
4976,
4977,
4978,
4979,
4979,
4980,
4981,
4982,
4983,
4984,
4985,
4986,
4987,
4988,
4988,
4989,
4990,
4991,
4992,
4993,
4994,
4995,
4996,
4997,
4998,
4999,
5002,
5002,
5003,
5003,
5004,
5005,
5006,
5007,
5008,
5009,
5010,
5013,
5014,
5015,
5016,
5017,
5018,
5019,
5020,
5021,
5022,
5022,
5023,
5024,
5025,
5025,
5026,
5027,
5028,
5028,
5029,
5030,
5031,
5031,
5032,
5033,
5037,
5038,
5039,
5040,
5041,
5042,
5045,
5046,
5047,
5048,
5048,
5049,
5049,
5049,
5050,
5050,
5051,
5052,
5053,
5054,
5055,
5056,
5057,
5058,
5058,
5059,
5060,
5060,
5061,
5061,
5062,
5062,
5063,
5063,
5064,
5065,
5065,
5066,
5067,
5068,
5069,
5072,
5073,
5074,
5075,
5076,
5077,
5078,
5081,
5082,
5083,
5084,
5085,
5086,
5087,
5088,
5089,
5091,
5091,
5091,
5092,
5092,
5092,
5092,
5093,
5093,
5095,
5096,
5097,
5101,
5101,
5102,
5102,
5103,
5104,
5105,
5105,
5106,
5107,
5108,
5109,
5111,
5111,
5111,
5111,
5113,
5114,
5115,
5116,
5117,
5118,
5119,
5120,
5121,
5122,
5123,
5124,
5125,
5126,
5126,
5127,
5127,
5128,
5129,
5130,
5131,
5132,
5132,
5133,
5134,
5135,
5136,
5137,
5138,
5139,
5140,
5141,
5142,
5143,
5144,
5145,
5146,
5147,
5149,
5150,
5150,
5151,
5152,
5153,
5154,
5156,
5157,
5158,
5161,
5162,
5164,
5165,
5166,
5169,
5170,
5171,
5173,
5175,
5176,
5177,
5178)

--order by b.idEntidad


union




select distinct b.idEntidad,b.idFuncionario,b.idTramite,b.fecha_registro,
-- b.estado,
 a.COD_PARAM
 ,d.SUJETO_OBLIGADO
 ,(c.PN_NOMBRE + ' '+c.PN_PATERNO+' '+ c.PN_MATERNO) as funcionario

 ,c.TIPO_FUNCIONARIO as estado
 ,b.idRegistro_Requisito as id
 --,d.SUJETO_OBLIGADO
 --,d.PN_NOMBRE,d.PN_PATERNO,d.PN_MATERNO, d.TIPO_FUNCIONARIO
  from REGISTRO_REQUISITO b
  inner join PARAM_REQUISITOS_SO a
  on b.idParam = a.idParam

  inner join tFuncionario c
  on b.idEntidad=c.idEntidad
  AND B.idFuncionario=C.idFuncionario


 inner join tEntidad d
on b.idEntidad=d.idEntidad

  where
--  COD_PARAM='FR'
--  and

   idRegistro_Requisito  in
  (
1331,
1331,
1332,
1332,
1333,
1334,
1335,
1336,
2052,
2053,
2054,
2551,
2551,
2551,
2555,
2556,
4494,
4495,
4496,
4526,
4526,
4527,
4527,
4528,
4528,
4529,
4529,
4530,
4530,
4531,
4531,
4532,
4532,
4853,
4854,
4855,
4856,
4857,
4858,
4864,
4864,
4865,
4866,
4867,
4868,
4869,
4877,
4878,
4882,
4883,
4884,
4885,
4886,
4887,
4888,
4889,
4894,
4894,
4895,
4895,
4896,
4896,
4900,
4901,
4902,
4903,
4904,
4905,
4906,
4907,
4908,
4909,
4911,
4912,
4913,
4914,
4915,
4915,
4916,
4916,
4917,
4917,
4918,
4919,
4920,
4921,
4922,
4923,
4924,
4926,
4928,
4929,
4930,
4931,
4932,
4933,
4934,
4935,
4935,
4935,
4935,
4935,
4935,
4936,
4936,
4936,
4936,
4936,
4936,
4937,
4937,
4937,
4937,
4937,
4937,
4938,
4938,
4938,
4938,
4938,
4938,
4939,
4939,
4939,
4939,
4939,
4939,
4940,
4940,
4940,
4940,
4940,
4940,
4941,
4942,
4943,
4946,
4947,
4948,
4951,
4951,
4952,
4953,
4954,
4954,
4954,
4955,
4955,
4955,
4956,
4956,
4956,
4958,
4959,
4960,
4966,
4968,
4969,
4970,
4970,
4970,
4970,
4971,
4971,
4972,
4973,
4974,
4975,
4976,
4976,
4977,
4978,
4979,
4979,
4980,
4981,
4982,
4983,
4984,
4985,
4986,
4987,
4988,
4988,
4989,
4990,
4991,
4992,
4993,
4994,
4995,
4996,
4997,
4998,
4999,
5002,
5002,
5003,
5003,
5004,
5005,
5006,
5007,
5008,
5009,
5010,
5013,
5014,
5015,
5016,
5017,
5018,
5019,
5020,
5021,
5022,
5022,
5023,
5024,
5025,
5025,
5026,
5027,
5028,
5028,
5029,
5030,
5031,
5031,
5032,
5033,
5037,
5038,
5039,
5040,
5041,
5042,
5045,
5046,
5047,
5048,
5048,
5049,
5049,
5049,
5050,
5050,
5051,
5052,
5053,
5054,
5055,
5056,
5057,
5058,
5058,
5059,
5060,
5060,
5061,
5061,
5062,
5062,
5063,
5063,
5064,
5065,
5065,
5066,
5067,
5068,
5069,
5072,
5073,
5074,
5075,
5076,
5077,
5078,
5081,
5082,
5083,
5084,
5085,
5086,
5087,
5088,
5089,
5091,
5091,
5091,
5092,
5092,
5092,
5092,
5093,
5093,
5095,
5096,
5097,
5101,
5101,
5102,
5102,
5103,
5104,
5105,
5105,
5106,
5107,
5108,
5109,
5111,
5111,
5111,
5111,
5113,
5114,
5115,
5116,
5117,
5118,
5119,
5120,
5121,
5122,
5123,
5124,
5125,
5126,
5126,
5127,
5127,
5128,
5129,
5130,
5131,
5132,
5132,
5133,
5134,
5135,
5136,
5137,
5138,
5139,
5140,
5141,
5142,
5143,
5144,
5145,
5146,
5147,
5149,
5150,
5150,
5151,
5152,
5153,
5154,
5156,
5157,
5158,
5161,
5162,
5164,
5165,
5166,
5169,
5170,
5171,
5173,
5175,
5176,
5177,
5178)

--order by b.idEntidad


)</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_Aprobado_Archivo_baja</NAME>
<ID>150</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tBajaFuncionario AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramiteNuevo INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionarioNuevo = f.idFuncionario
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AR') AND (bf.TipoBaja = 'RE') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_Aprobado_Archivo_bajaDef</NAME>
<ID>151</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tBajaFuncionario AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramiteNuevo INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionarioNuevo = f.idFuncionario INNER JOIN
                         dbo.LogsTrans AS lt ON bf.idLogTrans = lt.idLogTrans
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AR') AND (bf.TipoBaja = 'BD') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite)) AND (lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE')</CODE>
</VIEW>
<VIEW>
<NAME>view_estado_funcionarios_responsables</NAME>
<ID>152</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create VIEW %viewname%
AS
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, lt.Fecha fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr JOIN
                      tCertificadoImpresion ci ON rr.idTramite = ci.idTramite and ci.tipo='FR' AND ci.idCertificadoImpresion =
                          (SELECT     max(ci1.idCertificadoImpresion)
                            FROM          tCertificadoImpresion ci1
                            WHERE      ci1.idTramite = ci.idTramite and ci1.tipo='FR') JOIN
                      LogsTrans lt ON ci.idLogTrans = lt.idLogTrans, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
							and rr2.idTramite=rr.idTramite
							 AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('FR', 'BA')
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idFuncionario=F.idFuncionario AND F.TIPO_FUNCIONARIO IN ('FR','BA'))
union all
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, OTA.Fecha_Archivado fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr,tObservacionTramite_Archivo ota , tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
							and rr.idTramite=rr2.idTramite

							 AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
            WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('FR', 'BA')
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idFuncionario=F.idFuncionario AND F.TIPO_FUNCIONARIO IN ('FR','BA'))
					  and not exists (select  1 from  tCertificadoImpresion ci
						where rr.idTramite = ci.idTramite)
						and rr.idTramite=ota.idTramite
						and rr.Secuencia=ota.Secuencia
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN ARCHIVOS' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
							and rr2.idTramite=rr.idTramite
							 AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AR') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('FR', 'BA')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN SISTEMAS' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
						and rr2.idTramite=rr.idTramite
							AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AP')AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('FR', 'BA')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, f.idFuncionario,
                      f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD, P.nombre AS NACIONALIDAD,
                      f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO, f.OBSERVACIONES, f.idEntidad,
                      f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
							and rr2.idTramite=rr.idTramite
							 AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AJ') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('FR', 'BA')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, f.idFuncionario,
                      f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD, P.nombre AS NACIONALIDAD,
                      f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO, f.OBSERVACIONES, f.idEntidad,
                      f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
							and rr2.idtramite=rr.idTramite
							) AND
                      EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND
                      f.TIPO_FUNCIONARIO IN ('FR', 'BA')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN MESA DE ENTRADA' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS CIUDAD,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
							and rr.idTramite=rr2.idTramite
							) AND
                      NOT EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND
                      f.TIPO_FUNCIONARIO IN ('FR', 'BA')</CODE>
</VIEW>
<VIEW>
<NAME>v_obtenerLogRequisito_RegistroRequisito</NAME>
<ID>153</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname%

  as
  select  b.idEntidad,b.idfuncionario,b.idTramite,b.fecha_registro, c.COD_PARAM,b.estado,a.nusuario,max(a.Fecha) as fechalog
-- b.estado,

  from LOG_REGISTRO_REQUISITO a
   inner join REGISTRO_REQUISITO b
   on a.idRegistro_Requisito=b.idRegistro_Requisito

   inner join PARAM_REQUISITOS_SO c

   on b.idParam= c.idParam

  -- where a.nusuario='flegal'

  -- and a.Fecha &gt;= '01/01/2017' and a.fecha&lt;='31/03/2017'

   group by b.idEntidad,b.idfuncionario,b.idTramite,b.fecha_registro, c.COD_PARAM,a.nusuario,b.estado</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_Aprobado_Archivo_bajaDefAC</NAME>
<ID>154</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tBajaFuncionario AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramiteNuevo INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionarioNuevo = f.idFuncionario INNER JOIN
                         dbo.LogsTrans AS lt ON bf.idLogTrans = lt.idLogTrans
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AR') AND (bf.TipoBaja = 'BD') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite)) AND (lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO')</CODE>
</VIEW>
<VIEW>
<NAME>view_estado_analistas</NAME>
<ID>155</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, lt.Fecha fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr  JOIN
                      tCertificadoImpresion ci ON rr.idTramite = ci.idTramite and ci.tipo='AC' AND ci.idCertificadoImpresion =
                          (SELECT     max(ci1.idCertificadoImpresion)
                            FROM          tCertificadoImpresion ci1
                            WHERE      ci1.idTramite = ci.idTramite and ci1.tipo='AC') JOIN
                      LogsTrans lt ON ci.idLogTrans = lt.idLogTrans, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
							and rr2.idTramite=rr.idTramite
							AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('AC', 'BC')
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idFuncionario=F.idFuncionario AND F.TIPO_FUNCIONARIO IN ('AC','BC'))
union all
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'TERMINADO' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, ota.Fecha_Archivado fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr ,tObservacionTramite_Archivo ota , tFuncionario f JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
								and rr2.idTramite=rr.idTramite
							 AND
												   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'TE') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('AC', 'BC')
					  and rr.fecha_registro=(select max(rr1.fecha_registro) from REGISTRO_REQUISITO rr1 where rr1.idEntidad=e.idEntidad AND rr1.idFuncionario=F.idFuncionario AND F.TIPO_FUNCIONARIO IN ('AC','BC'))
					  and not exists (select  1 from  tCertificadoImpresion ci
						where rr.idTramite = ci.idTramite)
						and rr.idTramite=ota.idTramite
						and rr.Secuencia=ota.Secuencia
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN ARCHIVOS' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
								and rr2.idTramite=rr.idTramite
							AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AR') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('AC', 'BC')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN SISTEMAS' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
								and rr2.idTramite=rr.idTramite
							AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AP') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('AC', 'BC')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, f.idFuncionario,
                      f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
								and rr2.idTramite=rr.idTramite
							AND
                                                   EXISTS
                                                       (SELECT     1
                                                         FROM          tTramite t
                                                         WHERE      t .idEntidad = e.idEntidad AND (t .Estado_Tramite = 'AJ') AND t .Secuencia = rr.Secuencia AND t .idTramite = rr.idTramite)) AND
                      e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND f.TIPO_FUNCIONARIO IN ('AC', 'BC')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN LEGAL' ESTADO_TRAMITE, f.idFuncionario,
                      f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
								and rr2.idTramite=rr.idTramite
							) AND
                      EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND
                      f.TIPO_FUNCIONARIO IN ('AC', 'BC')
UNION ALL
SELECT DISTINCT
                      e.SUJETO_OBLIGADO, E.TIPO_SUJETO_OBLIGADO, E.NIT, rr.fecha_registro, rr.idTramite, rr.Secuencia, rr.Estado_DU, 'EN MESA DE ENTRADA' ESTADO_TRAMITE,
                      f.idFuncionario, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS NOMBRE, f.PN_CASADA, f.PN_DOCUMENTO, c.Descripcion AS EXPEDIDO,
                      P.nombre AS NACIONALIDAD, f.PN_FECHA_NACIMIENTO, f.PN_CARGO, f.CM_TELEFONO, f.CM_INTERNO, f.CM_CELULAR, f.CORREO_ELECTRONICO,
                      f.OBSERVACIONES, f.idEntidad, f.CM_DIRECCION, e.CODIGO_VERIFICADOR, NULL fecha_emision
FROM         view_ver_entidad e, REGISTRO_REQUISITO rr, tFuncionario f INNER JOIN
                      dbo.tCiudad AS c ON f.PN_TAB_CIUDAD = c.idCiudad INNER JOIN
                      dbo.tPais AS P ON f.idPais = P.idPais
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          REGISTRO_REQUISITO rr2, LOG_REGISTRO_REQUISITO lr
                            WHERE      rr.idEntidad = e.idEntidad AND rr.idFuncionario = f.idFuncionario AND rr2.idRegistro_Requisito = lr.idRegistro_Requisito AND lr.Operacion = 'AP'
								and rr2.idTramite=rr.idTramite
							) AND
                      NOT EXISTS
                          (SELECT     1
                            FROM          tObservacionMesa_Entrada ome
                            WHERE      ome.idTramite = rr.idTramite AND ome.idEntidad = rr.idEntidad) AND e.idEntidad = rr.idEntidad AND rr.idFuncionario = f.idFuncionario AND
                      f.TIPO_FUNCIONARIO IN ('AC', 'BC')</CODE>
</VIEW>
<VIEW>
<NAME>v_LogTrans_TCertificado</NAME>
<ID>156</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname%

   as
   (
   select a.*,b.idLogTrans as idLog, b.nUsuario,b.Estado as estadoLog,b.Transaccion,b.Fecha from tCertificadoImpresion a

   inner join LogsTrans b

   on a.idLogTrans=b.idLogTrans
   )</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_Aprobado_Archivo_ComunicaFR</NAME>
<ID>157</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_notificacion,
                         e.nusuario, 'PENDIENTE' AS ESTADO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tComunicacionCambioFR AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramite INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionario = f.idFuncionario
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AR') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_baja</NAME>
<ID>158</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS nombre_nuevo,
                         f1.PN_NOMBRE + ' ' + f1.PN_PATERNO + ' ' + f1.PN_MATERNO AS nombre_anterior
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tBajaFuncionario AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramiteNuevo INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionarioNuevo = f.idFuncionario INNER JOIN
                         dbo.tFuncionario AS f1 ON bf.idFuncionarioAnterior = f1.idFuncionario
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AJ') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_bajadef</NAME>
<ID>159</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS nombre_FR
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tBajaFuncionario AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramiteNuevo INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionarioNuevo = f.idFuncionario INNER JOIN
                         dbo.LogsTrans AS lt ON bf.idLogTrans = lt.idLogTrans
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AJ') AND (bf.TipoBaja = 'BD') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite)) AND (lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE')</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_bajadefAC</NAME>
<ID>160</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS nombre_FR
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tBajaFuncionario AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramiteNuevo INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionarioNuevo = f.idFuncionario INNER JOIN
                         dbo.LogsTrans AS lt ON bf.idLogTrans = lt.idLogTrans
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AJ') AND (lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO') AND
                         (bf.TipoBaja = 'BD') AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_ComunicaFR</NAME>
<ID>161</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_notificacion,
                         e.nusuario, 'PENDIENTE' AS ESTADO, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS nombre_FR
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tComunicacionCambioFR AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramite INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionario = f.idFuncionario
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AJ')  AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisito_ComunicaFR_sistemas</NAME>
<ID>162</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_notificacion,
                         e.nusuario, 'PENDIENTE' AS ESTADO, f.PN_NOMBRE + ' ' + f.PN_PATERNO + ' ' + f.PN_MATERNO AS nombre_FR
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tComunicacionCambioFR AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramite INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionario = f.idFuncionario
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AP')  AND EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisitoME_baja</NAME>
<ID>163</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tBajaFuncionario AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramiteNuevo
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AJ') AND (bf.TipoBaja = 'RE') AND (NOT EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite)))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisitoME_bajadef</NAME>
<ID>164</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tBajaFuncionario AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramiteNuevo INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionarioNuevo = f.idFuncionario INNER JOIN
                         dbo.LogsTrans AS lt ON bf.idLogTrans = lt.idLogTrans
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AJ') AND (bf.TipoBaja = 'BD') AND (NOT EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite))) AND (lt.Transaccion = 'BAJA FUNCIONARIO RESPONSABLE')</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_Baja</NAME>
<ID>165</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT        e.idEntidad, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, e.nusuario
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad
WHERE        (e.ESTADO_IMPRESION = 'SI') AND (e.ESTADO = 'BA')</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisitoME_bajadefAC</NAME>
<ID>166</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_registro,
                         e.nusuario, 'PENDIENTE' AS ESTADO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tBajaFuncionario AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramiteNuevo INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionarioNuevo = f.idFuncionario INNER JOIN
                         dbo.LogsTrans AS lt ON bf.idLogTrans = lt.idLogTrans
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AJ') AND (bf.TipoBaja = 'BD') AND (NOT EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite))) AND (lt.Transaccion = 'BAJA ANALISTA DE CUMPLIMIENTO')</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_requisitoME_ComunicaFR</NAME>
<ID>167</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
SELECT DISTINCT
                         tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, bf.fecha_notificacion,
                         e.nusuario, 'PENDIENTE' AS ESTADO
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad INNER JOIN
                         dbo.tTramite AS tr ON e.idEntidad = tr.idEntidad INNER JOIN
                         dbo.tComunicacionCambioFR AS bf ON e.idEntidad = bf.idEntidad AND tr.idTramite = bf.idTramite INNER JOIN
                         dbo.tFuncionario AS f ON bf.idFuncionario = f.idFuncionario
WHERE        (e.ESTADO = 'AC') AND (e.ESTADO_IMPRESION = 'SI') AND (tr.Estado_Tramite = 'AJ')  AND (NOT EXISTS
                             (SELECT        1 AS Expr1
                               FROM            dbo.tObservacionMesa_Entrada
                               WHERE        (e.idEntidad = idEntidad) AND (tr.idTramite = idTramite)))</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_tramite</NAME>
<ID>168</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as
select e.idEntidad,tr.idTramite, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES, e.CODIGO_VERIFICADOR, e.nusuario,es.Descripcion
from tEntidad e, tActividadEconomica ae,tTramite tr,tCiudad c,tEstado es
where e.idActividadEconomica = ae.idActividadEconomica and
e.idCiudad = c.idCiudad and
e.idEntidad=tr.idEntidad
and (e.ESTADO_IMPRESION = 'SI') AND (e.ESTADO = 'AC')
and tr.Estado_Tramite=es.Estado_Tramite</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_tramite_modif</NAME>
<ID>169</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        rr.idRegistro_Requisito, pr.DESCRIPCION, rr.idTramite, rr.nro_documento, rr.fecha_documento, e.Descripcion AS estado, ' ' AS observaciones
FROM            dbo.REGISTRO_REQUISITO AS rr INNER JOIN
                         dbo.PARAM_REQUISITOS_SO AS pr ON rr.idParam = pr.idParam INNER JOIN
                         dbo.tEstado AS e ON rr.ESTADO = e.Estado_Tramite
WHERE        (pr.COD_PARAM = 'SO')</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_tramite_modif_AC</NAME>
<ID>170</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        rr.idRegistro_Requisito, pr.DESCRIPCION, rr.idTramite, rr.nro_documento, rr.fecha_documento, e.Descripcion AS estado, f.idFuncionario, rr.idEntidad,
                         ' ' AS observaciones
FROM            dbo.REGISTRO_REQUISITO AS rr INNER JOIN
                         dbo.PARAM_REQUISITOS_SO AS pr ON rr.idParam = pr.idParam INNER JOIN
                         dbo.tEstado AS e ON rr.ESTADO = e.Estado_Tramite INNER JOIN
                         dbo.tFuncionario AS f ON rr.idEntidad = f.idEntidad AND rr.idFuncionario = f.idFuncionario
WHERE        (pr.COD_PARAM = 'FR') AND (f.TIPO_FUNCIONARIO = 'AC')</CODE>
</VIEW>
<VIEW>
<NAME>v_funcionario_entidad_flujo_concluido</NAME>
<ID>171</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname%
as
SELECT        e.idEntidad as idEntidadSO, e.SUJETO_OBLIGADO, e.NIT, ae.nombre AS TIPO_SUJETO_OBLIGADO, e.OTRO_TIPO_SO, e.NOMBRE_REPRESENTANTE, c.Descripcion AS CIUDAD,
                         e.CORREO_ELECTRONICO as correoSO, e.OFCEN_ZONA, e.OFCEN_DIRECCION, e.OFCEN_TELEFONO, e.OBSERVACIONES as observacionSO, e.CODIGO_VERIFICADOR, e.nusuario, f.*
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ae ON e.idActividadEconomica = ae.idActividadEconomica INNER JOIN
                         dbo.tCiudad AS c ON e.idCiudad = c.idCiudad

						 inner join tFuncionario f
						 on e.idEntidad= f.idEntidad

WHERE        (e.ESTADO_IMPRESION = 'SI') AND (e.ESTADO = 'AC')
and f.TIPO_FUNCIONARIO!='BA'</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_entidad_tramite_modif_FR</NAME>
<ID>172</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        rr.idRegistro_Requisito, pr.DESCRIPCION, rr.idTramite, rr.nro_documento, rr.fecha_documento, e.Descripcion AS estado, f.idFuncionario, rr.idEntidad,
                         ' ' AS observaciones
FROM            dbo.REGISTRO_REQUISITO AS rr INNER JOIN
                         dbo.PARAM_REQUISITOS_SO AS pr ON rr.idParam = pr.idParam INNER JOIN
                         dbo.tEstado AS e ON rr.ESTADO = e.Estado_Tramite INNER JOIN
                         dbo.tFuncionario AS f ON rr.idEntidad = f.idEntidad AND rr.idFuncionario = f.idFuncionario
WHERE        (pr.COD_PARAM = 'FR') AND (f.TIPO_FUNCIONARIO = 'FR')</CODE>
</VIEW>
<VIEW>
<NAME>view_ver_registro_requisito_AJ</NAME>
<ID>173</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>CREATE VIEW %viewname%
AS
SELECT        t1.idRegistro_Requisito, t1.DESCRIPCION, t1.nro_documento, t1.fecha_documento, rr.imagen, t1.idEntidad, t1.idFuncionario, t1.COD_PARAM, t1.observaciones,
                         t1.observacion_subsanada, t1.idTramite
FROM            (SELECT DISTINCT
                                                    r.idRegistro_Requisito, p.DESCRIPCION, r.nro_documento, r.fecha_documento, '' AS imagen, r.idEntidad, r.idFuncionario, p.COD_PARAM,
                                                    (CASE WHEN l.Operacion = 'CR' THEN
                                                        (SELECT        l3.Observacion
                                                          FROM            LOG_REGISTRO_REQUISITO l3
                                                          WHERE        r.idRegistro_Requisito = l3.idRegistro_Requisito AND l3.Operacion = 'OB' AND l3.idLogRegistro_Requisito =
                                                                                        (SELECT        MAX(l4.idLogRegistro_Requisito)
                                                                                          FROM            LOG_REGISTRO_REQUISITO l4
                                                                                          WHERE        r.idRegistro_Requisito = l4.idRegistro_Requisito AND l4.Operacion = 'OB')) ELSE ' ' END) AS observaciones,
                                                    (CASE WHEN l.Operacion = 'RE' THEN ' ' ELSE 'SI' END) AS observacion_subsanada, r.idTramite
                          FROM            dbo.REGISTRO_REQUISITO AS r FULL OUTER JOIN
                                                    dbo.LOG_REGISTRO_REQUISITO AS l1 ON r.idRegistro_Requisito = l1.idRegistro_Requisito AND l1.Operacion = 'CR' INNER JOIN
                                                    dbo.PARAM_REQUISITOS_SO AS p ON r.idParam = p.idParam INNER JOIN
                                                    dbo.LOG_REGISTRO_REQUISITO AS l ON r.idRegistro_Requisito = l.idRegistro_Requisito
                          WHERE        (r.ESTADO = 'AJ') AND (l.Operacion IN ('RE', 'CR')) AND (l.idLogRegistro_Requisito =
                                                        (SELECT        MAX(idLogRegistro_Requisito) AS Expr1
                                                          FROM            dbo.LOG_REGISTRO_REQUISITO AS l2
                                                          WHERE        (r.idRegistro_Requisito = idRegistro_Requisito) AND (Operacion IN ('RE', 'CR'))))) AS t1 INNER JOIN
                         dbo.REGISTRO_REQUISITO AS rr ON t1.idRegistro_Requisito = rr.idRegistro_Requisito</CODE>
</VIEW>
<VIEW>
<NAME>v_NombreSujetos_ObligadosConCertificadoActivos</NAME>
<ID>174</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create view %viewname% as (
SELECT        e.idEntidad, e.idActividadEconomica, ac.nombre, CAST(MAX(l.Fecha) AS date) AS Fecha
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ac ON e.idActividadEconomica = ac.idActividadEconomica INNER JOIN
                         dbo.tTramite AS t ON e.idEntidad = t.idEntidad INNER JOIN
                         dbo.tCertificadoImpresion AS c ON t.idTramite = c.idTramite INNER JOIN
                         dbo.LogsTrans AS l ON c.idLogTrans = l.idLogTrans
WHERE        (c.tipo = 'SO') AND (t.Estado_Tramite = 'TE') and e.ESTADO='AC'
GROUP BY e.idEntidad, e.idActividadEconomica, ac.nombre)</CODE>
</VIEW>
<VIEW>
<NAME>v_NombreSujetos_ObligadosConCertificadoActivosArchivo</NAME>
<ID>175</ID>
<POSNR>0</POSNR>
<SCHEMA>dbo</SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CODE>create  view %viewname%

as (

SELECT     distinct   e.idEntidad, e.idActividadEconomica, ac.nombre, CAST(MAX(l.Fecha) AS date) AS Fecha
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ac ON e.idActividadEconomica = ac.idActividadEconomica INNER JOIN
                         dbo.tTramite AS t ON e.idEntidad = t.idEntidad INNER JOIN
                         dbo.tObservacionTramite_Archivo AS c ON t.idTramite = c.idTramite INNER JOIN
                         dbo.LogsTrans AS l ON c.idLogTrans = l.idLogTrans

						 inner join REGISTRO_REQUISITO re
						 on re.idTramite=t.idTramite and re.idTramite=c.idTramite
						 and re.idEntidad=t.idEntidad
WHERE        (t.Estado_Tramite = 'TE') and e.ESTADO='AC'

and re.idFuncionario is null

and l.Transaccion='RE'
GROUP BY e.idEntidad, e.idActividadEconomica, ac.nombre
union

SELECT        e.idEntidad, e.idActividadEconomica, ac.nombre, CAST(MAX(l.Fecha) AS date) AS Fecha
FROM            dbo.tEntidad AS e INNER JOIN
                         dbo.tActividadEconomica AS ac ON e.idActividadEconomica = ac.idActividadEconomica INNER JOIN
                         dbo.tTramite AS t ON e.idEntidad = t.idEntidad INNER JOIN
                         dbo.tCertificadoImpresion AS c ON t.idTramite = c.idTramite INNER JOIN
                         dbo.LogsTrans AS l ON c.idLogTrans = l.idLogTrans
WHERE        (c.tipo = 'SO') AND (t.Estado_Tramite = 'TE') and e.ESTADO='AC'
GROUP BY e.idEntidad, e.idActividadEconomica, ac.nombre)</CODE>
</VIEW>
</VIEWS>
<RELATIONSHIPS>
<REL>
<NAME>CasosRenovacionDocumentos_Registro_casoRenovacion</NAME>
<NAMETEMPLATE>CasosRenovacionDocumentos_Registro_casoRenovacion</NAMETEMPLATE>
<ID>176</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>2</PARENTOBJECTID>
<CHILDOBJECTID>11</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>1</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>CasosRenovacionDocumentos_Registro_casoRenovacion</NAME>
<NAMETEMPLATE>CasosRenovacionDocumentos_Registro_casoRenovacion</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>5</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>5</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>PARAM_REQUISITOS_SO_Registro_casoRenovacion</NAME>
<NAMETEMPLATE>PARAM_REQUISITOS_SO_Registro_casoRenovacion</NAMETEMPLATE>
<ID>177</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>10</PARENTOBJECTID>
<CHILDOBJECTID>11</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>1</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>PARAM_REQUISITOS_SO_Registro_casoRenovacion</NAME>
<NAMETEMPLATE>PARAM_REQUISITOS_SO_Registro_casoRenovacion</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>3</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>3</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>FK_REGISTRO_REQUISITO_PARAM_REQUISITOS_SO</NAME>
<NAMETEMPLATE>FK_REGISTRO_REQUISITO_PARAM_REQUISITOS_SO</NAMETEMPLATE>
<ID>178</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>10</PARENTOBJECTID>
<CHILDOBJECTID>12</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>0</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>FK_REGISTRO_REQUISITO_PARAM_REQUISITOS_SO</NAME>
<NAMETEMPLATE>FK_REGISTRO_REQUISITO_PARAM_REQUISITOS_SO</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>4</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>4</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>FK_REGISTRO_REQUISITO_tEntidad1</NAME>
<NAMETEMPLATE>FK_REGISTRO_REQUISITO_tEntidad1</NAMETEMPLATE>
<ID>179</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>26</PARENTOBJECTID>
<CHILDOBJECTID>12</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>0</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>FK_REGISTRO_REQUISITO_tEntidad1</NAME>
<NAMETEMPLATE>FK_REGISTRO_REQUISITO_tEntidad1</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>3</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>3</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>FK_REGISTRO_REQUISITO_tFuncionario</NAME>
<NAMETEMPLATE>FK_REGISTRO_REQUISITO_tFuncionario</NAMETEMPLATE>
<ID>180</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>30</PARENTOBJECTID>
<CHILDOBJECTID>12</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>0</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>FK_REGISTRO_REQUISITO_tFuncionario</NAME>
<NAMETEMPLATE>FK_REGISTRO_REQUISITO_tFuncionario</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>5</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>5</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>REGISTRO_REQUISITO_REGISTRO_REQUISITOHistRenovados</NAME>
<NAMETEMPLATE>REGISTRO_REQUISITO_REGISTRO_REQUISITOHistRenovados</NAMETEMPLATE>
<ID>181</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>12</PARENTOBJECTID>
<CHILDOBJECTID>13</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>1</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>REGISTRO_REQUISITO_REGISTRO_REQUISITOHistRenovados</NAME>
<NAMETEMPLATE>REGISTRO_REQUISITO_REGISTRO_REQUISITOHistRenovados</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>3</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>3</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>FK_tEntidad_tActividadEconomica</NAME>
<NAMETEMPLATE>FK_tEntidad_tActividadEconomica</NAMETEMPLATE>
<ID>182</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>17</PARENTOBJECTID>
<CHILDOBJECTID>26</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>0</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>FK_tEntidad_tActividadEconomica</NAME>
<NAMETEMPLATE>FK_tEntidad_tActividadEconomica</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>17</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>17</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>FK_tEntidad_tCiudad</NAME>
<NAMETEMPLATE>FK_tEntidad_tCiudad</NAMETEMPLATE>
<ID>183</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>21</PARENTOBJECTID>
<CHILDOBJECTID>26</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>0</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>FK_tEntidad_tCiudad</NAME>
<NAMETEMPLATE>FK_tEntidad_tCiudad</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>18</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>18</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>tEntidad_tEntidadHistRenovados2</NAME>
<NAMETEMPLATE>tEntidad_tEntidadHistRenovados2</NAMETEMPLATE>
<ID>184</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>26</PARENTOBJECTID>
<CHILDOBJECTID>27</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>1</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>tEntidad_tEntidadHistRenovados2</NAME>
<NAMETEMPLATE>tEntidad_tEntidadHistRenovados2</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>3</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>3</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>FK_tAnalistaCumplimiento_tEntidad</NAME>
<NAMETEMPLATE>FK_tAnalistaCumplimiento_tEntidad</NAMETEMPLATE>
<ID>185</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>26</PARENTOBJECTID>
<CHILDOBJECTID>30</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>0</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>FK_tAnalistaCumplimiento_tEntidad</NAME>
<NAMETEMPLATE>FK_tAnalistaCumplimiento_tEntidad</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>18</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>18</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>FK_tAnalistaCumplimiento_tPais</NAME>
<NAMETEMPLATE>FK_tAnalistaCumplimiento_tPais</NAMETEMPLATE>
<ID>186</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>37</PARENTOBJECTID>
<CHILDOBJECTID>30</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>0</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>FK_tAnalistaCumplimiento_tPais</NAME>
<NAMETEMPLATE>FK_tAnalistaCumplimiento_tPais</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>19</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>19</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>tFuncionario_tFuncionarioHistRenovados</NAME>
<NAMETEMPLATE>tFuncionario_tFuncionarioHistRenovados</NAMETEMPLATE>
<ID>187</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>30</PARENTOBJECTID>
<CHILDOBJECTID>31</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>1</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>tFuncionario_tFuncionarioHistRenovados</NAME>
<NAMETEMPLATE>tFuncionario_tFuncionarioHistRenovados</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>3</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>3</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
<REL>
<NAME>FK__tTramiteC__idTra__3AA1AEB8</NAME>
<NAMETEMPLATE>FK__tTramiteC__idTra__3AA1AEB8</NAMETEMPLATE>
<ID>188</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<PARENTOBJECTID>40</PARENTOBJECTID>
<CHILDOBJECTID>41</CHILDOBJECTID>
<CARDINALITY>0</CARDINALITY>
<RELTYPE>1</RELTYPE>
<MANDATORYPARENT>1</MANDATORYPARENT>
<UPDATERULE>0</UPDATERULE>
<DELETERULE>0</DELETERULE>
<CONSTRAINT>
<NAME>FK__tTramiteC__idTra__3AA1AEB8</NAME>
<NAMETEMPLATE>FK__tTramiteC__idTra__3AA1AEB8</NAMETEMPLATE>
<ID>1</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<CONLEVEL>2</CONLEVEL>
<CONTYPE>4</CONTYPE>
<ATTRIBUTEIDS>
<ATTRIBUTEID>2</ATTRIBUTEID>
</ATTRIBUTEIDS>
</CONSTRAINT>
<PAIRS>
<PAIR>
<NAME></NAME>
<ID>0</ID>
<POSNR>0</POSNR>
<SCHEMA></SCHEMA>
<DESC></DESC>
<NOTE></NOTE>
<KEYID>2</KEYID>
<FOREIGNKEYID>2</FOREIGNKEYID>
</PAIR>
</PAIRS>
</REL>
</RELATIONSHIPS>
<SUBCATEGORYCONNECTIONS>
</SUBCATEGORYCONNECTIONS>
</DATADICT>
<DIAGRAMS>
<DisplayPreferences>
<USEINDICATORLINE>0</USEINDICATORLINE>
<INDICATORBITMAPS>0</INDICATORBITMAPS>
<PKINDICATOR>PK</PKINDICATOR>
<FKINDICATOR>FK</FKINDICATOR>
<PFINDICATOR>PF</PFINDICATOR>
<NOTNULLINDICATOR>*</NOTNULLINDICATOR>
<INDICATORPOSITION>0</INDICATORPOSITION>
<USEGRADIENT>1</USEGRADIENT>
<DEFTEXTAREACOLOR>16777215</DEFTEXTAREACOLOR>
<DEFENTCOLOR>16777215</DEFENTCOLOR>
<DEFSTAMPCOLOR>16777215</DEFSTAMPCOLOR>
<DEFGROUPBOXCOLOR>8421504</DEFGROUPBOXCOLOR>
<DEFTEXTAREALINECOLOR>0</DEFTEXTAREALINECOLOR>
<DEFENTLINECOLOR>0</DEFENTLINECOLOR>
<DEFSTAMPLINECOLOR>0</DEFSTAMPLINECOLOR>
<DEFSUBCATLINECOLOR>0</DEFSUBCATLINECOLOR>
<DEFCONLINECOLOR>0</DEFCONLINECOLOR>
<DEFGROUPBOXLINECOLOR>0</DEFGROUPBOXLINECOLOR>
<DEFTEXTAREATRANSPARENT>0</DEFTEXTAREATRANSPARENT>
<DEFSTAMPTRANSPARENT>0</DEFSTAMPTRANSPARENT>
<DEFTEXTAREALINEWIDTH>1</DEFTEXTAREALINEWIDTH>
<DEFSTAMPLINEWIDTH>1</DEFSTAMPLINEWIDTH>
<DEFGROUPBOXLINEWIDTH>0</DEFGROUPBOXLINEWIDTH>
<DEFTEXTAREALINESTYLE>0</DEFTEXTAREALINESTYLE>
<DEFSTAMPLINESTYLE>0</DEFSTAMPLINESTYLE>
<DEFGROUPBOXLINESTYLE>0</DEFGROUPBOXLINESTYLE>
<ENTNAMEFONT>Arial,9,B,0,clNavy,0</ENTNAMEFONT>
<ENTPKFONT>Arial,8,B,0,clWindowText,0</ENTPKFONT>
<ENTFKFONT>Arial,8,I,0,clWindowText,0</ENTFKFONT>
<ENTATTRFONT>Arial,8,,0,clWindowText,0</ENTATTRFONT>
<TEXTAREAFONT>Arial,8,,0,clWindowText,0</TEXTAREAFONT>
<GROUPBOXFONT>Arial,8,,0,clWindowText,0</GROUPBOXFONT>
<CAPTIONFONT>Arial,8,,0,clWindowText,0</CAPTIONFONT>
</DisplayPreferences>
<DIAGRAM>
<ID>1</ID>
<NAME>Main Diagram</NAME>
<DESC></DESC>
<TODO></TODO>
<ISMAINDIAGRAM>1</ISMAINDIAGRAM>
<BGCOLOR>16702121</BGCOLOR>
<DISPLAYLEVEL>0</DISPLAYLEVEL>
<VISIBLEATTR>0</VISIBLEATTR>
<CAPTIONSTYLE>0</CAPTIONSTYLE>
<SHOWPKINDICATOR>1</SHOWPKINDICATOR>
<SHOWFKINDICATOR>1</SHOWFKINDICATOR>
<SHOWNOTNULLINDICATOR>0</SHOWNOTNULLINDICATOR>
<NOTATION>0</NOTATION>
</DIAGRAM>
<CONTROLS>
<ENTITYCONTROLS>
<ENTC>
<ID>2</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>182</W>
<H>63</H>
<L>20</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>3</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>114</W>
<H>153</H>
<L>340</L>
<T>20</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>4</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>65</W>
<H>93</H>
<L>340</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>5</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>166</W>
<H>153</H>
<L>660</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>6</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>90</W>
<H>108</H>
<L>980</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>7</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>130</W>
<H>303</H>
<L>1300</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>8</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>191</W>
<H>213</H>
<L>1620</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>9</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>113</W>
<H>138</H>
<L>1940</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>10</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>150</W>
<H>93</H>
<L>20</L>
<T>620</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>11</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>157</W>
<H>93</H>
<L>20</L>
<T>420</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>12</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>143</W>
<H>228</H>
<L>20</L>
<T>820</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>13</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>220</W>
<H>243</H>
<L>20</L>
<T>1220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>14</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>151</W>
<H>198</H>
<L>2580</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>15</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>245</W>
<H>153</H>
<L>2900</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>16</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>280</W>
<H>138</H>
<L>3220</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>17</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>147</W>
<H>63</H>
<L>340</L>
<T>1620</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>18</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>156</W>
<H>213</H>
<L>3540</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>19</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>143</W>
<H>93</H>
<L>3860</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>20</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>155</W>
<H>153</H>
<L>4180</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>21</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>85</W>
<H>63</H>
<L>660</L>
<T>1420</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>22</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>118</W>
<H>123</H>
<L>2260</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>23</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>171</W>
<H>168</H>
<L>4500</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>24</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>82</W>
<H>108</H>
<L>4820</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>25</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>114</W>
<H>108</H>
<L>5140</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>26</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>195</W>
<H>348</H>
<L>340</L>
<T>1220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>27</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>195</W>
<H>378</H>
<L>660</L>
<T>1620</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>28</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>113</W>
<H>63</H>
<L>5460</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>29</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>98</W>
<H>108</H>
<L>5780</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>30</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>178</W>
<H>348</H>
<L>340</L>
<T>820</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>31</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>178</W>
<H>378</H>
<L>660</L>
<T>1020</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>32</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>132</W>
<H>93</H>
<L>6100</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>33</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>136</W>
<H>108</H>
<L>6420</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>34</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>166</W>
<H>123</H>
<L>6740</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>35</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>192</W>
<H>78</H>
<L>7060</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>36</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>177</W>
<H>138</H>
<L>7380</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>37</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>64</W>
<H>63</H>
<L>660</L>
<T>820</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>38</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>128</W>
<H>153</H>
<L>7700</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>39</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>105</W>
<H>123</H>
<L>8020</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>40</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>150</W>
<H>138</H>
<L>8340</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>41</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>141</W>
<H>153</H>
<L>8340</L>
<T>420</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>42</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>159</W>
<H>108</H>
<L>8660</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>43</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>131</W>
<H>108</H>
<L>8980</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
<ENTC>
<ID>44</ID>
<DIAGRAMID>1</DIAGRAMID>
<W>109</W>
<H>168</H>
<L>9300</L>
<T>220</T>
<BRUSH>0,16777215</BRUSH>
<PEN>0,1,4,0</PEN>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<TR>0</TR>
<AS>1</AS>
</ENTC>
</ENTITYCONTROLS>
<SUBCATEGORYCONTROLS>
</SUBCATEGORYCONTROLS>
<TEXTAREACONTROLS>
</TEXTAREACONTROLS>
<STAMPCONTROLS>
</STAMPCONTROLS>
<GROUPBOXESCONTROLS>
</GROUPBOXESCONTROLS>
<RELATIONSHIPCONNECTORS>
<RELC>
<ID>176</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>5000</FROMRELATIVEX>
<FROMRELATIVEY>5000</FROMRELATIVEY>
<TORELATIVEX>5000</TORELATIVEX>
<TORELATIVEY>5000</TORELATIVEY>
<POINTS>
<POINT>
<X>111</X>
<Y>283</Y>
</POINT>
<POINT>
<X>111</X>
<Y>351</Y>
</POINT>
<POINT>
<X>98</X>
<Y>351</Y>
</POINT>
<POINT>
<X>98</X>
<Y>419</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>177</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>5000</FROMRELATIVEX>
<FROMRELATIVEY>5000</FROMRELATIVEY>
<TORELATIVEX>5000</TORELATIVEX>
<TORELATIVEY>5000</TORELATIVEY>
<POINTS>
<POINT>
<X>95</X>
<Y>619</Y>
</POINT>
<POINT>
<X>95</X>
<Y>566</Y>
</POINT>
<POINT>
<X>98</X>
<Y>566</Y>
</POINT>
<POINT>
<X>98</X>
<Y>513</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>178</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>5000</FROMRELATIVEX>
<FROMRELATIVEY>5000</FROMRELATIVEY>
<TORELATIVEX>5000</TORELATIVEX>
<TORELATIVEY>5000</TORELATIVEY>
<POINTS>
<POINT>
<X>95</X>
<Y>713</Y>
</POINT>
<POINT>
<X>95</X>
<Y>766</Y>
</POINT>
<POINT>
<X>92</X>
<Y>766</Y>
</POINT>
<POINT>
<X>92</X>
<Y>819</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>179</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>4500</FROMRELATIVEX>
<FROMRELATIVEY>5000</FROMRELATIVEY>
<TORELATIVEX>5500</TORELATIVEX>
<TORELATIVEY>5000</TORELATIVEY>
<POINTS>
<POINT>
<X>428</X>
<Y>1219</Y>
</POINT>
<POINT>
<X>428</X>
<Y>1134</Y>
</POINT>
<POINT>
<X>99</X>
<Y>1134</Y>
</POINT>
<POINT>
<X>99</X>
<Y>1048</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>180</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>5000</FROMRELATIVEX>
<FROMRELATIVEY>5000</FROMRELATIVEY>
<TORELATIVEX>5000</TORELATIVEX>
<TORELATIVEY>5000</TORELATIVEY>
<POINTS>
<POINT>
<X>339</X>
<Y>994</Y>
</POINT>
<POINT>
<X>244</X>
<Y>994</Y>
</POINT>
<POINT>
<X>244</X>
<Y>934</Y>
</POINT>
<POINT>
<X>163</X>
<Y>934</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>181</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>4500</FROMRELATIVEX>
<FROMRELATIVEY>5000</FROMRELATIVEY>
<TORELATIVEX>5000</TORELATIVEX>
<TORELATIVEY>5000</TORELATIVEY>
<POINTS>
<POINT>
<X>84</X>
<Y>1048</Y>
</POINT>
<POINT>
<X>84</X>
<Y>1134</Y>
</POINT>
<POINT>
<X>130</X>
<Y>1134</Y>
</POINT>
<POINT>
<X>130</X>
<Y>1219</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>182</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>5000</FROMRELATIVEX>
<FROMRELATIVEY>5000</FROMRELATIVEY>
<TORELATIVEX>4500</TORELATIVEX>
<TORELATIVEY>5000</TORELATIVEY>
<POINTS>
<POINT>
<X>414</X>
<Y>1619</Y>
</POINT>
<POINT>
<X>414</X>
<Y>1594</Y>
</POINT>
<POINT>
<X>428</X>
<Y>1594</Y>
</POINT>
<POINT>
<X>428</X>
<Y>1568</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>183</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>5000</FROMRELATIVEX>
<FROMRELATIVEY>5000</FROMRELATIVEY>
<TORELATIVEX>5000</TORELATIVEX>
<TORELATIVEY>5000</TORELATIVEY>
<POINTS>
<POINT>
<X>659</X>
<Y>1452</Y>
</POINT>
<POINT>
<X>597</X>
<Y>1452</Y>
</POINT>
<POINT>
<X>597</X>
<Y>1394</Y>
</POINT>
<POINT>
<X>535</X>
<Y>1394</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>184</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>5500</FROMRELATIVEX>
<FROMRELATIVEY>5000</FROMRELATIVEY>
<TORELATIVEX>5000</TORELATIVEX>
<TORELATIVEY>5000</TORELATIVEY>
<POINTS>
<POINT>
<X>447</X>
<Y>1568</Y>
</POINT>
<POINT>
<X>447</X>
<Y>1594</Y>
</POINT>
<POINT>
<X>758</X>
<Y>1594</Y>
</POINT>
<POINT>
<X>758</X>
<Y>1619</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>185</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>5500</FROMRELATIVEX>
<FROMRELATIVEY>5000</FROMRELATIVEY>
<TORELATIVEX>5000</TORELATIVEX>
<TORELATIVEY>5000</TORELATIVEY>
<POINTS>
<POINT>
<X>447</X>
<Y>1219</Y>
</POINT>
<POINT>
<X>447</X>
<Y>1194</Y>
</POINT>
<POINT>
<X>429</X>
<Y>1194</Y>
</POINT>
<POINT>
<X>429</X>
<Y>1168</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>186</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>5000</FROMRELATIVEX>
<FROMRELATIVEY>5000</FROMRELATIVEY>
<TORELATIVEX>5000</TORELATIVEX>
<TORELATIVEY>4500</TORELATIVEY>
<POINTS>
<POINT>
<X>659</X>
<Y>852</Y>
</POINT>
<POINT>
<X>589</X>
<Y>852</Y>
</POINT>
<POINT>
<X>589</X>
<Y>977</Y>
</POINT>
<POINT>
<X>518</X>
<Y>977</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>187</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>5000</FROMRELATIVEX>
<FROMRELATIVEY>5500</FROMRELATIVEY>
<TORELATIVEX>5000</TORELATIVEX>
<TORELATIVEY>5000</TORELATIVEY>
<POINTS>
<POINT>
<X>518</X>
<Y>1011</Y>
</POINT>
<POINT>
<X>589</X>
<Y>1011</Y>
</POINT>
<POINT>
<X>589</X>
<Y>1209</Y>
</POINT>
<POINT>
<X>659</X>
<Y>1209</Y>
</POINT>
</POINTS>
</RELC>
<RELC>
<ID>188</ID>
<DIAGRAMID>1</DIAGRAMID>
<FONT>Arial,8,,0,clWindowText,0</FONT>
<PEN>1,1,4,0</PEN>
<FROMRELATIVEX>5000</FROMRELATIVEX>
<FROMRELATIVEY>5000</FROMRELATIVEY>
<TORELATIVEX>5000</TORELATIVEX>
<TORELATIVEY>5000</TORELATIVEY>
<POINTS>
<POINT>
<X>8415</X>
<Y>358</Y>
</POINT>
<POINT>
<X>8415</X>
<Y>389</Y>
</POINT>
<POINT>
<X>8410</X>
<Y>389</Y>
</POINT>
<POINT>
<X>8410</X>
<Y>419</Y>
</POINT>
</POINTS>
</RELC>
</RELATIONSHIPCONNECTORS>
<SUBCATEGORYCONNECTORS>
</SUBCATEGORYCONNECTORS>
</CONTROLS>
</DIAGRAMS>
</VERSION>

</dezign>